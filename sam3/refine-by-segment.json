{
  "id": "f97f0745-a9ae-4b4c-925c-f6a960ed303d",
  "revision": 0,
  "last_node_id": 155,
  "last_link_id": 455,
  "nodes": [
    {
      "id": 144,
      "type": "76b4a33c-03b5-4f17-91e7-d2020b656ac7",
      "pos": [
        1513.663693252376,
        244.05573916291524
      ],
      "size": [
        264.62858736656153,
        454.0731616227956
      ],
      "flags": {},
      "order": 0,
      "mode": 4,
      "inputs": [
        {
          "name": "pixels",
          "type": "IMAGE",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": []
        }
      ],
      "properties": {
        "proxyWidgets": [
          [
            "141",
            "text"
          ],
          [
            "142",
            "text"
          ],
          [
            "140",
            "ckpt_name"
          ],
          [
            "143",
            "lora_01"
          ],
          [
            "143",
            "strength_01"
          ],
          [
            "139",
            "cfg"
          ],
          [
            "139",
            "denoise"
          ]
        ],
        "cnr_id": "comfy-core",
        "ver": "0.6.0"
      },
      "widgets_values": []
    },
    {
      "id": 122,
      "type": "CatboxAnonSaveImageStealth",
      "pos": [
        2177.1147765272513,
        819.1210007804151
      ],
      "size": [
        889.6088134466104,
        877.0557028645127
      ],
      "flags": {},
      "order": 12,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 455
        }
      ],
      "outputs": [],
      "properties": {
        "cnr_id": "comfyui_stealth_pnginfo",
        "ver": "1.1.4",
        "Node name for S&R": "CatboxAnonSaveImageStealth"
      },
      "widgets_values": [
        "Lumina-XL-Refined",
        "alpha",
        true,
        false
      ]
    },
    {
      "id": 130,
      "type": "PreviewImage",
      "pos": [
        787.5120614204018,
        229.26741011140595
      ],
      "size": [
        583.5945307342065,
        515.121965108324
      ],
      "flags": {},
      "order": 6,
      "mode": 4,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 363
        }
      ],
      "outputs": [],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.6.0",
        "Node name for S&R": "PreviewImage"
      },
      "widgets_values": []
    },
    {
      "id": 2,
      "type": "LoadImage",
      "pos": [
        -189.38105578161995,
        836.674729868356
      ],
      "size": [
        598.4211400543959,
        471.09259585745906
      ],
      "flags": {},
      "order": 1,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": []
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": null
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.6.0",
        "Node name for S&R": "LoadImage"
      },
      "widgets_values": [
        "example.png",
        "image"
      ]
    },
    {
      "id": 127,
      "type": "LoadImageOutput",
      "pos": [
        -187.62786157014423,
        228.53511047566315
      ],
      "size": [
        597.5186873008761,
        551.4077707625603
      ],
      "flags": {},
      "order": 2,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            436,
            447
          ]
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": null
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.6.0",
        "Node name for S&R": "LoadImageOutput"
      },
      "widgets_values": [
        "Lumina_00086_.png [output]",
        false,
        "refresh",
        "image"
      ]
    },
    {
      "id": 129,
      "type": "SAM3Segmentation",
      "pos": [
        498.62160591664974,
        231.86497402837543
      ],
      "size": [
        270,
        262
      ],
      "flags": {},
      "order": 4,
      "mode": 4,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 436
        }
      ],
      "outputs": [
        {
          "name": "segmented_image",
          "type": "IMAGE",
          "links": [
            363
          ]
        },
        {
          "name": "masks",
          "type": "MASK",
          "links": null
        },
        {
          "name": "mask_combined",
          "type": "MASK",
          "links": []
        },
        {
          "name": "segs",
          "type": "SEGS",
          "links": null
        }
      ],
      "properties": {
        "cnr_id": "comfyui_sam3",
        "ver": "0.2.0",
        "Node name for S&R": "SAM3Segmentation"
      },
      "widgets_values": [
        "painting",
        0.3,
        10,
        10,
        false,
        false,
        ""
      ]
    },
    {
      "id": 153,
      "type": "6cf92dfd-3245-4b41-a365-bb382c9678c0",
      "pos": [
        479.8434622660501,
        1832.3185091367434
      ],
      "size": [
        542.6090037089862,
        921.687338635596
      ],
      "flags": {},
      "order": 9,
      "mode": 4,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 450
        },
        {
          "label": "segment resolution",
          "name": "value",
          "type": "INT",
          "widget": {
            "name": "value"
          },
          "link": null
        },
        {
          "label": "additional positive prompt",
          "name": "string_b",
          "type": "STRING",
          "widget": {
            "name": "string_b"
          },
          "link": null
        },
        {
          "label": "negative prompt",
          "name": "text",
          "type": "STRING",
          "widget": {
            "name": "text"
          },
          "link": null
        },
        {
          "label": "grow mask",
          "name": "expand",
          "type": "INT",
          "widget": {
            "name": "expand"
          },
          "link": null
        },
        {
          "label": "enable qwen vl",
          "name": "switch",
          "type": "BOOLEAN",
          "widget": {
            "name": "switch"
          },
          "link": null
        }
      ],
      "outputs": [
        {
          "label": "image",
          "name": "final_image",
          "type": "IMAGE",
          "links": [
            453
          ]
        }
      ],
      "properties": {
        "proxyWidgets": [
          [
            "1",
            "prompt"
          ],
          [
            "1",
            "threshold"
          ],
          [
            "-1",
            "value"
          ],
          [
            "-1",
            "expand"
          ],
          [
            "-1",
            "switch"
          ],
          [
            "-1",
            "string_b"
          ],
          [
            "-1",
            "text"
          ],
          [
            "7",
            "ckpt_name"
          ],
          [
            "6",
            "steps"
          ],
          [
            "6",
            "denoise"
          ],
          [
            "40",
            "border_blending"
          ],
          [
            "114",
            "lora_01"
          ],
          [
            "114",
            "strength_01"
          ],
          [
            "3",
            "$$canvas-image-preview"
          ],
          [
            "41",
            "$$canvas-image-preview"
          ]
        ],
        "cnr_id": "comfy-core",
        "ver": "0.6.0"
      },
      "widgets_values": [
        null,
        null,
        204,
        8,
        true,
        "",
        "jpeg artifacts, worst quality, low quality, lowres, signature, watermark, artist_name, twitter_username, patreon_logo, letterboxed, censored, shiny skin, realistic, 3d, sweat"
      ]
    },
    {
      "id": 154,
      "type": "d1358af3-8108-439a-a0f6-02700ea5c123",
      "pos": [
        1033.4377397954268,
        1835.9684950987084
      ],
      "size": [
        542.6090037089862,
        921.687338635596
      ],
      "flags": {},
      "order": 10,
      "mode": 4,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 453
        },
        {
          "label": "segment resolution",
          "name": "value",
          "type": "INT",
          "widget": {
            "name": "value"
          },
          "link": null
        },
        {
          "label": "additional positive prompt",
          "name": "string_b",
          "type": "STRING",
          "widget": {
            "name": "string_b"
          },
          "link": null
        },
        {
          "label": "negative prompt",
          "name": "text",
          "type": "STRING",
          "widget": {
            "name": "text"
          },
          "link": null
        },
        {
          "label": "grow mask",
          "name": "expand",
          "type": "INT",
          "widget": {
            "name": "expand"
          },
          "link": null
        },
        {
          "label": "enable qwen vl",
          "name": "switch",
          "type": "BOOLEAN",
          "widget": {
            "name": "switch"
          },
          "link": null
        }
      ],
      "outputs": [
        {
          "label": "image",
          "name": "final_image",
          "type": "IMAGE",
          "links": [
            454
          ]
        }
      ],
      "properties": {
        "proxyWidgets": [
          [
            "1",
            "prompt"
          ],
          [
            "1",
            "threshold"
          ],
          [
            "-1",
            "value"
          ],
          [
            "-1",
            "expand"
          ],
          [
            "-1",
            "switch"
          ],
          [
            "-1",
            "string_b"
          ],
          [
            "-1",
            "text"
          ],
          [
            "7",
            "ckpt_name"
          ],
          [
            "6",
            "steps"
          ],
          [
            "6",
            "denoise"
          ],
          [
            "40",
            "border_blending"
          ],
          [
            "114",
            "lora_01"
          ],
          [
            "114",
            "strength_01"
          ],
          [
            "3",
            "$$canvas-image-preview"
          ],
          [
            "41",
            "$$canvas-image-preview"
          ]
        ],
        "cnr_id": "comfy-core",
        "ver": "0.6.0"
      },
      "widgets_values": [
        null,
        null,
        1024,
        8,
        true,
        "",
        "jpeg artifacts, worst quality, low quality, lowres, signature, watermark, artist_name, twitter_username, patreon_logo, letterboxed, censored, shiny skin, realistic, 3d, sweat"
      ]
    },
    {
      "id": 155,
      "type": "c5c0a3c2-5ea1-462e-b5b3-54ed4c201652",
      "pos": [
        1590.6124929341565,
        1833.3464962604091
      ],
      "size": [
        542.6090037089862,
        921.687338635596
      ],
      "flags": {},
      "order": 11,
      "mode": 4,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 454
        },
        {
          "label": "segment resolution",
          "name": "value",
          "type": "INT",
          "widget": {
            "name": "value"
          },
          "link": null
        },
        {
          "label": "additional positive prompt",
          "name": "string_b",
          "type": "STRING",
          "widget": {
            "name": "string_b"
          },
          "link": null
        },
        {
          "label": "negative prompt",
          "name": "text",
          "type": "STRING",
          "widget": {
            "name": "text"
          },
          "link": null
        },
        {
          "label": "grow mask",
          "name": "expand",
          "type": "INT",
          "widget": {
            "name": "expand"
          },
          "link": null
        },
        {
          "label": "enable qwen vl",
          "name": "switch",
          "type": "BOOLEAN",
          "widget": {
            "name": "switch"
          },
          "link": null
        }
      ],
      "outputs": [
        {
          "label": "image",
          "name": "final_image",
          "type": "IMAGE",
          "links": [
            455
          ]
        }
      ],
      "properties": {
        "proxyWidgets": [
          [
            "1",
            "prompt"
          ],
          [
            "1",
            "threshold"
          ],
          [
            "-1",
            "value"
          ],
          [
            "-1",
            "expand"
          ],
          [
            "-1",
            "switch"
          ],
          [
            "-1",
            "string_b"
          ],
          [
            "-1",
            "text"
          ],
          [
            "7",
            "ckpt_name"
          ],
          [
            "6",
            "steps"
          ],
          [
            "6",
            "denoise"
          ],
          [
            "40",
            "border_blending"
          ],
          [
            "114",
            "lora_01"
          ],
          [
            "114",
            "strength_01"
          ],
          [
            "3",
            "$$canvas-image-preview"
          ],
          [
            "41",
            "$$canvas-image-preview"
          ]
        ],
        "cnr_id": "comfy-core",
        "ver": "0.6.0"
      },
      "widgets_values": [
        null,
        null,
        1280,
        8,
        true,
        "",
        "jpeg artifacts, worst quality, low quality, lowres, signature, watermark, artist_name, twitter_username, patreon_logo, letterboxed, censored, shiny skin, realistic, 3d, sweat"
      ]
    },
    {
      "id": 151,
      "type": "bbbe276c-15d4-453f-ad9e-0b77382d3472",
      "pos": [
        1592.3699708725603,
        863.1296178540327
      ],
      "size": [
        542.6090037089862,
        921.687338635596
      ],
      "flags": {},
      "order": 8,
      "mode": 4,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 443
        },
        {
          "label": "segment resolution",
          "name": "value",
          "type": "INT",
          "widget": {
            "name": "value"
          },
          "link": null
        },
        {
          "label": "additional positive prompt",
          "name": "string_b",
          "type": "STRING",
          "widget": {
            "name": "string_b"
          },
          "link": null
        },
        {
          "label": "negative prompt",
          "name": "text",
          "type": "STRING",
          "widget": {
            "name": "text"
          },
          "link": null
        },
        {
          "label": "grow mask",
          "name": "expand",
          "type": "INT",
          "widget": {
            "name": "expand"
          },
          "link": null
        },
        {
          "label": "enable qwen vl",
          "name": "switch",
          "type": "BOOLEAN",
          "widget": {
            "name": "switch"
          },
          "link": null
        }
      ],
      "outputs": [
        {
          "label": "image",
          "name": "final_image",
          "type": "IMAGE",
          "links": [
            450
          ]
        }
      ],
      "properties": {
        "proxyWidgets": [
          [
            "1",
            "prompt"
          ],
          [
            "1",
            "threshold"
          ],
          [
            "-1",
            "value"
          ],
          [
            "-1",
            "expand"
          ],
          [
            "-1",
            "switch"
          ],
          [
            "-1",
            "string_b"
          ],
          [
            "-1",
            "text"
          ],
          [
            "7",
            "ckpt_name"
          ],
          [
            "6",
            "steps"
          ],
          [
            "6",
            "denoise"
          ],
          [
            "40",
            "border_blending"
          ],
          [
            "114",
            "lora_01"
          ],
          [
            "114",
            "strength_01"
          ],
          [
            "3",
            "$$canvas-image-preview"
          ],
          [
            "41",
            "$$canvas-image-preview"
          ]
        ],
        "cnr_id": "comfy-core",
        "ver": "0.6.0"
      },
      "widgets_values": [
        null,
        null,
        1280,
        8,
        true,
        "",
        "jpeg artifacts, worst quality, low quality, lowres, signature, watermark, artist_name, twitter_username, patreon_logo, letterboxed, censored, shiny skin, realistic, 3d, tears, crying, sweat"
      ]
    },
    {
      "id": 146,
      "type": "7730d3ee-133a-45e5-9f21-29f7393bcf50",
      "pos": [
        1038.583690090552,
        860.0398590859603
      ],
      "size": [
        542.6090037089862,
        921.687338635596
      ],
      "flags": {},
      "order": 7,
      "mode": 4,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 446
        },
        {
          "label": "segment resolution",
          "name": "value",
          "type": "INT",
          "widget": {
            "name": "value"
          },
          "link": null
        },
        {
          "label": "additional positive prompt",
          "name": "string_b",
          "type": "STRING",
          "widget": {
            "name": "string_b"
          },
          "link": null
        },
        {
          "label": "negative prompt",
          "name": "text",
          "type": "STRING",
          "widget": {
            "name": "text"
          },
          "link": null
        },
        {
          "label": "grow mask",
          "name": "expand",
          "type": "INT",
          "widget": {
            "name": "expand"
          },
          "link": null
        },
        {
          "label": "enable qwen vl",
          "name": "switch",
          "type": "BOOLEAN",
          "widget": {
            "name": "switch"
          },
          "link": null
        }
      ],
      "outputs": [
        {
          "label": "image",
          "name": "final_image",
          "type": "IMAGE",
          "links": [
            443
          ]
        }
      ],
      "properties": {
        "proxyWidgets": [
          [
            "1",
            "prompt"
          ],
          [
            "1",
            "threshold"
          ],
          [
            "-1",
            "value"
          ],
          [
            "-1",
            "expand"
          ],
          [
            "-1",
            "switch"
          ],
          [
            "-1",
            "string_b"
          ],
          [
            "-1",
            "text"
          ],
          [
            "7",
            "ckpt_name"
          ],
          [
            "6",
            "steps"
          ],
          [
            "6",
            "denoise"
          ],
          [
            "40",
            "border_blending"
          ],
          [
            "114",
            "lora_01"
          ],
          [
            "114",
            "strength_01"
          ],
          [
            "3",
            "$$canvas-image-preview"
          ],
          [
            "41",
            "$$canvas-image-preview"
          ]
        ],
        "cnr_id": "comfy-core",
        "ver": "0.6.0"
      },
      "widgets_values": [
        null,
        null,
        1024,
        8,
        false,
        "hand closeup",
        "jpeg artifacts, worst quality, low quality, lowres, signature, watermark, artist_name, twitter_username, patreon_logo, letterboxed, censored, shiny skin, realistic, 3d, sweat"
      ]
    },
    {
      "id": 152,
      "type": "e3564efa-ed45-423e-a691-968585d03386",
      "pos": [
        479.9354037146925,
        860.2910431430441
      ],
      "size": [
        542.6090037089862,
        921.687338635596
      ],
      "flags": {},
      "order": 5,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 447
        },
        {
          "label": "segment resolution",
          "name": "value",
          "type": "INT",
          "widget": {
            "name": "value"
          },
          "link": null
        },
        {
          "label": "additional positive prompt",
          "name": "string_b",
          "type": "STRING",
          "widget": {
            "name": "string_b"
          },
          "link": null
        },
        {
          "label": "negative prompt",
          "name": "text",
          "type": "STRING",
          "widget": {
            "name": "text"
          },
          "link": null
        },
        {
          "label": "grow mask",
          "name": "expand",
          "type": "INT",
          "widget": {
            "name": "expand"
          },
          "link": null
        },
        {
          "label": "enable qwen vl",
          "name": "switch",
          "type": "BOOLEAN",
          "widget": {
            "name": "switch"
          },
          "link": null
        }
      ],
      "outputs": [
        {
          "label": "image",
          "name": "final_image",
          "type": "IMAGE",
          "links": [
            446
          ]
        }
      ],
      "properties": {
        "proxyWidgets": [
          [
            "1",
            "prompt"
          ],
          [
            "1",
            "threshold"
          ],
          [
            "-1",
            "value"
          ],
          [
            "-1",
            "expand"
          ],
          [
            "-1",
            "switch"
          ],
          [
            "-1",
            "string_b"
          ],
          [
            "-1",
            "text"
          ],
          [
            "7",
            "ckpt_name"
          ],
          [
            "6",
            "steps"
          ],
          [
            "6",
            "denoise"
          ],
          [
            "40",
            "border_blending"
          ],
          [
            "114",
            "lora_01"
          ],
          [
            "114",
            "strength_01"
          ],
          [
            "3",
            "$$canvas-image-preview"
          ],
          [
            "41",
            "$$canvas-image-preview"
          ]
        ],
        "cnr_id": "comfy-core",
        "ver": "0.6.0"
      },
      "widgets_values": [
        null,
        null,
        1280,
        8,
        true,
        "",
        "jpeg artifacts, worst quality, low quality, lowres, signature, watermark, artist_name, twitter_username, patreon_logo, letterboxed, censored, shiny skin, realistic, 3d, sweat, tears, crying"
      ]
    },
    {
      "id": 119,
      "type": "MarkdownNote",
      "pos": [
        -163.96175062710185,
        1386.609990338097
      ],
      "size": [
        597.8953850362379,
        313.88446489255534
      ],
      "flags": {},
      "order": 3,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "title": "Models",
      "properties": {},
      "widgets_values": [
        "## SAM3\n\nThe \"Refine by Segment\" subgraphs use [SAM3](https://github.com/wouterverweirder/comfyui_sam3) to select segments to further refine. You can define anything you want in the `prompt` section and it will serially process all generated segments.\n\nThe node tries to download the sam3 module if it doesn't exist, but it tries to download from [the official facebook release](https://huggingface.co/facebook/sam3/tree/main) which requires authentication.\n\nHowever, you can manually download the [checkpoint](https://huggingface.co/1038lab/sam3/resolve/main/sam3.pt) mirror from [1038 lab](https://huggingface.co/1038lab/sam3/tree/main) and place it in `models/sam3/sam3.pt`\n\n## Qwen-VL\n\nThe \"Refine by Segment\" subgraphs use [Qwen-VL](https://github.com/1038lab/ComfyUI-QwenVL) to determine the prompt to apply to the region. The default selected fp8 Qwen-VL-4B-Instruct potentially uses a lot of VRAM depending on the input resolution. You may want to select a smaller model like Qwen-VL-2B-Instruct 4-bit or bypass the node altogether. If you bypass the node, be sure to apply a manual positive prompt.\n\nAlso note that running the 8-bit quantization on ROCm requires [building bitsandbytes from source](https://huggingface.co/docs/bitsandbytes/main/en/installation?backend=AMD+ROCm#rocm-pip). It is recommended to do this since running the fp16 weights is much less efficient and can cause a memory leak.\n\nThe VL prompt is also geared toward describing people and ignoring the background. You may want to adjust the prompt or bypass the VL node if you are refining background elements."
      ],
      "color": "#432",
      "bgcolor": "#653"
    }
  ],
  "links": [
    [
      363,
      129,
      0,
      130,
      0,
      "IMAGE"
    ],
    [
      436,
      127,
      0,
      129,
      0,
      "IMAGE"
    ],
    [
      443,
      146,
      0,
      151,
      0,
      "IMAGE"
    ],
    [
      446,
      152,
      0,
      146,
      0,
      "IMAGE"
    ],
    [
      447,
      127,
      0,
      152,
      0,
      "IMAGE"
    ],
    [
      450,
      151,
      0,
      153,
      0,
      "IMAGE"
    ],
    [
      453,
      153,
      0,
      154,
      0,
      "IMAGE"
    ],
    [
      454,
      154,
      0,
      155,
      0,
      "IMAGE"
    ],
    [
      455,
      155,
      0,
      122,
      0,
      "IMAGE"
    ]
  ],
  "groups": [
    {
      "id": 1,
      "title": "Direct Preview Test Node",
      "bounding": [
        483.3616945952027,
        152.04355724966754,
        899.219599050968,
        614.222103058128
      ],
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 3,
      "title": "Standard Img2Img",
      "bounding": [
        1501.4362416047425,
        167.7962857388304,
        290.1690243753594,
        551.9597908939866
      ],
      "color": "#b06634",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 4,
      "title": "Load Image",
      "bounding": [
        -200.63851139397468,
        156.28746281064488,
        619.0654077457796,
        1174.5534150483043
      ],
      "color": "#3f789e",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 5,
      "title": "Refiner Presets",
      "bounding": [
        464.09633841160604,
        780.5754145554398,
        1679.4514905369185,
        1984.2211208247845
      ],
      "color": "#b58b2a",
      "font_size": 24,
      "flags": {}
    }
  ],
  "definitions": {
    "subgraphs": [
      {
        "id": "76b4a33c-03b5-4f17-91e7-d2020b656ac7",
        "version": 1,
        "state": {
          "lastGroupId": 2,
          "lastNodeId": 143,
          "lastLinkId": 417,
          "lastRerouteId": 0
        },
        "revision": 0,
        "config": {},
        "name": "img2img",
        "inputNode": {
          "id": -10,
          "bounding": [
            2003.1998353743397,
            163.2199553017079,
            120,
            60
          ]
        },
        "outputNode": {
          "id": -20,
          "bounding": [
            3841.4845860982487,
            163.2199553017079,
            120,
            60
          ]
        },
        "inputs": [
          {
            "id": "95501651-858b-4b93-a57b-386e3a2c5481",
            "name": "pixels",
            "type": "IMAGE",
            "linkIds": [
              417
            ],
            "pos": [
              2103.1998353743397,
              183.2199553017079
            ]
          }
        ],
        "outputs": [
          {
            "id": "70194e76-dbc7-4f62-b9fd-d661e6f9fb5a",
            "name": "IMAGE",
            "type": "IMAGE",
            "linkIds": [
              416
            ],
            "pos": [
              3861.4845860982487,
              183.2199553017079
            ]
          }
        ],
        "widgets": [],
        "nodes": [
          {
            "id": 140,
            "type": "CheckpointLoaderSimple",
            "pos": [
              2183.1998353743397,
              101.14411261369595
            ],
            "size": [
              270,
              98
            ],
            "flags": {},
            "order": 0,
            "mode": 4,
            "inputs": [],
            "outputs": [
              {
                "localized_name": "MODEL",
                "name": "MODEL",
                "type": "MODEL",
                "links": [
                  410
                ]
              },
              {
                "localized_name": "CLIP",
                "name": "CLIP",
                "type": "CLIP",
                "links": [
                  414
                ]
              },
              {
                "localized_name": "VAE",
                "name": "VAE",
                "type": "VAE",
                "links": null
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "CheckpointLoaderSimple"
            },
            "widgets_values": [
              "tsrmix_v50.safetensors"
            ]
          },
          {
            "id": 143,
            "type": "Lora Loader Stack (rgthree)",
            "pos": [
              2510.949690161818,
              100.41487934116567
            ],
            "size": [
              282.5333312988281,
              246
            ],
            "flags": {},
            "order": 2,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "model",
                "name": "model",
                "type": "MODEL",
                "link": 410
              },
              {
                "localized_name": "clip",
                "name": "clip",
                "type": "CLIP",
                "link": 414
              }
            ],
            "outputs": [
              {
                "localized_name": "MODEL",
                "name": "MODEL",
                "type": "MODEL",
                "links": [
                  413
                ]
              },
              {
                "localized_name": "CLIP",
                "name": "CLIP",
                "type": "CLIP",
                "links": [
                  412,
                  415
                ]
              }
            ],
            "properties": {
              "cnr_id": "rgthree-comfy",
              "ver": "1.0.2512092137",
              "Node name for S&R": "Lora Loader Stack (rgthree)"
            },
            "widgets_values": [
              "None",
              0.7,
              "None",
              1,
              "None",
              1,
              "None",
              1
            ]
          },
          {
            "id": 141,
            "type": "CLIPTextEncode",
            "pos": [
              2868.9813583168448,
              -101.35702944163423
            ],
            "size": [
              400,
              200
            ],
            "flags": {},
            "order": 3,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "clip",
                "name": "clip",
                "type": "CLIP",
                "link": 412
              }
            ],
            "outputs": [
              {
                "localized_name": "CONDITIONING",
                "name": "CONDITIONING",
                "type": "CONDITIONING",
                "links": [
                  405
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "CLIPTextEncode"
            },
            "widgets_values": [
              ""
            ],
            "color": "#232",
            "bgcolor": "#353"
          },
          {
            "id": 142,
            "type": "CLIPTextEncode",
            "pos": [
              2868.3667579650523,
              158.86040120135263
            ],
            "size": [
              400,
              200
            ],
            "flags": {},
            "order": 4,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "clip",
                "name": "clip",
                "type": "CLIP",
                "link": 415
              }
            ],
            "outputs": [
              {
                "localized_name": "CONDITIONING",
                "name": "CONDITIONING",
                "type": "CONDITIONING",
                "links": [
                  406
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "CLIPTextEncode"
            },
            "widgets_values": [
              "jpeg artifacts, worst quality, low quality, lowres, signature, watermark, artist_name, twitter_username, patreon_logo, letterboxed, censored, shiny skin, 3d, realistic"
            ],
            "color": "#322",
            "bgcolor": "#533"
          },
          {
            "id": 139,
            "type": "KSampler",
            "pos": [
              3338.283561094452,
              101.32662331957938
            ],
            "size": [
              270,
              262
            ],
            "flags": {},
            "order": 7,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "model",
                "name": "model",
                "type": "MODEL",
                "link": 413
              },
              {
                "localized_name": "positive",
                "name": "positive",
                "type": "CONDITIONING",
                "link": 405
              },
              {
                "localized_name": "negative",
                "name": "negative",
                "type": "CONDITIONING",
                "link": 406
              },
              {
                "localized_name": "latent_image",
                "name": "latent_image",
                "type": "LATENT",
                "link": 407
              }
            ],
            "outputs": [
              {
                "localized_name": "LATENT",
                "name": "LATENT",
                "type": "LATENT",
                "links": [
                  402
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "KSampler"
            },
            "widgets_values": [
              741093296844372,
              "randomize",
              32,
              6,
              "dpmpp_3m_sde",
              "karras",
              0.48
            ]
          },
          {
            "id": 136,
            "type": "VAELoader",
            "pos": [
              2816.6208502799686,
              439.79694004505006
            ],
            "size": [
              270,
              58
            ],
            "flags": {},
            "order": 1,
            "mode": 4,
            "inputs": [],
            "outputs": [
              {
                "localized_name": "VAE",
                "name": "VAE",
                "type": "VAE",
                "links": [
                  401,
                  403
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "VAELoader"
            },
            "widgets_values": [
              "sdxl_vae.safetensors"
            ]
          },
          {
            "id": 138,
            "type": "VAEDecode",
            "pos": [
              3641.4845860982487,
              355.3547699979512
            ],
            "size": [
              140,
              46
            ],
            "flags": {},
            "order": 6,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "samples",
                "name": "samples",
                "type": "LATENT",
                "link": 402
              },
              {
                "localized_name": "vae",
                "name": "vae",
                "type": "VAE",
                "link": 403
              }
            ],
            "outputs": [
              {
                "localized_name": "IMAGE",
                "name": "IMAGE",
                "type": "IMAGE",
                "links": [
                  416
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "VAEDecode"
            },
            "widgets_values": []
          },
          {
            "id": 137,
            "type": "VAEEncode",
            "pos": [
              3115.2755444717613,
              409.8107422605468
            ],
            "size": [
              140,
              46
            ],
            "flags": {},
            "order": 5,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "pixels",
                "name": "pixels",
                "type": "IMAGE",
                "link": 417
              },
              {
                "localized_name": "vae",
                "name": "vae",
                "type": "VAE",
                "link": 401
              }
            ],
            "outputs": [
              {
                "localized_name": "LATENT",
                "name": "LATENT",
                "type": "LATENT",
                "links": [
                  407
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "VAEEncode"
            },
            "widgets_values": []
          }
        ],
        "groups": [],
        "links": [
          {
            "id": 410,
            "origin_id": 140,
            "origin_slot": 0,
            "target_id": 143,
            "target_slot": 0,
            "type": "MODEL"
          },
          {
            "id": 414,
            "origin_id": 140,
            "origin_slot": 1,
            "target_id": 143,
            "target_slot": 1,
            "type": "CLIP"
          },
          {
            "id": 412,
            "origin_id": 143,
            "origin_slot": 1,
            "target_id": 141,
            "target_slot": 0,
            "type": "CLIP"
          },
          {
            "id": 415,
            "origin_id": 143,
            "origin_slot": 1,
            "target_id": 142,
            "target_slot": 0,
            "type": "CLIP"
          },
          {
            "id": 413,
            "origin_id": 143,
            "origin_slot": 0,
            "target_id": 139,
            "target_slot": 0,
            "type": "MODEL"
          },
          {
            "id": 405,
            "origin_id": 141,
            "origin_slot": 0,
            "target_id": 139,
            "target_slot": 1,
            "type": "CONDITIONING"
          },
          {
            "id": 406,
            "origin_id": 142,
            "origin_slot": 0,
            "target_id": 139,
            "target_slot": 2,
            "type": "CONDITIONING"
          },
          {
            "id": 407,
            "origin_id": 137,
            "origin_slot": 0,
            "target_id": 139,
            "target_slot": 3,
            "type": "LATENT"
          },
          {
            "id": 401,
            "origin_id": 136,
            "origin_slot": 0,
            "target_id": 137,
            "target_slot": 1,
            "type": "VAE"
          },
          {
            "id": 402,
            "origin_id": 139,
            "origin_slot": 0,
            "target_id": 138,
            "target_slot": 0,
            "type": "LATENT"
          },
          {
            "id": 403,
            "origin_id": 136,
            "origin_slot": 0,
            "target_id": 138,
            "target_slot": 1,
            "type": "VAE"
          },
          {
            "id": 416,
            "origin_id": 138,
            "origin_slot": 0,
            "target_id": -20,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 417,
            "origin_id": -10,
            "origin_slot": 0,
            "target_id": 137,
            "target_slot": 0,
            "type": "IMAGE"
          }
        ],
        "extra": {
          "workflowRendererVersion": "LG"
        }
      },
      {
        "id": "7730d3ee-133a-45e5-9f21-29f7393bcf50",
        "version": 1,
        "state": {
          "lastGroupId": 8,
          "lastNodeId": 116,
          "lastLinkId": 347,
          "lastRerouteId": 0
        },
        "revision": 0,
        "config": {},
        "name": "Refine by Segment",
        "inputNode": {
          "id": -10,
          "bounding": [
            806.7479357092758,
            831.269798557474,
            186.64999389648438,
            160
          ]
        },
        "outputNode": {
          "id": -20,
          "bounding": [
            5061.558941274414,
            825.0017868546877,
            120,
            60
          ]
        },
        "inputs": [
          {
            "id": "3ef84754-8546-41d6-9bb0-552b1e10fdd5",
            "name": "image",
            "type": "IMAGE",
            "linkIds": [
              1,
              314
            ],
            "localized_name": "image",
            "pos": [
              973.3979296057602,
              851.269798557474
            ]
          },
          {
            "id": "75063a78-ba10-4408-84b5-171cf651b250",
            "name": "value",
            "type": "INT",
            "linkIds": [
              326
            ],
            "label": "segment resolution",
            "pos": [
              973.3979296057602,
              871.269798557474
            ]
          },
          {
            "id": "1c186cb7-c1c9-482c-9931-35d921652a4b",
            "name": "string_b",
            "type": "STRING",
            "linkIds": [
              327
            ],
            "label": "additional positive prompt",
            "pos": [
              973.3979296057602,
              891.269798557474
            ]
          },
          {
            "id": "5b2914f2-e875-4a27-ba6d-bd3a38c8f4ea",
            "name": "text",
            "type": "STRING",
            "linkIds": [
              330
            ],
            "label": "negative prompt",
            "pos": [
              973.3979296057602,
              911.269798557474
            ]
          },
          {
            "id": "f7bb179f-6b28-490e-9a20-6ea22d5bb93f",
            "name": "expand",
            "type": "INT",
            "linkIds": [
              337
            ],
            "label": "grow mask",
            "pos": [
              973.3979296057602,
              931.269798557474
            ]
          },
          {
            "id": "e2f77901-757d-4d71-9910-d06d9206f8c6",
            "name": "switch",
            "type": "BOOLEAN",
            "linkIds": [
              347
            ],
            "label": "enable qwen vl",
            "pos": [
              973.3979296057602,
              951.269798557474
            ]
          }
        ],
        "outputs": [
          {
            "id": "c6709191-676d-4b98-b003-6c50837e5d55",
            "name": "final_image",
            "type": "IMAGE",
            "linkIds": [
              313
            ],
            "localized_name": "final_image",
            "label": "image",
            "pos": [
              5081.558941274414,
              845.0017868546877
            ]
          }
        ],
        "widgets": [],
        "nodes": [
          {
            "id": 3,
            "type": "PreviewImage",
            "pos": [
              997.3463044782231,
              1157.5671448147546
            ],
            "size": [
              367.94708621462905,
              269.2208997041041
            ],
            "flags": {},
            "order": 6,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "images",
                "name": "images",
                "type": "IMAGE",
                "link": 2
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PreviewImage"
            },
            "widgets_values": []
          },
          {
            "id": 22,
            "type": "MaskPreview",
            "pos": [
              1004.039409909705,
              1477.6642063668287
            ],
            "size": [
              361.83301408827265,
              260.8052249260261
            ],
            "flags": {},
            "order": 14,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "link": 169
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "MaskPreview"
            },
            "widgets_values": []
          },
          {
            "id": 42,
            "type": "MaskPreview",
            "pos": [
              1425.4641944387508,
              1188.2709087883934
            ],
            "size": [
              295.83024464075015,
              258
            ],
            "flags": {},
            "order": 21,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "link": 116
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "MaskPreview"
            },
            "widgets_values": []
          },
          {
            "id": 38,
            "type": "PreviewImage",
            "pos": [
              1740.4100611455576,
              1193.4345225910504
            ],
            "size": [
              327.95007004374975,
              246.0000000000001
            ],
            "flags": {},
            "order": 17,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "images",
                "name": "images",
                "type": "IMAGE",
                "link": 115
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PreviewImage"
            },
            "widgets_values": []
          },
          {
            "id": 76,
            "type": "GetMaskSizeAndCount",
            "pos": [
              1000.8446941455987,
              583.6148130450025
            ],
            "size": [
              191.26666870117188,
              86
            ],
            "flags": {},
            "order": 28,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "link": 203
              }
            ],
            "outputs": [
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "links": []
              },
              {
                "label": "2048 width",
                "localized_name": "width",
                "name": "width",
                "type": "INT",
                "links": []
              },
              {
                "label": "1512 height",
                "localized_name": "height",
                "name": "height",
                "type": "INT",
                "links": []
              },
              {
                "label": "2 count",
                "localized_name": "count",
                "name": "count",
                "type": "INT",
                "links": [
                  311
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui-kjnodes",
              "ver": "1.2.0",
              "Node name for S&R": "GetMaskSizeAndCount"
            },
            "widgets_values": []
          },
          {
            "id": 104,
            "type": "CyberEve_SingleImageLoopOpen",
            "pos": [
              1208.5598474594974,
              577.1900947310097
            ],
            "size": [
              279.09999694824216,
              138
            ],
            "flags": {},
            "order": 32,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "image",
                "name": "image",
                "type": "IMAGE",
                "link": 314
              },
              {
                "localized_name": "mask",
                "name": "mask",
                "shape": 7,
                "type": "MASK",
                "link": null
              },
              {
                "localized_name": "max_iterations",
                "name": "max_iterations",
                "type": "INT",
                "widget": {
                  "name": "max_iterations"
                },
                "link": 311
              }
            ],
            "outputs": [
              {
                "localized_name": "FLOW_CONTROL",
                "name": "FLOW_CONTROL",
                "type": "FLOW_CONTROL",
                "links": [
                  310
                ]
              },
              {
                "localized_name": "current_image",
                "name": "current_image",
                "type": "IMAGE",
                "links": [
                  320,
                  325
                ]
              },
              {
                "localized_name": "current_mask",
                "name": "current_mask",
                "type": "MASK",
                "links": [
                  309
                ]
              },
              {
                "localized_name": "max_iterations",
                "name": "max_iterations",
                "type": "INT",
                "links": [
                  308
                ]
              },
              {
                "localized_name": "iteration_count",
                "name": "iteration_count",
                "type": "INT",
                "links": [
                  315
                ]
              }
            ],
            "properties": {
              "cnr_id": "loop-image",
              "ver": "1.1.0",
              "Node name for S&R": "CyberEve_SingleImageLoopOpen"
            },
            "widgets_values": [
              5
            ]
          },
          {
            "id": 95,
            "type": "ImageCropByMask",
            "pos": [
              2189.6997636201972,
              497.913171284166
            ],
            "size": [
              203.9771500729156,
              58.75102239102739
            ],
            "flags": {},
            "order": 29,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "image",
                "name": "image",
                "type": "IMAGE",
                "link": 320
              },
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "link": 336
              }
            ],
            "outputs": [
              {
                "localized_name": "image",
                "name": "image",
                "type": "IMAGE",
                "links": [
                  276,
                  277
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui-kjnodes",
              "ver": "1.2.0",
              "Node name for S&R": "ImageCropByMask"
            },
            "widgets_values": []
          },
          {
            "id": 5,
            "type": "VAELoader",
            "pos": [
              2869.1376306815973,
              1277.7279025585558
            ],
            "size": [
              270,
              58
            ],
            "flags": {},
            "order": 0,
            "mode": 4,
            "inputs": [],
            "outputs": [
              {
                "localized_name": "VAE",
                "name": "VAE",
                "type": "VAE",
                "links": [
                  13,
                  73
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "VAELoader"
            },
            "widgets_values": [
              "sdxl_vae.safetensors"
            ]
          },
          {
            "id": 24,
            "type": "INPAINT_VAEEncodeInpaintConditioning",
            "pos": [
              3204.989081802467,
              862.0903634795793
            ],
            "size": [
              269.81667175292966,
              106
            ],
            "flags": {},
            "order": 15,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "positive",
                "name": "positive",
                "type": "CONDITIONING",
                "link": 66
              },
              {
                "localized_name": "negative",
                "name": "negative",
                "type": "CONDITIONING",
                "link": 67
              },
              {
                "localized_name": "vae",
                "name": "vae",
                "type": "VAE",
                "link": 73
              },
              {
                "localized_name": "pixels",
                "name": "pixels",
                "type": "IMAGE",
                "link": 150
              },
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "link": 157
              }
            ],
            "outputs": [
              {
                "localized_name": "positive",
                "name": "positive",
                "type": "CONDITIONING",
                "links": [
                  68
                ]
              },
              {
                "localized_name": "negative",
                "name": "negative",
                "type": "CONDITIONING",
                "links": [
                  69
                ]
              },
              {
                "localized_name": "latent_inpaint",
                "name": "latent_inpaint",
                "type": "LATENT",
                "links": []
              },
              {
                "localized_name": "latent_samples",
                "name": "latent_samples",
                "type": "LATENT",
                "links": [
                  139
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui-inpaint-nodes",
              "ver": "1.0.4",
              "Node name for S&R": "INPAINT_VAEEncodeInpaintConditioning"
            },
            "widgets_values": []
          },
          {
            "id": 105,
            "type": "CyberEve_SingleImageLoopClose",
            "pos": [
              4508.54964615577,
              833.819049291928
            ],
            "size": [
              414.55036922228226,
              159.02858278497422
            ],
            "flags": {},
            "order": 33,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "flow_control",
                "name": "flow_control",
                "type": "FLOW_CONTROL",
                "link": 310
              },
              {
                "localized_name": "current_image",
                "name": "current_image",
                "type": "IMAGE",
                "link": 312
              },
              {
                "localized_name": "max_iterations",
                "name": "max_iterations",
                "type": "INT",
                "link": 308
              },
              {
                "localized_name": "current_mask",
                "name": "current_mask",
                "shape": 7,
                "type": "MASK",
                "link": 309
              }
            ],
            "outputs": [
              {
                "localized_name": "final_image",
                "name": "final_image",
                "type": "IMAGE",
                "links": [
                  313
                ]
              },
              {
                "localized_name": "final_mask",
                "name": "final_mask",
                "type": "MASK",
                "links": null
              }
            ],
            "properties": {
              "cnr_id": "loop-image",
              "ver": "1.1.0",
              "Node name for S&R": "CyberEve_SingleImageLoopClose"
            },
            "widgets_values": []
          },
          {
            "id": 53,
            "type": "ImageScale",
            "pos": [
              4049.2486060270935,
              625.2359677646245
            ],
            "size": [
              270,
              130
            ],
            "flags": {},
            "order": 23,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "image",
                "name": "image",
                "type": "IMAGE",
                "link": 144
              },
              {
                "localized_name": "width",
                "name": "width",
                "type": "INT",
                "widget": {
                  "name": "width"
                },
                "link": 142
              },
              {
                "localized_name": "height",
                "name": "height",
                "type": "INT",
                "widget": {
                  "name": "height"
                },
                "link": 143
              }
            ],
            "outputs": [
              {
                "localized_name": "IMAGE",
                "name": "IMAGE",
                "type": "IMAGE",
                "links": []
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "ImageScale"
            },
            "widgets_values": [
              "lanczos",
              1024,
              1024,
              "disabled"
            ]
          },
          {
            "id": 99,
            "type": "PreviewImage",
            "pos": [
              4506.786838095131,
              1035.1818089468713
            ],
            "size": [
              468.3793066029657,
              370.1823772434195
            ],
            "flags": {},
            "order": 30,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "images",
                "name": "images",
                "type": "IMAGE",
                "link": 298
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PreviewImage"
            },
            "widgets_values": []
          },
          {
            "id": 29,
            "type": "MathExpression|pysssss",
            "pos": [
              2098.6591001675547,
              889.5500987243666
            ],
            "size": [
              406.17149483725734,
              128
            ],
            "flags": {},
            "order": 16,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "a",
                "name": "a",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": 146
              },
              {
                "localized_name": "b",
                "name": "b",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": 147
              },
              {
                "localized_name": "c",
                "name": "c",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": 306
              }
            ],
            "outputs": [
              {
                "localized_name": "INT",
                "name": "INT",
                "type": "INT",
                "links": null
              },
              {
                "localized_name": "FLOAT",
                "name": "FLOAT",
                "type": "FLOAT",
                "links": [
                  148,
                  159,
                  161
                ]
              }
            ],
            "title": "Calculate Scale Factor",
            "properties": {
              "cnr_id": "comfyui-custom-scripts",
              "ver": "1.2.5",
              "Node name for S&R": "MathExpression|pysssss"
            },
            "widgets_values": [
              "max(c/max(a,b),1)"
            ]
          },
          {
            "id": 11,
            "type": "VAEDecode",
            "pos": [
              3837.735251616675,
              857.2889946015689
            ],
            "size": [
              194.82939628141958,
              74.0522492602613
            ],
            "flags": {},
            "order": 10,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "samples",
                "name": "samples",
                "type": "LATENT",
                "link": 127
              },
              {
                "localized_name": "vae",
                "name": "vae",
                "type": "VAE",
                "link": 13
              }
            ],
            "outputs": [
              {
                "localized_name": "IMAGE",
                "name": "IMAGE",
                "type": "IMAGE",
                "links": [
                  122,
                  144,
                  333
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "VAEDecode"
            },
            "widgets_values": []
          },
          {
            "id": 102,
            "type": "PrimitiveInt",
            "pos": [
              1800.473328371718,
              868.2224292241445
            ],
            "size": [
              246.48537637062145,
              82
            ],
            "flags": {},
            "order": 31,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "value",
                "name": "value",
                "type": "INT",
                "widget": {
                  "name": "value"
                },
                "link": 326
              }
            ],
            "outputs": [
              {
                "localized_name": "INT",
                "name": "INT",
                "type": "INT",
                "links": [
                  306
                ]
              }
            ],
            "title": "Intermediate Upscale To",
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PrimitiveInt"
            },
            "widgets_values": [
              1024,
              "fixed"
            ]
          },
          {
            "id": 54,
            "type": "ImageScaleBy",
            "pos": [
              2537.0342543301995,
              866.6009321819179
            ],
            "size": [
              270,
              82
            ],
            "flags": {},
            "order": 24,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "image",
                "name": "image",
                "type": "IMAGE",
                "link": 149
              },
              {
                "localized_name": "scale_by",
                "name": "scale_by",
                "type": "FLOAT",
                "widget": {
                  "name": "scale_by"
                },
                "link": 148
              }
            ],
            "outputs": [
              {
                "localized_name": "IMAGE",
                "name": "IMAGE",
                "type": "IMAGE",
                "links": [
                  150
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "ImageScaleBy"
            },
            "widgets_values": [
              "lanczos",
              1
            ]
          },
          {
            "id": 41,
            "type": "PreviewImage",
            "pos": [
              3829.3457930206123,
              1032.6149889451217
            ],
            "size": [
              324.9284450825385,
              355.52444631765525
            ],
            "flags": {},
            "order": 20,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "images",
                "name": "images",
                "type": "IMAGE",
                "link": 122
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PreviewImage"
            },
            "widgets_values": []
          },
          {
            "id": 40,
            "type": "BatchUncropAdvanced",
            "pos": [
              4161.771771080975,
              841.2989056169803
            ],
            "size": [
              285.36667251586914,
              230
            ],
            "flags": {},
            "order": 19,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "original_images",
                "name": "original_images",
                "type": "IMAGE",
                "link": 108
              },
              {
                "localized_name": "cropped_images",
                "name": "cropped_images",
                "type": "IMAGE",
                "link": 333
              },
              {
                "localized_name": "cropped_masks",
                "name": "cropped_masks",
                "type": "MASK",
                "link": 111
              },
              {
                "localized_name": "combined_crop_mask",
                "name": "combined_crop_mask",
                "type": "MASK",
                "link": 112
              },
              {
                "localized_name": "bboxes",
                "name": "bboxes",
                "type": "BBOX",
                "link": 113
              },
              {
                "localized_name": "combined_bounding_box",
                "name": "combined_bounding_box",
                "shape": 7,
                "type": "BBOX",
                "link": 114
              }
            ],
            "outputs": [
              {
                "localized_name": "IMAGE",
                "name": "IMAGE",
                "type": "IMAGE",
                "links": [
                  298,
                  312
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui-kjnodes",
              "ver": "1.2.0",
              "Node name for S&R": "BatchUncropAdvanced"
            },
            "widgets_values": [
              0.05,
              1,
              true,
              false
            ]
          },
          {
            "id": 59,
            "type": "ResizeMask",
            "pos": [
              2572.2849437050836,
              1081.161678422197
            ],
            "size": [
              270,
              194
            ],
            "flags": {},
            "order": 25,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "link": 156
              },
              {
                "localized_name": "width",
                "name": "width",
                "type": "INT",
                "widget": {
                  "name": "width"
                },
                "link": 164
              },
              {
                "localized_name": "height",
                "name": "height",
                "type": "INT",
                "widget": {
                  "name": "height"
                },
                "link": 163
              }
            ],
            "outputs": [
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "links": [
                  157
                ]
              },
              {
                "localized_name": "width",
                "name": "width",
                "type": "INT",
                "links": null
              },
              {
                "localized_name": "height",
                "name": "height",
                "type": "INT",
                "links": null
              }
            ],
            "properties": {
              "cnr_id": "comfyui-kjnodes",
              "ver": "1.2.0",
              "Node name for S&R": "ResizeMask"
            },
            "widgets_values": [
              512,
              512,
              false,
              "lanczos",
              "disabled"
            ]
          },
          {
            "id": 50,
            "type": "GetImageSize",
            "pos": [
              1813.6251272404902,
              998.6205974127038
            ],
            "size": [
              210,
              136
            ],
            "flags": {},
            "order": 22,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "image",
                "name": "image",
                "type": "IMAGE",
                "link": 141
              }
            ],
            "outputs": [
              {
                "localized_name": "width",
                "name": "width",
                "type": "INT",
                "links": [
                  142,
                  146,
                  158
                ]
              },
              {
                "localized_name": "height",
                "name": "height",
                "type": "INT",
                "links": [
                  143,
                  147,
                  162
                ]
              },
              {
                "localized_name": "batch_size",
                "name": "batch_size",
                "type": "INT",
                "links": null
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "GetImageSize"
            },
            "widgets_values": []
          },
          {
            "id": 60,
            "type": "MathExpression|pysssss",
            "pos": [
              2072.6107335825427,
              1067.527914313313
            ],
            "size": [
              210,
              128
            ],
            "flags": {},
            "order": 26,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "a",
                "name": "a",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": 158
              },
              {
                "localized_name": "b",
                "name": "b",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": 159
              },
              {
                "localized_name": "c",
                "name": "c",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": null
              }
            ],
            "outputs": [
              {
                "localized_name": "INT",
                "name": "INT",
                "type": "INT",
                "links": [
                  164
                ]
              },
              {
                "localized_name": "FLOAT",
                "name": "FLOAT",
                "type": "FLOAT",
                "links": null
              }
            ],
            "title": "Calculate Mask Width",
            "properties": {
              "cnr_id": "comfyui-custom-scripts",
              "ver": "1.2.5",
              "Node name for S&R": "MathExpression|pysssss"
            },
            "widgets_values": [
              "a*b"
            ]
          },
          {
            "id": 61,
            "type": "MathExpression|pysssss",
            "pos": [
              2303.8002577595803,
              1066.734955644435
            ],
            "size": [
              210,
              128
            ],
            "flags": {},
            "order": 27,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "a",
                "name": "a",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": 161
              },
              {
                "localized_name": "b",
                "name": "b",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": 162
              },
              {
                "localized_name": "c",
                "name": "c",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": null
              }
            ],
            "outputs": [
              {
                "localized_name": "INT",
                "name": "INT",
                "type": "INT",
                "links": [
                  163
                ]
              },
              {
                "localized_name": "FLOAT",
                "name": "FLOAT",
                "type": "FLOAT",
                "links": null
              }
            ],
            "title": "Calculate Mask Height",
            "properties": {
              "cnr_id": "comfyui-custom-scripts",
              "ver": "1.2.5",
              "Node name for S&R": "MathExpression|pysssss"
            },
            "widgets_values": [
              "a*b"
            ]
          },
          {
            "id": 39,
            "type": "BatchCropFromMaskAdvanced",
            "pos": [
              1425.2952421529274,
              858.6987782381365
            ],
            "size": [
              335.73333740234375,
              242
            ],
            "flags": {},
            "order": 18,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "original_images",
                "name": "original_images",
                "type": "IMAGE",
                "link": 325
              },
              {
                "localized_name": "masks",
                "name": "masks",
                "type": "MASK",
                "link": 338
              }
            ],
            "outputs": [
              {
                "localized_name": "original_images",
                "name": "original_images",
                "type": "IMAGE",
                "links": [
                  108
                ]
              },
              {
                "localized_name": "cropped_images",
                "name": "cropped_images",
                "type": "IMAGE",
                "links": []
              },
              {
                "localized_name": "cropped_masks",
                "name": "cropped_masks",
                "type": "MASK",
                "links": [
                  111
                ]
              },
              {
                "localized_name": "combined_crop_image",
                "name": "combined_crop_image",
                "type": "IMAGE",
                "links": [
                  115,
                  141,
                  149
                ]
              },
              {
                "localized_name": "combined_crop_masks",
                "name": "combined_crop_masks",
                "type": "MASK",
                "links": [
                  112,
                  116,
                  156
                ]
              },
              {
                "localized_name": "bboxes",
                "name": "bboxes",
                "type": "BBOX",
                "links": [
                  113
                ]
              },
              {
                "localized_name": "combined_bounding_box",
                "name": "combined_bounding_box",
                "type": "BBOX",
                "links": [
                  114
                ]
              },
              {
                "localized_name": "bbox_width",
                "name": "bbox_width",
                "type": "INT",
                "links": null
              },
              {
                "localized_name": "bbox_height",
                "name": "bbox_height",
                "type": "INT",
                "links": null
              }
            ],
            "properties": {
              "cnr_id": "comfyui-kjnodes",
              "ver": "1.2.0",
              "Node name for S&R": "BatchCropFromMaskAdvanced"
            },
            "widgets_values": [
              1,
              0.7
            ]
          },
          {
            "id": 107,
            "type": "GetImageRangeFromBatch",
            "pos": [
              1501.5484993150317,
              617.5358016059444
            ],
            "size": [
              316.5806700303996,
              107.10040895641089
            ],
            "flags": {},
            "order": 34,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "images",
                "name": "images",
                "shape": 7,
                "type": "IMAGE",
                "link": null
              },
              {
                "localized_name": "masks",
                "name": "masks",
                "shape": 7,
                "type": "MASK",
                "link": 322
              },
              {
                "localized_name": "start_index",
                "name": "start_index",
                "type": "INT",
                "widget": {
                  "name": "start_index"
                },
                "link": 315
              }
            ],
            "outputs": [
              {
                "localized_name": "IMAGE",
                "name": "IMAGE",
                "type": "IMAGE",
                "links": null
              },
              {
                "localized_name": "MASK",
                "name": "MASK",
                "type": "MASK",
                "links": [
                  335
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui-kjnodes",
              "ver": "1.2.0",
              "Node name for S&R": "GetImageRangeFromBatch"
            },
            "widgets_values": [
              0,
              1
            ]
          },
          {
            "id": 112,
            "type": "GrowMask",
            "pos": [
              1832.6544005369121,
              627.4390507940712
            ],
            "size": [
              270,
              82
            ],
            "flags": {},
            "order": 36,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "link": 335
              },
              {
                "localized_name": "expand",
                "name": "expand",
                "type": "INT",
                "widget": {
                  "name": "expand"
                },
                "link": 337
              }
            ],
            "outputs": [
              {
                "localized_name": "MASK",
                "name": "MASK",
                "type": "MASK",
                "links": [
                  336,
                  338
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "GrowMask"
            },
            "widgets_values": [
              8,
              true
            ]
          },
          {
            "id": 6,
            "type": "KSampler",
            "pos": [
              3523.9707642471685,
              853.891502202401
            ],
            "size": [
              270,
              262
            ],
            "flags": {},
            "order": 7,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "model",
                "name": "model",
                "type": "MODEL",
                "link": 340
              },
              {
                "localized_name": "positive",
                "name": "positive",
                "type": "CONDITIONING",
                "link": 68
              },
              {
                "localized_name": "negative",
                "name": "negative",
                "type": "CONDITIONING",
                "link": 69
              },
              {
                "localized_name": "latent_image",
                "name": "latent_image",
                "type": "LATENT",
                "link": 139
              }
            ],
            "outputs": [
              {
                "localized_name": "LATENT",
                "name": "LATENT",
                "type": "LATENT",
                "links": [
                  127
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "KSampler"
            },
            "widgets_values": [
              293142761728970,
              "randomize",
              32,
              4,
              "dpmpp_3m_sde",
              "karras",
              0.4
            ]
          },
          {
            "id": 7,
            "type": "CheckpointLoaderSimple",
            "pos": [
              2860.415299084029,
              1136.2632126563851
            ],
            "size": [
              270,
              98
            ],
            "flags": {},
            "order": 1,
            "mode": 4,
            "inputs": [],
            "outputs": [
              {
                "localized_name": "MODEL",
                "name": "MODEL",
                "type": "MODEL",
                "links": [
                  339
                ]
              },
              {
                "localized_name": "CLIP",
                "name": "CLIP",
                "type": "CLIP",
                "links": [
                  343
                ]
              },
              {
                "localized_name": "VAE",
                "name": "VAE",
                "type": "VAE",
                "links": null
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "CheckpointLoaderSimple"
            },
            "widgets_values": [
              "tsrmix_v50.safetensors"
            ]
          },
          {
            "id": 114,
            "type": "Lora Loader Stack (rgthree)",
            "pos": [
              3189.15151072557,
              1027.9829828492443
            ],
            "size": [
              282.5333312988281,
              246
            ],
            "flags": {},
            "order": 4,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "model",
                "name": "model",
                "type": "MODEL",
                "link": 339
              },
              {
                "localized_name": "clip",
                "name": "clip",
                "type": "CLIP",
                "link": 343
              }
            ],
            "outputs": [
              {
                "localized_name": "MODEL",
                "name": "MODEL",
                "type": "MODEL",
                "links": [
                  340
                ]
              },
              {
                "localized_name": "CLIP",
                "name": "CLIP",
                "type": "CLIP",
                "links": [
                  341,
                  342
                ]
              }
            ],
            "properties": {
              "cnr_id": "rgthree-comfy",
              "ver": "1.0.2512092137",
              "Node name for S&R": "Lora Loader Stack (rgthree)"
            },
            "widgets_values": [
              "None",
              0.7,
              "None",
              1,
              "None",
              1,
              "None",
              1
            ]
          },
          {
            "id": 1,
            "type": "SAM3Segmentation",
            "pos": [
              1009.1766858085575,
              849.1217333818615
            ],
            "size": [
              270,
              262
            ],
            "flags": {},
            "order": 5,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "image",
                "name": "image",
                "type": "IMAGE",
                "link": 1
              }
            ],
            "outputs": [
              {
                "localized_name": "segmented_image",
                "name": "segmented_image",
                "type": "IMAGE",
                "links": [
                  2
                ]
              },
              {
                "localized_name": "masks",
                "name": "masks",
                "type": "MASK",
                "links": [
                  169,
                  203,
                  322
                ]
              },
              {
                "localized_name": "mask_combined",
                "name": "mask_combined",
                "type": "MASK",
                "links": []
              },
              {
                "localized_name": "segs",
                "name": "segs",
                "type": "SEGS",
                "links": null
              }
            ],
            "properties": {
              "cnr_id": "comfyui_sam3",
              "ver": "0.2.0",
              "Node name for S&R": "SAM3Segmentation"
            },
            "widgets_values": [
              "hand",
              0.7,
              50,
              50,
              false,
              false,
              ""
            ]
          },
          {
            "id": 20,
            "type": "AILab_QwenVL",
            "pos": [
              2432.2487487972357,
              204.19969826238048
            ],
            "size": [
              382.07647704408555,
              414.29436879390346
            ],
            "flags": {},
            "order": 12,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "image",
                "name": "image",
                "shape": 7,
                "type": "IMAGE",
                "link": 277
              },
              {
                "localized_name": "video",
                "name": "video",
                "shape": 7,
                "type": "IMAGE",
                "link": null
              }
            ],
            "outputs": [
              {
                "localized_name": "RESPONSE",
                "name": "RESPONSE",
                "type": "STRING",
                "links": [
                  39,
                  345
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui-qwenvl",
              "ver": "1.1.0",
              "Node name for S&R": "AILab_QwenVL"
            },
            "widgets_values": [
              "Qwen3-VL-4B-Instruct",
              "8-bit (Balanced)",
              "auto",
              " Simple Description",
              "Write a brief description of the person in the image. Keep it concise. Do not use full sentences, output only a comma delimited list of attributes and attire. Keep the comma delimited list limited to adjectives, nouns, and verbs related to visible attributes like clothing, eye color, skin color, hair color, accessories, facial expressions, etc.\nOnly describe the character in the image, not the setting or background. Do not mention things that are not visible. Rather than saying \"no visible eyes\" or \"no accessories\", omit the detail altogether, only report seen attributes.\nExample:\n\"Red hair, green eyes, smiling, earrings, freckles, black dress, white shoes, bell choker, exposed breasts, pink nipples\"",
              512,
              true,
              3611085873,
              "randomize"
            ],
            "color": "#28403f",
            "bgcolor": "#374539"
          },
          {
            "id": 9,
            "type": "CLIPTextEncode",
            "pos": [
              3350.588827496829,
              409.85080610587534
            ],
            "size": [
              417.5616353840064,
              201.66844311418998
            ],
            "flags": {},
            "order": 8,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "clip",
                "name": "clip",
                "type": "CLIP",
                "link": 342
              },
              {
                "localized_name": "text",
                "name": "text",
                "type": "STRING",
                "widget": {
                  "name": "text"
                },
                "link": 329
              }
            ],
            "outputs": [
              {
                "localized_name": "CONDITIONING",
                "name": "CONDITIONING",
                "type": "CONDITIONING",
                "links": [
                  66
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "CLIPTextEncode"
            },
            "widgets_values": [
              "1girl, green skin, white hair, horns, goblin, gobbo, black gloves"
            ],
            "color": "#232",
            "bgcolor": "#353"
          },
          {
            "id": 10,
            "type": "CLIPTextEncode",
            "pos": [
              2928.7649709235066,
              439.9344677391408
            ],
            "size": [
              407.26808276288466,
              181.17485421542813
            ],
            "flags": {},
            "order": 9,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "clip",
                "name": "clip",
                "type": "CLIP",
                "link": 341
              },
              {
                "localized_name": "text",
                "name": "text",
                "type": "STRING",
                "widget": {
                  "name": "text"
                },
                "link": 330
              }
            ],
            "outputs": [
              {
                "localized_name": "CONDITIONING",
                "name": "CONDITIONING",
                "type": "CONDITIONING",
                "links": [
                  67
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "CLIPTextEncode"
            },
            "widgets_values": [
              "jpeg artifacts, worst quality, low quality, lowres, signature, watermark, artist_name, twitter_username, patreon_logo, letterboxed, censored, shiny skin, realistic, 3d, sweat"
            ],
            "color": "#322",
            "bgcolor": "#533"
          },
          {
            "id": 109,
            "type": "StringConcatenate",
            "pos": [
              3057.4889611511376,
              200.16069497829326
            ],
            "size": [
              400,
              200
            ],
            "flags": {},
            "order": 35,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "string_a",
                "name": "string_a",
                "type": "STRING",
                "widget": {
                  "name": "string_a"
                },
                "link": 346
              },
              {
                "label": "Additional Positive Prompt",
                "localized_name": "string_b",
                "name": "string_b",
                "type": "STRING",
                "widget": {
                  "name": "string_b"
                },
                "link": 327
              }
            ],
            "outputs": [
              {
                "localized_name": "STRING",
                "name": "STRING",
                "type": "STRING",
                "links": [
                  329
                ]
              }
            ],
            "title": "Positive Prompt",
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "StringConcatenate"
            },
            "widgets_values": [
              "",
              "hand closeup",
              ","
            ],
            "color": "#232",
            "bgcolor": "#353"
          },
          {
            "id": 116,
            "type": "PrimitiveString",
            "pos": [
              2835.716187737121,
              103.40548191767832
            ],
            "size": [
              210,
              58
            ],
            "flags": {},
            "order": 3,
            "mode": 4,
            "inputs": [],
            "outputs": [
              {
                "localized_name": "STRING",
                "name": "STRING",
                "type": "STRING",
                "links": [
                  344
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PrimitiveString"
            },
            "widgets_values": [
              ""
            ]
          },
          {
            "id": 21,
            "type": "PreviewAny",
            "pos": [
              2822.811123892673,
              -86.18859326580142
            ],
            "size": [
              455.4260060591878,
              152.5336774020432
            ],
            "flags": {},
            "order": 13,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "source",
                "name": "source",
                "type": "*",
                "link": 39
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PreviewAny"
            },
            "widgets_values": [
              null,
              null,
              null
            ]
          },
          {
            "id": 19,
            "type": "PreviewImage",
            "pos": [
              2421.5179366542698,
              -99.34277706968813
            ],
            "size": [
              381.4168025949707,
              258.2870322428656
            ],
            "flags": {},
            "order": 11,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "images",
                "name": "images",
                "type": "IMAGE",
                "link": 276
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PreviewImage"
            },
            "widgets_values": []
          },
          {
            "id": 115,
            "type": "LazySwitchKJ",
            "pos": [
              2834.405188317967,
              221.39542964117405
            ],
            "size": [
              210,
              83.2439976765998
            ],
            "flags": {},
            "order": 2,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "on_false",
                "name": "on_false",
                "type": "*",
                "link": 344
              },
              {
                "localized_name": "on_true",
                "name": "on_true",
                "type": "*",
                "link": 345
              },
              {
                "localized_name": "switch",
                "name": "switch",
                "type": "BOOLEAN",
                "widget": {
                  "name": "switch"
                },
                "link": 347
              }
            ],
            "outputs": [
              {
                "localized_name": "*",
                "name": "*",
                "type": "*",
                "links": [
                  346
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui-kjnodes",
              "ver": "1.2.0",
              "Node name for S&R": "LazySwitchKJ"
            },
            "widgets_values": [
              false
            ]
          }
        ],
        "groups": [
          {
            "id": 3,
            "title": "1) Get SAM3 Segments",
            "bounding": [
              986.7479357092758,
              773.1496228998027,
              402.288530583436,
              988.8928760324412
            ],
            "color": "#3f789e",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 1,
            "title": "4) Crop and Upscale Segment",
            "bounding": [
              1412.8943023245006,
              776.7753639514098,
              1418.360410864272,
              675.2623839376581
            ],
            "color": "#88A",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 7,
            "title": "2) Loop Images (Open Loop)",
            "bounding": [
              984.6107628267731,
              499.2371067929187,
              1153.3501110261582,
              261.389879633593
            ],
            "color": "#a1309b",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 4,
            "title": "3) Get Prompt for Current Image",
            "bounding": [
              2155.4793559692475,
              -170.10459450129503,
              1622.051559072614,
              798.6970142887212
            ],
            "color": "#8A8",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 5,
            "title": "5) Load Model",
            "bounding": [
              2846.1223201402927,
              1054.2662632546153,
              323.8824939010076,
              317.4622899881054
            ],
            "color": "#3f789e",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 6,
            "title": "6) Inpaint Upscaled Segment",
            "bounding": [
              3182.579888835363,
              759.3431193111942,
              616.8882374244286,
              364.73032999164457
            ],
            "color": "#b58b2a",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 2,
            "title": "7) Downscale and Uncrop",
            "bounding": [
              3815.6957739658505,
              762.4703075559535,
              656.2174961131946,
              641.6682429453456
            ],
            "color": "#88A",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 8,
            "title": "8) Loop Images (Close Loop)",
            "bounding": [
              4494.11310458446,
              753.7780914684754,
              513.7138483927392,
              664.8516158462642
            ],
            "color": "#a1309b",
            "font_size": 24,
            "flags": {}
          }
        ],
        "links": [
          {
            "id": 2,
            "origin_id": 1,
            "origin_slot": 0,
            "target_id": 3,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 169,
            "origin_id": 1,
            "origin_slot": 1,
            "target_id": 22,
            "target_slot": 0,
            "type": "MASK"
          },
          {
            "id": 325,
            "origin_id": 104,
            "origin_slot": 1,
            "target_id": 39,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 116,
            "origin_id": 39,
            "origin_slot": 4,
            "target_id": 42,
            "target_slot": 0,
            "type": "MASK"
          },
          {
            "id": 115,
            "origin_id": 39,
            "origin_slot": 3,
            "target_id": 38,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 141,
            "origin_id": 39,
            "origin_slot": 3,
            "target_id": 50,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 146,
            "origin_id": 50,
            "origin_slot": 0,
            "target_id": 29,
            "target_slot": 0,
            "type": "INT"
          },
          {
            "id": 147,
            "origin_id": 50,
            "origin_slot": 1,
            "target_id": 29,
            "target_slot": 1,
            "type": "INT"
          },
          {
            "id": 306,
            "origin_id": 102,
            "origin_slot": 0,
            "target_id": 29,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 158,
            "origin_id": 50,
            "origin_slot": 0,
            "target_id": 60,
            "target_slot": 0,
            "type": "INT"
          },
          {
            "id": 159,
            "origin_id": 29,
            "origin_slot": 1,
            "target_id": 60,
            "target_slot": 1,
            "type": "FLOAT"
          },
          {
            "id": 161,
            "origin_id": 29,
            "origin_slot": 1,
            "target_id": 61,
            "target_slot": 0,
            "type": "FLOAT"
          },
          {
            "id": 162,
            "origin_id": 50,
            "origin_slot": 1,
            "target_id": 61,
            "target_slot": 1,
            "type": "INT"
          },
          {
            "id": 149,
            "origin_id": 39,
            "origin_slot": 3,
            "target_id": 54,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 148,
            "origin_id": 29,
            "origin_slot": 1,
            "target_id": 54,
            "target_slot": 1,
            "type": "FLOAT"
          },
          {
            "id": 156,
            "origin_id": 39,
            "origin_slot": 4,
            "target_id": 59,
            "target_slot": 0,
            "type": "MASK"
          },
          {
            "id": 164,
            "origin_id": 60,
            "origin_slot": 0,
            "target_id": 59,
            "target_slot": 1,
            "type": "INT"
          },
          {
            "id": 163,
            "origin_id": 61,
            "origin_slot": 0,
            "target_id": 59,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 203,
            "origin_id": 1,
            "origin_slot": 1,
            "target_id": 76,
            "target_slot": 0,
            "type": "MASK"
          },
          {
            "id": 311,
            "origin_id": 76,
            "origin_slot": 3,
            "target_id": 104,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 322,
            "origin_id": 1,
            "origin_slot": 1,
            "target_id": 107,
            "target_slot": 1,
            "type": "MASK"
          },
          {
            "id": 315,
            "origin_id": 104,
            "origin_slot": 4,
            "target_id": 107,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 276,
            "origin_id": 95,
            "origin_slot": 0,
            "target_id": 19,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 39,
            "origin_id": 20,
            "origin_slot": 0,
            "target_id": 21,
            "target_slot": 0,
            "type": "STRING"
          },
          {
            "id": 277,
            "origin_id": 95,
            "origin_slot": 0,
            "target_id": 20,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 320,
            "origin_id": 104,
            "origin_slot": 1,
            "target_id": 95,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 66,
            "origin_id": 9,
            "origin_slot": 0,
            "target_id": 24,
            "target_slot": 0,
            "type": "CONDITIONING"
          },
          {
            "id": 67,
            "origin_id": 10,
            "origin_slot": 0,
            "target_id": 24,
            "target_slot": 1,
            "type": "CONDITIONING"
          },
          {
            "id": 73,
            "origin_id": 5,
            "origin_slot": 0,
            "target_id": 24,
            "target_slot": 2,
            "type": "VAE"
          },
          {
            "id": 150,
            "origin_id": 54,
            "origin_slot": 0,
            "target_id": 24,
            "target_slot": 3,
            "type": "IMAGE"
          },
          {
            "id": 157,
            "origin_id": 59,
            "origin_slot": 0,
            "target_id": 24,
            "target_slot": 4,
            "type": "MASK"
          },
          {
            "id": 68,
            "origin_id": 24,
            "origin_slot": 0,
            "target_id": 6,
            "target_slot": 1,
            "type": "CONDITIONING"
          },
          {
            "id": 69,
            "origin_id": 24,
            "origin_slot": 1,
            "target_id": 6,
            "target_slot": 2,
            "type": "CONDITIONING"
          },
          {
            "id": 139,
            "origin_id": 24,
            "origin_slot": 3,
            "target_id": 6,
            "target_slot": 3,
            "type": "LATENT"
          },
          {
            "id": 127,
            "origin_id": 6,
            "origin_slot": 0,
            "target_id": 11,
            "target_slot": 0,
            "type": "LATENT"
          },
          {
            "id": 13,
            "origin_id": 5,
            "origin_slot": 0,
            "target_id": 11,
            "target_slot": 1,
            "type": "VAE"
          },
          {
            "id": 144,
            "origin_id": 11,
            "origin_slot": 0,
            "target_id": 53,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 142,
            "origin_id": 50,
            "origin_slot": 0,
            "target_id": 53,
            "target_slot": 1,
            "type": "INT"
          },
          {
            "id": 143,
            "origin_id": 50,
            "origin_slot": 1,
            "target_id": 53,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 122,
            "origin_id": 11,
            "origin_slot": 0,
            "target_id": 41,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 108,
            "origin_id": 39,
            "origin_slot": 0,
            "target_id": 40,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 111,
            "origin_id": 39,
            "origin_slot": 2,
            "target_id": 40,
            "target_slot": 2,
            "type": "MASK"
          },
          {
            "id": 112,
            "origin_id": 39,
            "origin_slot": 4,
            "target_id": 40,
            "target_slot": 3,
            "type": "MASK"
          },
          {
            "id": 113,
            "origin_id": 39,
            "origin_slot": 5,
            "target_id": 40,
            "target_slot": 4,
            "type": "BBOX"
          },
          {
            "id": 114,
            "origin_id": 39,
            "origin_slot": 6,
            "target_id": 40,
            "target_slot": 5,
            "type": "BBOX"
          },
          {
            "id": 310,
            "origin_id": 104,
            "origin_slot": 0,
            "target_id": 105,
            "target_slot": 0,
            "type": "FLOW_CONTROL"
          },
          {
            "id": 312,
            "origin_id": 40,
            "origin_slot": 0,
            "target_id": 105,
            "target_slot": 1,
            "type": "IMAGE"
          },
          {
            "id": 308,
            "origin_id": 104,
            "origin_slot": 3,
            "target_id": 105,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 309,
            "origin_id": 104,
            "origin_slot": 2,
            "target_id": 105,
            "target_slot": 3,
            "type": "MASK"
          },
          {
            "id": 298,
            "origin_id": 40,
            "origin_slot": 0,
            "target_id": 99,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 1,
            "origin_id": -10,
            "origin_slot": 0,
            "target_id": 1,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 314,
            "origin_id": -10,
            "origin_slot": 0,
            "target_id": 104,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 313,
            "origin_id": 105,
            "origin_slot": 0,
            "target_id": -20,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 326,
            "origin_id": -10,
            "origin_slot": 1,
            "target_id": 102,
            "target_slot": 0,
            "type": "INT"
          },
          {
            "id": 327,
            "origin_id": -10,
            "origin_slot": 2,
            "target_id": 109,
            "target_slot": 1,
            "type": "STRING"
          },
          {
            "id": 329,
            "origin_id": 109,
            "origin_slot": 0,
            "target_id": 9,
            "target_slot": 1,
            "type": "STRING"
          },
          {
            "id": 330,
            "origin_id": -10,
            "origin_slot": 3,
            "target_id": 10,
            "target_slot": 1,
            "type": "STRING"
          },
          {
            "id": 333,
            "origin_id": 11,
            "origin_slot": 0,
            "target_id": 40,
            "target_slot": 1,
            "type": "IMAGE"
          },
          {
            "id": 335,
            "origin_id": 107,
            "origin_slot": 1,
            "target_id": 112,
            "target_slot": 0,
            "type": "MASK"
          },
          {
            "id": 336,
            "origin_id": 112,
            "origin_slot": 0,
            "target_id": 95,
            "target_slot": 1,
            "type": "MASK"
          },
          {
            "id": 337,
            "origin_id": -10,
            "origin_slot": 4,
            "target_id": 112,
            "target_slot": 1,
            "type": "INT"
          },
          {
            "id": 338,
            "origin_id": 112,
            "origin_slot": 0,
            "target_id": 39,
            "target_slot": 1,
            "type": "MASK"
          },
          {
            "id": 339,
            "origin_id": 7,
            "origin_slot": 0,
            "target_id": 114,
            "target_slot": 0,
            "type": "MODEL"
          },
          {
            "id": 340,
            "origin_id": 114,
            "origin_slot": 0,
            "target_id": 6,
            "target_slot": 0,
            "type": "MODEL"
          },
          {
            "id": 341,
            "origin_id": 114,
            "origin_slot": 1,
            "target_id": 10,
            "target_slot": 0,
            "type": "CLIP"
          },
          {
            "id": 342,
            "origin_id": 114,
            "origin_slot": 1,
            "target_id": 9,
            "target_slot": 0,
            "type": "CLIP"
          },
          {
            "id": 343,
            "origin_id": 7,
            "origin_slot": 1,
            "target_id": 114,
            "target_slot": 1,
            "type": "CLIP"
          },
          {
            "id": 344,
            "origin_id": 116,
            "origin_slot": 0,
            "target_id": 115,
            "target_slot": 0,
            "type": "STRING"
          },
          {
            "id": 345,
            "origin_id": 20,
            "origin_slot": 0,
            "target_id": 115,
            "target_slot": 1,
            "type": "STRING"
          },
          {
            "id": 346,
            "origin_id": 115,
            "origin_slot": 0,
            "target_id": 109,
            "target_slot": 0,
            "type": "STRING"
          },
          {
            "id": 347,
            "origin_id": -10,
            "origin_slot": 5,
            "target_id": 115,
            "target_slot": 2,
            "type": "BOOLEAN"
          }
        ],
        "extra": {
          "workflowRendererVersion": "LG"
        }
      },
      {
        "id": "bbbe276c-15d4-453f-ad9e-0b77382d3472",
        "version": 1,
        "state": {
          "lastGroupId": 8,
          "lastNodeId": 116,
          "lastLinkId": 347,
          "lastRerouteId": 0
        },
        "revision": 0,
        "config": {},
        "name": "Refine by Segment",
        "inputNode": {
          "id": -10,
          "bounding": [
            806.7479357092758,
            831.269798557474,
            186.64999389648438,
            160
          ]
        },
        "outputNode": {
          "id": -20,
          "bounding": [
            5061.558941274414,
            825.0017868546877,
            120,
            60
          ]
        },
        "inputs": [
          {
            "id": "3ef84754-8546-41d6-9bb0-552b1e10fdd5",
            "name": "image",
            "type": "IMAGE",
            "linkIds": [
              1,
              314
            ],
            "localized_name": "image",
            "pos": [
              973.3979296057602,
              851.269798557474
            ]
          },
          {
            "id": "75063a78-ba10-4408-84b5-171cf651b250",
            "name": "value",
            "type": "INT",
            "linkIds": [
              326
            ],
            "label": "segment resolution",
            "pos": [
              973.3979296057602,
              871.269798557474
            ]
          },
          {
            "id": "1c186cb7-c1c9-482c-9931-35d921652a4b",
            "name": "string_b",
            "type": "STRING",
            "linkIds": [
              327
            ],
            "label": "additional positive prompt",
            "pos": [
              973.3979296057602,
              891.269798557474
            ]
          },
          {
            "id": "5b2914f2-e875-4a27-ba6d-bd3a38c8f4ea",
            "name": "text",
            "type": "STRING",
            "linkIds": [
              330
            ],
            "label": "negative prompt",
            "pos": [
              973.3979296057602,
              911.269798557474
            ]
          },
          {
            "id": "f7bb179f-6b28-490e-9a20-6ea22d5bb93f",
            "name": "expand",
            "type": "INT",
            "linkIds": [
              337
            ],
            "label": "grow mask",
            "pos": [
              973.3979296057602,
              931.269798557474
            ]
          },
          {
            "id": "e2f77901-757d-4d71-9910-d06d9206f8c6",
            "name": "switch",
            "type": "BOOLEAN",
            "linkIds": [
              347
            ],
            "label": "enable qwen vl",
            "pos": [
              973.3979296057602,
              951.269798557474
            ]
          }
        ],
        "outputs": [
          {
            "id": "c6709191-676d-4b98-b003-6c50837e5d55",
            "name": "final_image",
            "type": "IMAGE",
            "linkIds": [
              313
            ],
            "localized_name": "final_image",
            "label": "image",
            "pos": [
              5081.558941274414,
              845.0017868546877
            ]
          }
        ],
        "widgets": [],
        "nodes": [
          {
            "id": 3,
            "type": "PreviewImage",
            "pos": [
              997.3463044782231,
              1157.5671448147546
            ],
            "size": [
              367.94708621462905,
              269.2208997041041
            ],
            "flags": {},
            "order": 5,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "images",
                "name": "images",
                "type": "IMAGE",
                "link": 2
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PreviewImage"
            },
            "widgets_values": []
          },
          {
            "id": 22,
            "type": "MaskPreview",
            "pos": [
              1004.039409909705,
              1477.6642063668287
            ],
            "size": [
              361.83301408827265,
              260.8052249260261
            ],
            "flags": {},
            "order": 13,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "link": 169
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "MaskPreview"
            }
          },
          {
            "id": 42,
            "type": "MaskPreview",
            "pos": [
              1425.4641944387508,
              1188.2709087883934
            ],
            "size": [
              295.83024464075015,
              258
            ],
            "flags": {},
            "order": 20,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "link": 116
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "MaskPreview"
            }
          },
          {
            "id": 38,
            "type": "PreviewImage",
            "pos": [
              1740.4100611455576,
              1193.4345225910504
            ],
            "size": [
              327.95007004374975,
              246.0000000000001
            ],
            "flags": {},
            "order": 16,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "images",
                "name": "images",
                "type": "IMAGE",
                "link": 115
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PreviewImage"
            }
          },
          {
            "id": 76,
            "type": "GetMaskSizeAndCount",
            "pos": [
              1000.8446941455987,
              583.6148130450025
            ],
            "size": [
              191.26666870117188,
              86
            ],
            "flags": {},
            "order": 27,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "link": 203
              }
            ],
            "outputs": [
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "links": []
              },
              {
                "label": "2048 width",
                "localized_name": "width",
                "name": "width",
                "type": "INT",
                "links": []
              },
              {
                "label": "1512 height",
                "localized_name": "height",
                "name": "height",
                "type": "INT",
                "links": []
              },
              {
                "label": "1 count",
                "localized_name": "count",
                "name": "count",
                "type": "INT",
                "links": [
                  311
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui-kjnodes",
              "ver": "1.2.0",
              "Node name for S&R": "GetMaskSizeAndCount"
            }
          },
          {
            "id": 104,
            "type": "CyberEve_SingleImageLoopOpen",
            "pos": [
              1208.5598474594974,
              577.1900947310097
            ],
            "size": [
              279.09999694824216,
              138
            ],
            "flags": {},
            "order": 31,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "image",
                "name": "image",
                "type": "IMAGE",
                "link": 314
              },
              {
                "localized_name": "mask",
                "name": "mask",
                "shape": 7,
                "type": "MASK",
                "link": null
              },
              {
                "localized_name": "max_iterations",
                "name": "max_iterations",
                "type": "INT",
                "widget": {
                  "name": "max_iterations"
                },
                "link": 311
              }
            ],
            "outputs": [
              {
                "localized_name": "FLOW_CONTROL",
                "name": "FLOW_CONTROL",
                "type": "FLOW_CONTROL",
                "links": [
                  310
                ]
              },
              {
                "localized_name": "current_image",
                "name": "current_image",
                "type": "IMAGE",
                "links": [
                  320,
                  325
                ]
              },
              {
                "localized_name": "current_mask",
                "name": "current_mask",
                "type": "MASK",
                "links": [
                  309
                ]
              },
              {
                "localized_name": "max_iterations",
                "name": "max_iterations",
                "type": "INT",
                "links": [
                  308
                ]
              },
              {
                "localized_name": "iteration_count",
                "name": "iteration_count",
                "type": "INT",
                "links": [
                  315
                ]
              }
            ],
            "properties": {
              "cnr_id": "loop-image",
              "ver": "1.1.0",
              "Node name for S&R": "CyberEve_SingleImageLoopOpen"
            },
            "widgets_values": [
              5
            ]
          },
          {
            "id": 95,
            "type": "ImageCropByMask",
            "pos": [
              2189.6997636201972,
              497.913171284166
            ],
            "size": [
              203.9771500729156,
              58.75102239102739
            ],
            "flags": {},
            "order": 28,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "image",
                "name": "image",
                "type": "IMAGE",
                "link": 320
              },
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "link": 336
              }
            ],
            "outputs": [
              {
                "localized_name": "image",
                "name": "image",
                "type": "IMAGE",
                "links": [
                  276,
                  277
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui-kjnodes",
              "ver": "1.2.0",
              "Node name for S&R": "ImageCropByMask"
            }
          },
          {
            "id": 5,
            "type": "VAELoader",
            "pos": [
              2869.1376306815973,
              1277.7279025585558
            ],
            "size": [
              270,
              58
            ],
            "flags": {},
            "order": 0,
            "mode": 4,
            "inputs": [],
            "outputs": [
              {
                "localized_name": "VAE",
                "name": "VAE",
                "type": "VAE",
                "links": [
                  13,
                  73
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "VAELoader"
            },
            "widgets_values": [
              "sdxl_vae.safetensors"
            ]
          },
          {
            "id": 24,
            "type": "INPAINT_VAEEncodeInpaintConditioning",
            "pos": [
              3204.989081802467,
              862.0903634795793
            ],
            "size": [
              269.81667175292966,
              106
            ],
            "flags": {},
            "order": 14,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "positive",
                "name": "positive",
                "type": "CONDITIONING",
                "link": 66
              },
              {
                "localized_name": "negative",
                "name": "negative",
                "type": "CONDITIONING",
                "link": 67
              },
              {
                "localized_name": "vae",
                "name": "vae",
                "type": "VAE",
                "link": 73
              },
              {
                "localized_name": "pixels",
                "name": "pixels",
                "type": "IMAGE",
                "link": 150
              },
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "link": 157
              }
            ],
            "outputs": [
              {
                "localized_name": "positive",
                "name": "positive",
                "type": "CONDITIONING",
                "links": [
                  68
                ]
              },
              {
                "localized_name": "negative",
                "name": "negative",
                "type": "CONDITIONING",
                "links": [
                  69
                ]
              },
              {
                "localized_name": "latent_inpaint",
                "name": "latent_inpaint",
                "type": "LATENT",
                "links": []
              },
              {
                "localized_name": "latent_samples",
                "name": "latent_samples",
                "type": "LATENT",
                "links": [
                  139
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui-inpaint-nodes",
              "ver": "1.0.4",
              "Node name for S&R": "INPAINT_VAEEncodeInpaintConditioning"
            }
          },
          {
            "id": 105,
            "type": "CyberEve_SingleImageLoopClose",
            "pos": [
              4508.54964615577,
              833.819049291928
            ],
            "size": [
              414.55036922228226,
              159.02858278497422
            ],
            "flags": {},
            "order": 32,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "flow_control",
                "name": "flow_control",
                "type": "FLOW_CONTROL",
                "link": 310
              },
              {
                "localized_name": "current_image",
                "name": "current_image",
                "type": "IMAGE",
                "link": 312
              },
              {
                "localized_name": "max_iterations",
                "name": "max_iterations",
                "type": "INT",
                "link": 308
              },
              {
                "localized_name": "current_mask",
                "name": "current_mask",
                "shape": 7,
                "type": "MASK",
                "link": 309
              }
            ],
            "outputs": [
              {
                "localized_name": "final_image",
                "name": "final_image",
                "type": "IMAGE",
                "links": [
                  313
                ]
              },
              {
                "localized_name": "final_mask",
                "name": "final_mask",
                "type": "MASK",
                "links": null
              }
            ],
            "properties": {
              "cnr_id": "loop-image",
              "ver": "1.1.0",
              "Node name for S&R": "CyberEve_SingleImageLoopClose"
            }
          },
          {
            "id": 53,
            "type": "ImageScale",
            "pos": [
              4049.2486060270935,
              625.2359677646245
            ],
            "size": [
              270,
              130
            ],
            "flags": {},
            "order": 22,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "image",
                "name": "image",
                "type": "IMAGE",
                "link": 144
              },
              {
                "localized_name": "width",
                "name": "width",
                "type": "INT",
                "widget": {
                  "name": "width"
                },
                "link": 142
              },
              {
                "localized_name": "height",
                "name": "height",
                "type": "INT",
                "widget": {
                  "name": "height"
                },
                "link": 143
              }
            ],
            "outputs": [
              {
                "localized_name": "IMAGE",
                "name": "IMAGE",
                "type": "IMAGE",
                "links": []
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "ImageScale"
            },
            "widgets_values": [
              "lanczos",
              1024,
              1024,
              "disabled"
            ]
          },
          {
            "id": 99,
            "type": "PreviewImage",
            "pos": [
              4506.786838095131,
              1035.1818089468713
            ],
            "size": [
              468.3793066029657,
              370.1823772434195
            ],
            "flags": {},
            "order": 29,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "images",
                "name": "images",
                "type": "IMAGE",
                "link": 298
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PreviewImage"
            }
          },
          {
            "id": 29,
            "type": "MathExpression|pysssss",
            "pos": [
              2098.6591001675547,
              889.5500987243666
            ],
            "size": [
              406.17149483725734,
              128
            ],
            "flags": {},
            "order": 15,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "a",
                "name": "a",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": 146
              },
              {
                "localized_name": "b",
                "name": "b",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": 147
              },
              {
                "localized_name": "c",
                "name": "c",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": 306
              }
            ],
            "outputs": [
              {
                "localized_name": "INT",
                "name": "INT",
                "type": "INT",
                "links": null
              },
              {
                "localized_name": "FLOAT",
                "name": "FLOAT",
                "type": "FLOAT",
                "links": [
                  148,
                  159,
                  161
                ]
              }
            ],
            "title": "Calculate Scale Factor",
            "properties": {
              "cnr_id": "comfyui-custom-scripts",
              "ver": "1.2.5",
              "Node name for S&R": "MathExpression|pysssss"
            },
            "widgets_values": [
              "max(c/max(a,b),1)"
            ]
          },
          {
            "id": 11,
            "type": "VAEDecode",
            "pos": [
              3837.735251616675,
              857.2889946015689
            ],
            "size": [
              194.82939628141958,
              74.0522492602613
            ],
            "flags": {},
            "order": 9,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "samples",
                "name": "samples",
                "type": "LATENT",
                "link": 127
              },
              {
                "localized_name": "vae",
                "name": "vae",
                "type": "VAE",
                "link": 13
              }
            ],
            "outputs": [
              {
                "localized_name": "IMAGE",
                "name": "IMAGE",
                "type": "IMAGE",
                "links": [
                  122,
                  144,
                  333
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "VAEDecode"
            }
          },
          {
            "id": 102,
            "type": "PrimitiveInt",
            "pos": [
              1800.473328371718,
              868.2224292241445
            ],
            "size": [
              246.48537637062145,
              82
            ],
            "flags": {},
            "order": 30,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "value",
                "name": "value",
                "type": "INT",
                "widget": {
                  "name": "value"
                },
                "link": 326
              }
            ],
            "outputs": [
              {
                "localized_name": "INT",
                "name": "INT",
                "type": "INT",
                "links": [
                  306
                ]
              }
            ],
            "title": "Intermediate Upscale To",
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PrimitiveInt"
            },
            "widgets_values": [
              1280,
              "fixed"
            ]
          },
          {
            "id": 54,
            "type": "ImageScaleBy",
            "pos": [
              2537.0342543301995,
              866.6009321819179
            ],
            "size": [
              270,
              82
            ],
            "flags": {},
            "order": 23,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "image",
                "name": "image",
                "type": "IMAGE",
                "link": 149
              },
              {
                "localized_name": "scale_by",
                "name": "scale_by",
                "type": "FLOAT",
                "widget": {
                  "name": "scale_by"
                },
                "link": 148
              }
            ],
            "outputs": [
              {
                "localized_name": "IMAGE",
                "name": "IMAGE",
                "type": "IMAGE",
                "links": [
                  150
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "ImageScaleBy"
            },
            "widgets_values": [
              "lanczos",
              1
            ]
          },
          {
            "id": 41,
            "type": "PreviewImage",
            "pos": [
              3829.3457930206123,
              1032.6149889451217
            ],
            "size": [
              324.9284450825385,
              355.52444631765525
            ],
            "flags": {},
            "order": 19,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "images",
                "name": "images",
                "type": "IMAGE",
                "link": 122
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PreviewImage"
            },
            "widgets_values": []
          },
          {
            "id": 40,
            "type": "BatchUncropAdvanced",
            "pos": [
              4161.771771080975,
              841.2989056169803
            ],
            "size": [
              285.36667251586914,
              230
            ],
            "flags": {},
            "order": 18,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "original_images",
                "name": "original_images",
                "type": "IMAGE",
                "link": 108
              },
              {
                "localized_name": "cropped_images",
                "name": "cropped_images",
                "type": "IMAGE",
                "link": 333
              },
              {
                "localized_name": "cropped_masks",
                "name": "cropped_masks",
                "type": "MASK",
                "link": 111
              },
              {
                "localized_name": "combined_crop_mask",
                "name": "combined_crop_mask",
                "type": "MASK",
                "link": 112
              },
              {
                "localized_name": "bboxes",
                "name": "bboxes",
                "type": "BBOX",
                "link": 113
              },
              {
                "localized_name": "combined_bounding_box",
                "name": "combined_bounding_box",
                "shape": 7,
                "type": "BBOX",
                "link": 114
              }
            ],
            "outputs": [
              {
                "localized_name": "IMAGE",
                "name": "IMAGE",
                "type": "IMAGE",
                "links": [
                  298,
                  312
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui-kjnodes",
              "ver": "1.2.0",
              "Node name for S&R": "BatchUncropAdvanced"
            },
            "widgets_values": [
              0.05,
              1,
              true,
              false
            ]
          },
          {
            "id": 59,
            "type": "ResizeMask",
            "pos": [
              2572.2849437050836,
              1081.161678422197
            ],
            "size": [
              270,
              194
            ],
            "flags": {},
            "order": 24,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "link": 156
              },
              {
                "localized_name": "width",
                "name": "width",
                "type": "INT",
                "widget": {
                  "name": "width"
                },
                "link": 164
              },
              {
                "localized_name": "height",
                "name": "height",
                "type": "INT",
                "widget": {
                  "name": "height"
                },
                "link": 163
              }
            ],
            "outputs": [
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "links": [
                  157
                ]
              },
              {
                "localized_name": "width",
                "name": "width",
                "type": "INT",
                "links": null
              },
              {
                "localized_name": "height",
                "name": "height",
                "type": "INT",
                "links": null
              }
            ],
            "properties": {
              "cnr_id": "comfyui-kjnodes",
              "ver": "1.2.0",
              "Node name for S&R": "ResizeMask"
            },
            "widgets_values": [
              512,
              512,
              false,
              "lanczos",
              "disabled"
            ]
          },
          {
            "id": 50,
            "type": "GetImageSize",
            "pos": [
              1813.6251272404902,
              998.6205974127038
            ],
            "size": [
              210,
              136
            ],
            "flags": {},
            "order": 21,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "image",
                "name": "image",
                "type": "IMAGE",
                "link": 141
              }
            ],
            "outputs": [
              {
                "localized_name": "width",
                "name": "width",
                "type": "INT",
                "links": [
                  142,
                  146,
                  158
                ]
              },
              {
                "localized_name": "height",
                "name": "height",
                "type": "INT",
                "links": [
                  143,
                  147,
                  162
                ]
              },
              {
                "localized_name": "batch_size",
                "name": "batch_size",
                "type": "INT",
                "links": null
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "GetImageSize"
            }
          },
          {
            "id": 60,
            "type": "MathExpression|pysssss",
            "pos": [
              2072.6107335825427,
              1067.527914313313
            ],
            "size": [
              210,
              128
            ],
            "flags": {},
            "order": 25,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "a",
                "name": "a",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": 158
              },
              {
                "localized_name": "b",
                "name": "b",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": 159
              },
              {
                "localized_name": "c",
                "name": "c",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": null
              }
            ],
            "outputs": [
              {
                "localized_name": "INT",
                "name": "INT",
                "type": "INT",
                "links": [
                  164
                ]
              },
              {
                "localized_name": "FLOAT",
                "name": "FLOAT",
                "type": "FLOAT",
                "links": null
              }
            ],
            "title": "Calculate Mask Width",
            "properties": {
              "cnr_id": "comfyui-custom-scripts",
              "ver": "1.2.5",
              "Node name for S&R": "MathExpression|pysssss"
            },
            "widgets_values": [
              "a*b"
            ]
          },
          {
            "id": 61,
            "type": "MathExpression|pysssss",
            "pos": [
              2303.8002577595803,
              1066.734955644435
            ],
            "size": [
              210,
              128
            ],
            "flags": {},
            "order": 26,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "a",
                "name": "a",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": 161
              },
              {
                "localized_name": "b",
                "name": "b",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": 162
              },
              {
                "localized_name": "c",
                "name": "c",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": null
              }
            ],
            "outputs": [
              {
                "localized_name": "INT",
                "name": "INT",
                "type": "INT",
                "links": [
                  163
                ]
              },
              {
                "localized_name": "FLOAT",
                "name": "FLOAT",
                "type": "FLOAT",
                "links": null
              }
            ],
            "title": "Calculate Mask Height",
            "properties": {
              "cnr_id": "comfyui-custom-scripts",
              "ver": "1.2.5",
              "Node name for S&R": "MathExpression|pysssss"
            },
            "widgets_values": [
              "a*b"
            ]
          },
          {
            "id": 39,
            "type": "BatchCropFromMaskAdvanced",
            "pos": [
              1425.2952421529274,
              858.6987782381365
            ],
            "size": [
              335.73333740234375,
              242
            ],
            "flags": {},
            "order": 17,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "original_images",
                "name": "original_images",
                "type": "IMAGE",
                "link": 325
              },
              {
                "localized_name": "masks",
                "name": "masks",
                "type": "MASK",
                "link": 338
              }
            ],
            "outputs": [
              {
                "localized_name": "original_images",
                "name": "original_images",
                "type": "IMAGE",
                "links": [
                  108
                ]
              },
              {
                "localized_name": "cropped_images",
                "name": "cropped_images",
                "type": "IMAGE",
                "links": []
              },
              {
                "localized_name": "cropped_masks",
                "name": "cropped_masks",
                "type": "MASK",
                "links": [
                  111
                ]
              },
              {
                "localized_name": "combined_crop_image",
                "name": "combined_crop_image",
                "type": "IMAGE",
                "links": [
                  115,
                  141,
                  149
                ]
              },
              {
                "localized_name": "combined_crop_masks",
                "name": "combined_crop_masks",
                "type": "MASK",
                "links": [
                  112,
                  116,
                  156
                ]
              },
              {
                "localized_name": "bboxes",
                "name": "bboxes",
                "type": "BBOX",
                "links": [
                  113
                ]
              },
              {
                "localized_name": "combined_bounding_box",
                "name": "combined_bounding_box",
                "type": "BBOX",
                "links": [
                  114
                ]
              },
              {
                "localized_name": "bbox_width",
                "name": "bbox_width",
                "type": "INT",
                "links": null
              },
              {
                "localized_name": "bbox_height",
                "name": "bbox_height",
                "type": "INT",
                "links": null
              }
            ],
            "properties": {
              "cnr_id": "comfyui-kjnodes",
              "ver": "1.2.0",
              "Node name for S&R": "BatchCropFromMaskAdvanced"
            },
            "widgets_values": [
              1,
              0.7
            ]
          },
          {
            "id": 107,
            "type": "GetImageRangeFromBatch",
            "pos": [
              1501.5484993150317,
              617.5358016059444
            ],
            "size": [
              316.5806700303996,
              107.10040895641089
            ],
            "flags": {},
            "order": 33,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "images",
                "name": "images",
                "shape": 7,
                "type": "IMAGE",
                "link": null
              },
              {
                "localized_name": "masks",
                "name": "masks",
                "shape": 7,
                "type": "MASK",
                "link": 322
              },
              {
                "localized_name": "start_index",
                "name": "start_index",
                "type": "INT",
                "widget": {
                  "name": "start_index"
                },
                "link": 315
              }
            ],
            "outputs": [
              {
                "localized_name": "IMAGE",
                "name": "IMAGE",
                "type": "IMAGE",
                "links": null
              },
              {
                "localized_name": "MASK",
                "name": "MASK",
                "type": "MASK",
                "links": [
                  335
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui-kjnodes",
              "ver": "1.2.0",
              "Node name for S&R": "GetImageRangeFromBatch"
            },
            "widgets_values": [
              0,
              1
            ]
          },
          {
            "id": 112,
            "type": "GrowMask",
            "pos": [
              1832.6544005369121,
              627.4390507940712
            ],
            "size": [
              270,
              82
            ],
            "flags": {},
            "order": 35,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "link": 335
              },
              {
                "localized_name": "expand",
                "name": "expand",
                "type": "INT",
                "widget": {
                  "name": "expand"
                },
                "link": 337
              }
            ],
            "outputs": [
              {
                "localized_name": "MASK",
                "name": "MASK",
                "type": "MASK",
                "links": [
                  336,
                  338
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "GrowMask"
            },
            "widgets_values": [
              8,
              true
            ]
          },
          {
            "id": 6,
            "type": "KSampler",
            "pos": [
              3523.9707642471685,
              853.891502202401
            ],
            "size": [
              270,
              262
            ],
            "flags": {},
            "order": 6,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "model",
                "name": "model",
                "type": "MODEL",
                "link": 340
              },
              {
                "localized_name": "positive",
                "name": "positive",
                "type": "CONDITIONING",
                "link": 68
              },
              {
                "localized_name": "negative",
                "name": "negative",
                "type": "CONDITIONING",
                "link": 69
              },
              {
                "localized_name": "latent_image",
                "name": "latent_image",
                "type": "LATENT",
                "link": 139
              }
            ],
            "outputs": [
              {
                "localized_name": "LATENT",
                "name": "LATENT",
                "type": "LATENT",
                "links": [
                  127
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "KSampler"
            },
            "widgets_values": [
              80721298587738,
              "randomize",
              32,
              4,
              "dpmpp_3m_sde",
              "karras",
              0.62
            ]
          },
          {
            "id": 7,
            "type": "CheckpointLoaderSimple",
            "pos": [
              2860.415299084029,
              1136.2632126563851
            ],
            "size": [
              270,
              98
            ],
            "flags": {},
            "order": 1,
            "mode": 4,
            "inputs": [],
            "outputs": [
              {
                "localized_name": "MODEL",
                "name": "MODEL",
                "type": "MODEL",
                "links": [
                  339
                ]
              },
              {
                "localized_name": "CLIP",
                "name": "CLIP",
                "type": "CLIP",
                "links": [
                  343
                ]
              },
              {
                "localized_name": "VAE",
                "name": "VAE",
                "type": "VAE",
                "links": null
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "CheckpointLoaderSimple"
            },
            "widgets_values": [
              "tsrmix_v50.safetensors"
            ]
          },
          {
            "id": 114,
            "type": "Lora Loader Stack (rgthree)",
            "pos": [
              3189.15151072557,
              1027.9829828492443
            ],
            "size": [
              282.5333312988281,
              246
            ],
            "flags": {},
            "order": 3,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "model",
                "name": "model",
                "type": "MODEL",
                "link": 339
              },
              {
                "localized_name": "clip",
                "name": "clip",
                "type": "CLIP",
                "link": 343
              }
            ],
            "outputs": [
              {
                "localized_name": "MODEL",
                "name": "MODEL",
                "type": "MODEL",
                "links": [
                  340
                ]
              },
              {
                "localized_name": "CLIP",
                "name": "CLIP",
                "type": "CLIP",
                "links": [
                  341,
                  342
                ]
              }
            ],
            "properties": {
              "cnr_id": "rgthree-comfy",
              "ver": "1.0.2512092137",
              "Node name for S&R": "Lora Loader Stack (rgthree)"
            },
            "widgets_values": [
              "None",
              0.75,
              "None",
              1,
              "None",
              1,
              "None",
              1
            ]
          },
          {
            "id": 20,
            "type": "AILab_QwenVL",
            "pos": [
              2432.2487487972357,
              204.19969826238048
            ],
            "size": [
              382.07647704408555,
              414.29436879390346
            ],
            "flags": {},
            "order": 11,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "image",
                "name": "image",
                "shape": 7,
                "type": "IMAGE",
                "link": 277
              },
              {
                "localized_name": "video",
                "name": "video",
                "shape": 7,
                "type": "IMAGE",
                "link": null
              }
            ],
            "outputs": [
              {
                "localized_name": "RESPONSE",
                "name": "RESPONSE",
                "type": "STRING",
                "links": [
                  39,
                  345
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui-qwenvl",
              "ver": "1.1.0",
              "Node name for S&R": "AILab_QwenVL"
            },
            "widgets_values": [
              "Qwen3-VL-4B-Instruct",
              "8-bit (Balanced)",
              "auto",
              " Simple Description",
              "Write a brief description of the person in the image. Keep it concise. Do not use full sentences, output only a comma delimited list of attributes and attire. Keep the comma delimited list limited to adjectives, nouns, and verbs related to visible attributes like clothing, eye color, skin color, hair color, accessories, facial expressions, etc.\nOnly describe the character in the image, not the setting or background. Do not mention things that are not visible. Rather than saying \"no visible eyes\" or \"no accessories\", omit the detail altogether, only report seen attributes.\nExample:\n\"Red hair, green eyes, smiling, earrings, freckles, black dress, white shoes, bell choker, exposed breasts, pink nipples\"",
              512,
              true,
              3347324141,
              "randomize"
            ],
            "color": "#28403f",
            "bgcolor": "#374539"
          },
          {
            "id": 9,
            "type": "CLIPTextEncode",
            "pos": [
              3350.588827496829,
              409.85080610587534
            ],
            "size": [
              417.5616353840064,
              201.66844311418998
            ],
            "flags": {},
            "order": 7,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "clip",
                "name": "clip",
                "type": "CLIP",
                "link": 342
              },
              {
                "localized_name": "text",
                "name": "text",
                "type": "STRING",
                "widget": {
                  "name": "text"
                },
                "link": 329
              }
            ],
            "outputs": [
              {
                "localized_name": "CONDITIONING",
                "name": "CONDITIONING",
                "type": "CONDITIONING",
                "links": [
                  66
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "CLIPTextEncode"
            },
            "widgets_values": [
              "1girl, green skin, white hair, horns, goblin, gobbo, black gloves"
            ],
            "color": "#232",
            "bgcolor": "#353"
          },
          {
            "id": 10,
            "type": "CLIPTextEncode",
            "pos": [
              2928.7649709235066,
              439.9344677391408
            ],
            "size": [
              407.26808276288466,
              181.17485421542813
            ],
            "flags": {},
            "order": 8,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "clip",
                "name": "clip",
                "type": "CLIP",
                "link": 341
              },
              {
                "localized_name": "text",
                "name": "text",
                "type": "STRING",
                "widget": {
                  "name": "text"
                },
                "link": 330
              }
            ],
            "outputs": [
              {
                "localized_name": "CONDITIONING",
                "name": "CONDITIONING",
                "type": "CONDITIONING",
                "links": [
                  67
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "CLIPTextEncode"
            },
            "widgets_values": [
              "jpeg artifacts, worst quality, low quality, lowres, signature, watermark, artist_name, twitter_username, patreon_logo, letterboxed, censored, shiny skin, realistic, 3d, tears, crying, sweat"
            ],
            "color": "#322",
            "bgcolor": "#533"
          },
          {
            "id": 109,
            "type": "StringConcatenate",
            "pos": [
              3057.4889611511376,
              200.16069497829326
            ],
            "size": [
              400,
              200
            ],
            "flags": {},
            "order": 34,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "string_a",
                "name": "string_a",
                "type": "STRING",
                "widget": {
                  "name": "string_a"
                },
                "link": 346
              },
              {
                "label": "Additional Positive Prompt",
                "localized_name": "string_b",
                "name": "string_b",
                "type": "STRING",
                "widget": {
                  "name": "string_b"
                },
                "link": 327
              }
            ],
            "outputs": [
              {
                "localized_name": "STRING",
                "name": "STRING",
                "type": "STRING",
                "links": [
                  329
                ]
              }
            ],
            "title": "Positive Prompt",
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "StringConcatenate"
            },
            "widgets_values": [
              "",
              "",
              ","
            ],
            "color": "#232",
            "bgcolor": "#353"
          },
          {
            "id": 116,
            "type": "PrimitiveString",
            "pos": [
              2835.716187737121,
              103.40548191767832
            ],
            "size": [
              210,
              58
            ],
            "flags": {},
            "order": 2,
            "mode": 4,
            "inputs": [],
            "outputs": [
              {
                "localized_name": "STRING",
                "name": "STRING",
                "type": "STRING",
                "links": [
                  344
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PrimitiveString"
            },
            "widgets_values": [
              ""
            ]
          },
          {
            "id": 21,
            "type": "PreviewAny",
            "pos": [
              2822.811123892673,
              -86.18859326580142
            ],
            "size": [
              455.4260060591878,
              152.5336774020432
            ],
            "flags": {},
            "order": 12,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "source",
                "name": "source",
                "type": "*",
                "link": 39
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PreviewAny"
            },
            "widgets_values": [
              null,
              null,
              null
            ]
          },
          {
            "id": 19,
            "type": "PreviewImage",
            "pos": [
              2421.5179366542698,
              -99.34277706968813
            ],
            "size": [
              381.4168025949707,
              258.2870322428656
            ],
            "flags": {},
            "order": 10,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "images",
                "name": "images",
                "type": "IMAGE",
                "link": 276
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PreviewImage"
            },
            "widgets_values": []
          },
          {
            "id": 115,
            "type": "LazySwitchKJ",
            "pos": [
              2834.405188317967,
              221.39542964117405
            ],
            "size": [
              210,
              83.2439976765998
            ],
            "flags": {},
            "order": 36,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "on_false",
                "name": "on_false",
                "type": "*",
                "link": 344
              },
              {
                "localized_name": "on_true",
                "name": "on_true",
                "type": "*",
                "link": 345
              },
              {
                "localized_name": "switch",
                "name": "switch",
                "type": "BOOLEAN",
                "widget": {
                  "name": "switch"
                },
                "link": 347
              }
            ],
            "outputs": [
              {
                "localized_name": "*",
                "name": "*",
                "type": "*",
                "links": [
                  346
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui-kjnodes",
              "ver": "1.2.0",
              "Node name for S&R": "LazySwitchKJ"
            },
            "widgets_values": [
              true
            ]
          },
          {
            "id": 1,
            "type": "SAM3Segmentation",
            "pos": [
              1009.1766858085575,
              849.1217333818615
            ],
            "size": [
              270,
              262
            ],
            "flags": {},
            "order": 4,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "image",
                "name": "image",
                "type": "IMAGE",
                "link": 1
              }
            ],
            "outputs": [
              {
                "localized_name": "segmented_image",
                "name": "segmented_image",
                "type": "IMAGE",
                "links": [
                  2
                ]
              },
              {
                "localized_name": "masks",
                "name": "masks",
                "type": "MASK",
                "links": [
                  169,
                  203,
                  322
                ]
              },
              {
                "localized_name": "mask_combined",
                "name": "mask_combined",
                "type": "MASK",
                "links": []
              },
              {
                "localized_name": "segs",
                "name": "segs",
                "type": "SEGS",
                "links": null
              }
            ],
            "properties": {
              "cnr_id": "comfyui_sam3",
              "ver": "0.2.0",
              "Node name for S&R": "SAM3Segmentation"
            },
            "widgets_values": [
              "face",
              0.7,
              150,
              150,
              false,
              false,
              ""
            ]
          }
        ],
        "groups": [
          {
            "id": 3,
            "title": "1) Get SAM3 Segments",
            "bounding": [
              986.7479357092758,
              773.1496228998027,
              402.288530583436,
              988.8928760324412
            ],
            "color": "#3f789e",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 1,
            "title": "4) Crop and Upscale Segment",
            "bounding": [
              1412.8943023245006,
              776.7753639514098,
              1418.360410864272,
              675.2623839376581
            ],
            "color": "#88A",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 7,
            "title": "2) Loop Images (Open Loop)",
            "bounding": [
              984.6107628267731,
              499.2371067929187,
              1153.3501110261582,
              261.389879633593
            ],
            "color": "#a1309b",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 4,
            "title": "3) Get Prompt for Current Image",
            "bounding": [
              2155.4793559692475,
              -170.10459450129503,
              1622.051559072614,
              798.6970142887212
            ],
            "color": "#8A8",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 5,
            "title": "5) Load Model",
            "bounding": [
              2846.1223201402927,
              1054.2662632546153,
              323.8824939010076,
              317.4622899881054
            ],
            "color": "#3f789e",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 6,
            "title": "6) Inpaint Upscaled Segment",
            "bounding": [
              3182.579888835363,
              759.3431193111942,
              616.8882374244286,
              364.73032999164457
            ],
            "color": "#b58b2a",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 2,
            "title": "7) Downscale and Uncrop",
            "bounding": [
              3815.6957739658505,
              762.4703075559535,
              656.2174961131946,
              641.6682429453456
            ],
            "color": "#88A",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 8,
            "title": "8) Loop Images (Close Loop)",
            "bounding": [
              4494.11310458446,
              753.7780914684754,
              513.7138483927392,
              664.8516158462642
            ],
            "color": "#a1309b",
            "font_size": 24,
            "flags": {}
          }
        ],
        "links": [
          {
            "id": 2,
            "origin_id": 1,
            "origin_slot": 0,
            "target_id": 3,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 169,
            "origin_id": 1,
            "origin_slot": 1,
            "target_id": 22,
            "target_slot": 0,
            "type": "MASK"
          },
          {
            "id": 325,
            "origin_id": 104,
            "origin_slot": 1,
            "target_id": 39,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 116,
            "origin_id": 39,
            "origin_slot": 4,
            "target_id": 42,
            "target_slot": 0,
            "type": "MASK"
          },
          {
            "id": 115,
            "origin_id": 39,
            "origin_slot": 3,
            "target_id": 38,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 141,
            "origin_id": 39,
            "origin_slot": 3,
            "target_id": 50,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 146,
            "origin_id": 50,
            "origin_slot": 0,
            "target_id": 29,
            "target_slot": 0,
            "type": "INT"
          },
          {
            "id": 147,
            "origin_id": 50,
            "origin_slot": 1,
            "target_id": 29,
            "target_slot": 1,
            "type": "INT"
          },
          {
            "id": 306,
            "origin_id": 102,
            "origin_slot": 0,
            "target_id": 29,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 158,
            "origin_id": 50,
            "origin_slot": 0,
            "target_id": 60,
            "target_slot": 0,
            "type": "INT"
          },
          {
            "id": 159,
            "origin_id": 29,
            "origin_slot": 1,
            "target_id": 60,
            "target_slot": 1,
            "type": "FLOAT"
          },
          {
            "id": 161,
            "origin_id": 29,
            "origin_slot": 1,
            "target_id": 61,
            "target_slot": 0,
            "type": "FLOAT"
          },
          {
            "id": 162,
            "origin_id": 50,
            "origin_slot": 1,
            "target_id": 61,
            "target_slot": 1,
            "type": "INT"
          },
          {
            "id": 149,
            "origin_id": 39,
            "origin_slot": 3,
            "target_id": 54,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 148,
            "origin_id": 29,
            "origin_slot": 1,
            "target_id": 54,
            "target_slot": 1,
            "type": "FLOAT"
          },
          {
            "id": 156,
            "origin_id": 39,
            "origin_slot": 4,
            "target_id": 59,
            "target_slot": 0,
            "type": "MASK"
          },
          {
            "id": 164,
            "origin_id": 60,
            "origin_slot": 0,
            "target_id": 59,
            "target_slot": 1,
            "type": "INT"
          },
          {
            "id": 163,
            "origin_id": 61,
            "origin_slot": 0,
            "target_id": 59,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 203,
            "origin_id": 1,
            "origin_slot": 1,
            "target_id": 76,
            "target_slot": 0,
            "type": "MASK"
          },
          {
            "id": 311,
            "origin_id": 76,
            "origin_slot": 3,
            "target_id": 104,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 322,
            "origin_id": 1,
            "origin_slot": 1,
            "target_id": 107,
            "target_slot": 1,
            "type": "MASK"
          },
          {
            "id": 315,
            "origin_id": 104,
            "origin_slot": 4,
            "target_id": 107,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 276,
            "origin_id": 95,
            "origin_slot": 0,
            "target_id": 19,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 39,
            "origin_id": 20,
            "origin_slot": 0,
            "target_id": 21,
            "target_slot": 0,
            "type": "STRING"
          },
          {
            "id": 277,
            "origin_id": 95,
            "origin_slot": 0,
            "target_id": 20,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 320,
            "origin_id": 104,
            "origin_slot": 1,
            "target_id": 95,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 66,
            "origin_id": 9,
            "origin_slot": 0,
            "target_id": 24,
            "target_slot": 0,
            "type": "CONDITIONING"
          },
          {
            "id": 67,
            "origin_id": 10,
            "origin_slot": 0,
            "target_id": 24,
            "target_slot": 1,
            "type": "CONDITIONING"
          },
          {
            "id": 73,
            "origin_id": 5,
            "origin_slot": 0,
            "target_id": 24,
            "target_slot": 2,
            "type": "VAE"
          },
          {
            "id": 150,
            "origin_id": 54,
            "origin_slot": 0,
            "target_id": 24,
            "target_slot": 3,
            "type": "IMAGE"
          },
          {
            "id": 157,
            "origin_id": 59,
            "origin_slot": 0,
            "target_id": 24,
            "target_slot": 4,
            "type": "MASK"
          },
          {
            "id": 68,
            "origin_id": 24,
            "origin_slot": 0,
            "target_id": 6,
            "target_slot": 1,
            "type": "CONDITIONING"
          },
          {
            "id": 69,
            "origin_id": 24,
            "origin_slot": 1,
            "target_id": 6,
            "target_slot": 2,
            "type": "CONDITIONING"
          },
          {
            "id": 139,
            "origin_id": 24,
            "origin_slot": 3,
            "target_id": 6,
            "target_slot": 3,
            "type": "LATENT"
          },
          {
            "id": 127,
            "origin_id": 6,
            "origin_slot": 0,
            "target_id": 11,
            "target_slot": 0,
            "type": "LATENT"
          },
          {
            "id": 13,
            "origin_id": 5,
            "origin_slot": 0,
            "target_id": 11,
            "target_slot": 1,
            "type": "VAE"
          },
          {
            "id": 144,
            "origin_id": 11,
            "origin_slot": 0,
            "target_id": 53,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 142,
            "origin_id": 50,
            "origin_slot": 0,
            "target_id": 53,
            "target_slot": 1,
            "type": "INT"
          },
          {
            "id": 143,
            "origin_id": 50,
            "origin_slot": 1,
            "target_id": 53,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 122,
            "origin_id": 11,
            "origin_slot": 0,
            "target_id": 41,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 108,
            "origin_id": 39,
            "origin_slot": 0,
            "target_id": 40,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 111,
            "origin_id": 39,
            "origin_slot": 2,
            "target_id": 40,
            "target_slot": 2,
            "type": "MASK"
          },
          {
            "id": 112,
            "origin_id": 39,
            "origin_slot": 4,
            "target_id": 40,
            "target_slot": 3,
            "type": "MASK"
          },
          {
            "id": 113,
            "origin_id": 39,
            "origin_slot": 5,
            "target_id": 40,
            "target_slot": 4,
            "type": "BBOX"
          },
          {
            "id": 114,
            "origin_id": 39,
            "origin_slot": 6,
            "target_id": 40,
            "target_slot": 5,
            "type": "BBOX"
          },
          {
            "id": 310,
            "origin_id": 104,
            "origin_slot": 0,
            "target_id": 105,
            "target_slot": 0,
            "type": "FLOW_CONTROL"
          },
          {
            "id": 312,
            "origin_id": 40,
            "origin_slot": 0,
            "target_id": 105,
            "target_slot": 1,
            "type": "IMAGE"
          },
          {
            "id": 308,
            "origin_id": 104,
            "origin_slot": 3,
            "target_id": 105,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 309,
            "origin_id": 104,
            "origin_slot": 2,
            "target_id": 105,
            "target_slot": 3,
            "type": "MASK"
          },
          {
            "id": 298,
            "origin_id": 40,
            "origin_slot": 0,
            "target_id": 99,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 1,
            "origin_id": -10,
            "origin_slot": 0,
            "target_id": 1,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 314,
            "origin_id": -10,
            "origin_slot": 0,
            "target_id": 104,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 313,
            "origin_id": 105,
            "origin_slot": 0,
            "target_id": -20,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 326,
            "origin_id": -10,
            "origin_slot": 1,
            "target_id": 102,
            "target_slot": 0,
            "type": "INT"
          },
          {
            "id": 327,
            "origin_id": -10,
            "origin_slot": 2,
            "target_id": 109,
            "target_slot": 1,
            "type": "STRING"
          },
          {
            "id": 329,
            "origin_id": 109,
            "origin_slot": 0,
            "target_id": 9,
            "target_slot": 1,
            "type": "STRING"
          },
          {
            "id": 330,
            "origin_id": -10,
            "origin_slot": 3,
            "target_id": 10,
            "target_slot": 1,
            "type": "STRING"
          },
          {
            "id": 333,
            "origin_id": 11,
            "origin_slot": 0,
            "target_id": 40,
            "target_slot": 1,
            "type": "IMAGE"
          },
          {
            "id": 335,
            "origin_id": 107,
            "origin_slot": 1,
            "target_id": 112,
            "target_slot": 0,
            "type": "MASK"
          },
          {
            "id": 336,
            "origin_id": 112,
            "origin_slot": 0,
            "target_id": 95,
            "target_slot": 1,
            "type": "MASK"
          },
          {
            "id": 337,
            "origin_id": -10,
            "origin_slot": 4,
            "target_id": 112,
            "target_slot": 1,
            "type": "INT"
          },
          {
            "id": 338,
            "origin_id": 112,
            "origin_slot": 0,
            "target_id": 39,
            "target_slot": 1,
            "type": "MASK"
          },
          {
            "id": 339,
            "origin_id": 7,
            "origin_slot": 0,
            "target_id": 114,
            "target_slot": 0,
            "type": "MODEL"
          },
          {
            "id": 340,
            "origin_id": 114,
            "origin_slot": 0,
            "target_id": 6,
            "target_slot": 0,
            "type": "MODEL"
          },
          {
            "id": 341,
            "origin_id": 114,
            "origin_slot": 1,
            "target_id": 10,
            "target_slot": 0,
            "type": "CLIP"
          },
          {
            "id": 342,
            "origin_id": 114,
            "origin_slot": 1,
            "target_id": 9,
            "target_slot": 0,
            "type": "CLIP"
          },
          {
            "id": 343,
            "origin_id": 7,
            "origin_slot": 1,
            "target_id": 114,
            "target_slot": 1,
            "type": "CLIP"
          },
          {
            "id": 344,
            "origin_id": 116,
            "origin_slot": 0,
            "target_id": 115,
            "target_slot": 0,
            "type": "STRING"
          },
          {
            "id": 345,
            "origin_id": 20,
            "origin_slot": 0,
            "target_id": 115,
            "target_slot": 1,
            "type": "STRING"
          },
          {
            "id": 346,
            "origin_id": 115,
            "origin_slot": 0,
            "target_id": 109,
            "target_slot": 0,
            "type": "STRING"
          },
          {
            "id": 347,
            "origin_id": -10,
            "origin_slot": 5,
            "target_id": 115,
            "target_slot": 2,
            "type": "BOOLEAN"
          }
        ],
        "extra": {
          "workflowRendererVersion": "LG"
        }
      },
      {
        "id": "e3564efa-ed45-423e-a691-968585d03386",
        "version": 1,
        "state": {
          "lastGroupId": 8,
          "lastNodeId": 116,
          "lastLinkId": 347,
          "lastRerouteId": 0
        },
        "revision": 0,
        "config": {},
        "name": "Refine by Segment",
        "inputNode": {
          "id": -10,
          "bounding": [
            806.7479357092758,
            831.269798557474,
            186.64999389648438,
            160
          ]
        },
        "outputNode": {
          "id": -20,
          "bounding": [
            5061.558941274414,
            825.0017868546877,
            120,
            60
          ]
        },
        "inputs": [
          {
            "id": "3ef84754-8546-41d6-9bb0-552b1e10fdd5",
            "name": "image",
            "type": "IMAGE",
            "linkIds": [
              1,
              314
            ],
            "localized_name": "image",
            "pos": [
              973.3979296057602,
              851.269798557474
            ]
          },
          {
            "id": "75063a78-ba10-4408-84b5-171cf651b250",
            "name": "value",
            "type": "INT",
            "linkIds": [
              326
            ],
            "label": "segment resolution",
            "pos": [
              973.3979296057602,
              871.269798557474
            ]
          },
          {
            "id": "1c186cb7-c1c9-482c-9931-35d921652a4b",
            "name": "string_b",
            "type": "STRING",
            "linkIds": [
              327
            ],
            "label": "additional positive prompt",
            "pos": [
              973.3979296057602,
              891.269798557474
            ]
          },
          {
            "id": "5b2914f2-e875-4a27-ba6d-bd3a38c8f4ea",
            "name": "text",
            "type": "STRING",
            "linkIds": [
              330
            ],
            "label": "negative prompt",
            "pos": [
              973.3979296057602,
              911.269798557474
            ]
          },
          {
            "id": "f7bb179f-6b28-490e-9a20-6ea22d5bb93f",
            "name": "expand",
            "type": "INT",
            "linkIds": [
              337
            ],
            "label": "grow mask",
            "pos": [
              973.3979296057602,
              931.269798557474
            ]
          },
          {
            "id": "e2f77901-757d-4d71-9910-d06d9206f8c6",
            "name": "switch",
            "type": "BOOLEAN",
            "linkIds": [
              347
            ],
            "label": "enable qwen vl",
            "pos": [
              973.3979296057602,
              951.269798557474
            ]
          }
        ],
        "outputs": [
          {
            "id": "c6709191-676d-4b98-b003-6c50837e5d55",
            "name": "final_image",
            "type": "IMAGE",
            "linkIds": [
              313
            ],
            "localized_name": "final_image",
            "label": "image",
            "pos": [
              5081.558941274414,
              845.0017868546877
            ]
          }
        ],
        "widgets": [],
        "nodes": [
          {
            "id": 3,
            "type": "PreviewImage",
            "pos": [
              997.3463044782231,
              1157.5671448147546
            ],
            "size": [
              367.94708621462905,
              269.2208997041041
            ],
            "flags": {},
            "order": 5,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "images",
                "name": "images",
                "type": "IMAGE",
                "link": 2
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PreviewImage"
            },
            "widgets_values": []
          },
          {
            "id": 22,
            "type": "MaskPreview",
            "pos": [
              1004.039409909705,
              1477.6642063668287
            ],
            "size": [
              361.83301408827265,
              260.8052249260261
            ],
            "flags": {},
            "order": 13,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "link": 169
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "MaskPreview"
            }
          },
          {
            "id": 42,
            "type": "MaskPreview",
            "pos": [
              1425.4641944387508,
              1188.2709087883934
            ],
            "size": [
              295.83024464075015,
              258
            ],
            "flags": {},
            "order": 20,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "link": 116
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "MaskPreview"
            }
          },
          {
            "id": 38,
            "type": "PreviewImage",
            "pos": [
              1740.4100611455576,
              1193.4345225910504
            ],
            "size": [
              327.95007004374975,
              246.0000000000001
            ],
            "flags": {},
            "order": 16,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "images",
                "name": "images",
                "type": "IMAGE",
                "link": 115
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PreviewImage"
            }
          },
          {
            "id": 76,
            "type": "GetMaskSizeAndCount",
            "pos": [
              1000.8446941455987,
              583.6148130450025
            ],
            "size": [
              191.26666870117188,
              86
            ],
            "flags": {},
            "order": 27,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "link": 203
              }
            ],
            "outputs": [
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "links": []
              },
              {
                "label": "2048 width",
                "localized_name": "width",
                "name": "width",
                "type": "INT",
                "links": []
              },
              {
                "label": "1512 height",
                "localized_name": "height",
                "name": "height",
                "type": "INT",
                "links": []
              },
              {
                "label": "1 count",
                "localized_name": "count",
                "name": "count",
                "type": "INT",
                "links": [
                  311
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui-kjnodes",
              "ver": "1.2.0",
              "Node name for S&R": "GetMaskSizeAndCount"
            }
          },
          {
            "id": 104,
            "type": "CyberEve_SingleImageLoopOpen",
            "pos": [
              1208.5598474594974,
              577.1900947310097
            ],
            "size": [
              279.09999694824216,
              138
            ],
            "flags": {},
            "order": 31,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "image",
                "name": "image",
                "type": "IMAGE",
                "link": 314
              },
              {
                "localized_name": "mask",
                "name": "mask",
                "shape": 7,
                "type": "MASK",
                "link": null
              },
              {
                "localized_name": "max_iterations",
                "name": "max_iterations",
                "type": "INT",
                "widget": {
                  "name": "max_iterations"
                },
                "link": 311
              }
            ],
            "outputs": [
              {
                "localized_name": "FLOW_CONTROL",
                "name": "FLOW_CONTROL",
                "type": "FLOW_CONTROL",
                "links": [
                  310
                ]
              },
              {
                "localized_name": "current_image",
                "name": "current_image",
                "type": "IMAGE",
                "links": [
                  320,
                  325
                ]
              },
              {
                "localized_name": "current_mask",
                "name": "current_mask",
                "type": "MASK",
                "links": [
                  309
                ]
              },
              {
                "localized_name": "max_iterations",
                "name": "max_iterations",
                "type": "INT",
                "links": [
                  308
                ]
              },
              {
                "localized_name": "iteration_count",
                "name": "iteration_count",
                "type": "INT",
                "links": [
                  315
                ]
              }
            ],
            "properties": {
              "cnr_id": "loop-image",
              "ver": "1.1.0",
              "Node name for S&R": "CyberEve_SingleImageLoopOpen"
            },
            "widgets_values": [
              5
            ]
          },
          {
            "id": 95,
            "type": "ImageCropByMask",
            "pos": [
              2189.6997636201972,
              497.913171284166
            ],
            "size": [
              203.9771500729156,
              58.75102239102739
            ],
            "flags": {},
            "order": 28,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "image",
                "name": "image",
                "type": "IMAGE",
                "link": 320
              },
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "link": 336
              }
            ],
            "outputs": [
              {
                "localized_name": "image",
                "name": "image",
                "type": "IMAGE",
                "links": [
                  276,
                  277
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui-kjnodes",
              "ver": "1.2.0",
              "Node name for S&R": "ImageCropByMask"
            }
          },
          {
            "id": 5,
            "type": "VAELoader",
            "pos": [
              2869.1376306815973,
              1277.7279025585558
            ],
            "size": [
              270,
              58
            ],
            "flags": {},
            "order": 0,
            "mode": 0,
            "inputs": [],
            "outputs": [
              {
                "localized_name": "VAE",
                "name": "VAE",
                "type": "VAE",
                "links": [
                  13,
                  73
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "VAELoader"
            },
            "widgets_values": [
              "sdxl_vae.safetensors"
            ]
          },
          {
            "id": 24,
            "type": "INPAINT_VAEEncodeInpaintConditioning",
            "pos": [
              3204.989081802467,
              862.0903634795793
            ],
            "size": [
              269.81667175292966,
              106
            ],
            "flags": {},
            "order": 14,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "positive",
                "name": "positive",
                "type": "CONDITIONING",
                "link": 66
              },
              {
                "localized_name": "negative",
                "name": "negative",
                "type": "CONDITIONING",
                "link": 67
              },
              {
                "localized_name": "vae",
                "name": "vae",
                "type": "VAE",
                "link": 73
              },
              {
                "localized_name": "pixels",
                "name": "pixels",
                "type": "IMAGE",
                "link": 150
              },
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "link": 157
              }
            ],
            "outputs": [
              {
                "localized_name": "positive",
                "name": "positive",
                "type": "CONDITIONING",
                "links": [
                  68
                ]
              },
              {
                "localized_name": "negative",
                "name": "negative",
                "type": "CONDITIONING",
                "links": [
                  69
                ]
              },
              {
                "localized_name": "latent_inpaint",
                "name": "latent_inpaint",
                "type": "LATENT",
                "links": []
              },
              {
                "localized_name": "latent_samples",
                "name": "latent_samples",
                "type": "LATENT",
                "links": [
                  139
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui-inpaint-nodes",
              "ver": "1.0.4",
              "Node name for S&R": "INPAINT_VAEEncodeInpaintConditioning"
            }
          },
          {
            "id": 105,
            "type": "CyberEve_SingleImageLoopClose",
            "pos": [
              4508.54964615577,
              833.819049291928
            ],
            "size": [
              414.55036922228226,
              159.02858278497422
            ],
            "flags": {},
            "order": 32,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "flow_control",
                "name": "flow_control",
                "type": "FLOW_CONTROL",
                "link": 310
              },
              {
                "localized_name": "current_image",
                "name": "current_image",
                "type": "IMAGE",
                "link": 312
              },
              {
                "localized_name": "max_iterations",
                "name": "max_iterations",
                "type": "INT",
                "link": 308
              },
              {
                "localized_name": "current_mask",
                "name": "current_mask",
                "shape": 7,
                "type": "MASK",
                "link": 309
              }
            ],
            "outputs": [
              {
                "localized_name": "final_image",
                "name": "final_image",
                "type": "IMAGE",
                "links": [
                  313
                ]
              },
              {
                "localized_name": "final_mask",
                "name": "final_mask",
                "type": "MASK",
                "links": null
              }
            ],
            "properties": {
              "cnr_id": "loop-image",
              "ver": "1.1.0",
              "Node name for S&R": "CyberEve_SingleImageLoopClose"
            }
          },
          {
            "id": 53,
            "type": "ImageScale",
            "pos": [
              4049.2486060270935,
              625.2359677646245
            ],
            "size": [
              270,
              130
            ],
            "flags": {},
            "order": 22,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "image",
                "name": "image",
                "type": "IMAGE",
                "link": 144
              },
              {
                "localized_name": "width",
                "name": "width",
                "type": "INT",
                "widget": {
                  "name": "width"
                },
                "link": 142
              },
              {
                "localized_name": "height",
                "name": "height",
                "type": "INT",
                "widget": {
                  "name": "height"
                },
                "link": 143
              }
            ],
            "outputs": [
              {
                "localized_name": "IMAGE",
                "name": "IMAGE",
                "type": "IMAGE",
                "links": []
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "ImageScale"
            },
            "widgets_values": [
              "lanczos",
              1024,
              1024,
              "disabled"
            ]
          },
          {
            "id": 99,
            "type": "PreviewImage",
            "pos": [
              4506.786838095131,
              1035.1818089468713
            ],
            "size": [
              468.3793066029657,
              370.1823772434195
            ],
            "flags": {},
            "order": 29,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "images",
                "name": "images",
                "type": "IMAGE",
                "link": 298
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PreviewImage"
            }
          },
          {
            "id": 29,
            "type": "MathExpression|pysssss",
            "pos": [
              2098.6591001675547,
              889.5500987243666
            ],
            "size": [
              406.17149483725734,
              128
            ],
            "flags": {},
            "order": 15,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "a",
                "name": "a",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": 146
              },
              {
                "localized_name": "b",
                "name": "b",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": 147
              },
              {
                "localized_name": "c",
                "name": "c",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": 306
              }
            ],
            "outputs": [
              {
                "localized_name": "INT",
                "name": "INT",
                "type": "INT",
                "links": null
              },
              {
                "localized_name": "FLOAT",
                "name": "FLOAT",
                "type": "FLOAT",
                "links": [
                  148,
                  159,
                  161
                ]
              }
            ],
            "title": "Calculate Scale Factor",
            "properties": {
              "cnr_id": "comfyui-custom-scripts",
              "ver": "1.2.5",
              "Node name for S&R": "MathExpression|pysssss"
            },
            "widgets_values": [
              "max(c/max(a,b),1)"
            ]
          },
          {
            "id": 11,
            "type": "VAEDecode",
            "pos": [
              3837.735251616675,
              857.2889946015689
            ],
            "size": [
              194.82939628141958,
              74.0522492602613
            ],
            "flags": {},
            "order": 9,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "samples",
                "name": "samples",
                "type": "LATENT",
                "link": 127
              },
              {
                "localized_name": "vae",
                "name": "vae",
                "type": "VAE",
                "link": 13
              }
            ],
            "outputs": [
              {
                "localized_name": "IMAGE",
                "name": "IMAGE",
                "type": "IMAGE",
                "links": [
                  122,
                  144,
                  333
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "VAEDecode"
            }
          },
          {
            "id": 102,
            "type": "PrimitiveInt",
            "pos": [
              1800.473328371718,
              868.2224292241445
            ],
            "size": [
              246.48537637062145,
              82
            ],
            "flags": {},
            "order": 30,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "value",
                "name": "value",
                "type": "INT",
                "widget": {
                  "name": "value"
                },
                "link": 326
              }
            ],
            "outputs": [
              {
                "localized_name": "INT",
                "name": "INT",
                "type": "INT",
                "links": [
                  306
                ]
              }
            ],
            "title": "Intermediate Upscale To",
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PrimitiveInt"
            },
            "widgets_values": [
              1280,
              "fixed"
            ]
          },
          {
            "id": 54,
            "type": "ImageScaleBy",
            "pos": [
              2537.0342543301995,
              866.6009321819179
            ],
            "size": [
              270,
              82
            ],
            "flags": {},
            "order": 23,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "image",
                "name": "image",
                "type": "IMAGE",
                "link": 149
              },
              {
                "localized_name": "scale_by",
                "name": "scale_by",
                "type": "FLOAT",
                "widget": {
                  "name": "scale_by"
                },
                "link": 148
              }
            ],
            "outputs": [
              {
                "localized_name": "IMAGE",
                "name": "IMAGE",
                "type": "IMAGE",
                "links": [
                  150
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "ImageScaleBy"
            },
            "widgets_values": [
              "lanczos",
              1
            ]
          },
          {
            "id": 41,
            "type": "PreviewImage",
            "pos": [
              3829.3457930206123,
              1032.6149889451217
            ],
            "size": [
              324.9284450825385,
              355.52444631765525
            ],
            "flags": {},
            "order": 19,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "images",
                "name": "images",
                "type": "IMAGE",
                "link": 122
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PreviewImage"
            },
            "widgets_values": []
          },
          {
            "id": 40,
            "type": "BatchUncropAdvanced",
            "pos": [
              4161.771771080975,
              841.2989056169803
            ],
            "size": [
              285.36667251586914,
              230
            ],
            "flags": {},
            "order": 18,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "original_images",
                "name": "original_images",
                "type": "IMAGE",
                "link": 108
              },
              {
                "localized_name": "cropped_images",
                "name": "cropped_images",
                "type": "IMAGE",
                "link": 333
              },
              {
                "localized_name": "cropped_masks",
                "name": "cropped_masks",
                "type": "MASK",
                "link": 111
              },
              {
                "localized_name": "combined_crop_mask",
                "name": "combined_crop_mask",
                "type": "MASK",
                "link": 112
              },
              {
                "localized_name": "bboxes",
                "name": "bboxes",
                "type": "BBOX",
                "link": 113
              },
              {
                "localized_name": "combined_bounding_box",
                "name": "combined_bounding_box",
                "shape": 7,
                "type": "BBOX",
                "link": 114
              }
            ],
            "outputs": [
              {
                "localized_name": "IMAGE",
                "name": "IMAGE",
                "type": "IMAGE",
                "links": [
                  298,
                  312
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui-kjnodes",
              "ver": "1.2.0",
              "Node name for S&R": "BatchUncropAdvanced"
            },
            "widgets_values": [
              0.05,
              1,
              true,
              false
            ]
          },
          {
            "id": 59,
            "type": "ResizeMask",
            "pos": [
              2572.2849437050836,
              1081.161678422197
            ],
            "size": [
              270,
              194
            ],
            "flags": {},
            "order": 24,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "link": 156
              },
              {
                "localized_name": "width",
                "name": "width",
                "type": "INT",
                "widget": {
                  "name": "width"
                },
                "link": 164
              },
              {
                "localized_name": "height",
                "name": "height",
                "type": "INT",
                "widget": {
                  "name": "height"
                },
                "link": 163
              }
            ],
            "outputs": [
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "links": [
                  157
                ]
              },
              {
                "localized_name": "width",
                "name": "width",
                "type": "INT",
                "links": null
              },
              {
                "localized_name": "height",
                "name": "height",
                "type": "INT",
                "links": null
              }
            ],
            "properties": {
              "cnr_id": "comfyui-kjnodes",
              "ver": "1.2.0",
              "Node name for S&R": "ResizeMask"
            },
            "widgets_values": [
              512,
              512,
              false,
              "lanczos",
              "disabled"
            ]
          },
          {
            "id": 50,
            "type": "GetImageSize",
            "pos": [
              1813.6251272404902,
              998.6205974127038
            ],
            "size": [
              210,
              136
            ],
            "flags": {},
            "order": 21,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "image",
                "name": "image",
                "type": "IMAGE",
                "link": 141
              }
            ],
            "outputs": [
              {
                "localized_name": "width",
                "name": "width",
                "type": "INT",
                "links": [
                  142,
                  146,
                  158
                ]
              },
              {
                "localized_name": "height",
                "name": "height",
                "type": "INT",
                "links": [
                  143,
                  147,
                  162
                ]
              },
              {
                "localized_name": "batch_size",
                "name": "batch_size",
                "type": "INT",
                "links": null
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "GetImageSize"
            }
          },
          {
            "id": 60,
            "type": "MathExpression|pysssss",
            "pos": [
              2072.6107335825427,
              1067.527914313313
            ],
            "size": [
              210,
              128
            ],
            "flags": {},
            "order": 25,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "a",
                "name": "a",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": 158
              },
              {
                "localized_name": "b",
                "name": "b",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": 159
              },
              {
                "localized_name": "c",
                "name": "c",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": null
              }
            ],
            "outputs": [
              {
                "localized_name": "INT",
                "name": "INT",
                "type": "INT",
                "links": [
                  164
                ]
              },
              {
                "localized_name": "FLOAT",
                "name": "FLOAT",
                "type": "FLOAT",
                "links": null
              }
            ],
            "title": "Calculate Mask Width",
            "properties": {
              "cnr_id": "comfyui-custom-scripts",
              "ver": "1.2.5",
              "Node name for S&R": "MathExpression|pysssss"
            },
            "widgets_values": [
              "a*b"
            ]
          },
          {
            "id": 61,
            "type": "MathExpression|pysssss",
            "pos": [
              2303.8002577595803,
              1066.734955644435
            ],
            "size": [
              210,
              128
            ],
            "flags": {},
            "order": 26,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "a",
                "name": "a",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": 161
              },
              {
                "localized_name": "b",
                "name": "b",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": 162
              },
              {
                "localized_name": "c",
                "name": "c",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": null
              }
            ],
            "outputs": [
              {
                "localized_name": "INT",
                "name": "INT",
                "type": "INT",
                "links": [
                  163
                ]
              },
              {
                "localized_name": "FLOAT",
                "name": "FLOAT",
                "type": "FLOAT",
                "links": null
              }
            ],
            "title": "Calculate Mask Height",
            "properties": {
              "cnr_id": "comfyui-custom-scripts",
              "ver": "1.2.5",
              "Node name for S&R": "MathExpression|pysssss"
            },
            "widgets_values": [
              "a*b"
            ]
          },
          {
            "id": 39,
            "type": "BatchCropFromMaskAdvanced",
            "pos": [
              1425.2952421529274,
              858.6987782381365
            ],
            "size": [
              335.73333740234375,
              242
            ],
            "flags": {},
            "order": 17,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "original_images",
                "name": "original_images",
                "type": "IMAGE",
                "link": 325
              },
              {
                "localized_name": "masks",
                "name": "masks",
                "type": "MASK",
                "link": 338
              }
            ],
            "outputs": [
              {
                "localized_name": "original_images",
                "name": "original_images",
                "type": "IMAGE",
                "links": [
                  108
                ]
              },
              {
                "localized_name": "cropped_images",
                "name": "cropped_images",
                "type": "IMAGE",
                "links": []
              },
              {
                "localized_name": "cropped_masks",
                "name": "cropped_masks",
                "type": "MASK",
                "links": [
                  111
                ]
              },
              {
                "localized_name": "combined_crop_image",
                "name": "combined_crop_image",
                "type": "IMAGE",
                "links": [
                  115,
                  141,
                  149
                ]
              },
              {
                "localized_name": "combined_crop_masks",
                "name": "combined_crop_masks",
                "type": "MASK",
                "links": [
                  112,
                  116,
                  156
                ]
              },
              {
                "localized_name": "bboxes",
                "name": "bboxes",
                "type": "BBOX",
                "links": [
                  113
                ]
              },
              {
                "localized_name": "combined_bounding_box",
                "name": "combined_bounding_box",
                "type": "BBOX",
                "links": [
                  114
                ]
              },
              {
                "localized_name": "bbox_width",
                "name": "bbox_width",
                "type": "INT",
                "links": null
              },
              {
                "localized_name": "bbox_height",
                "name": "bbox_height",
                "type": "INT",
                "links": null
              }
            ],
            "properties": {
              "cnr_id": "comfyui-kjnodes",
              "ver": "1.2.0",
              "Node name for S&R": "BatchCropFromMaskAdvanced"
            },
            "widgets_values": [
              1,
              0.7
            ]
          },
          {
            "id": 107,
            "type": "GetImageRangeFromBatch",
            "pos": [
              1501.5484993150317,
              617.5358016059444
            ],
            "size": [
              316.5806700303996,
              107.10040895641089
            ],
            "flags": {},
            "order": 33,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "images",
                "name": "images",
                "shape": 7,
                "type": "IMAGE",
                "link": null
              },
              {
                "localized_name": "masks",
                "name": "masks",
                "shape": 7,
                "type": "MASK",
                "link": 322
              },
              {
                "localized_name": "start_index",
                "name": "start_index",
                "type": "INT",
                "widget": {
                  "name": "start_index"
                },
                "link": 315
              }
            ],
            "outputs": [
              {
                "localized_name": "IMAGE",
                "name": "IMAGE",
                "type": "IMAGE",
                "links": null
              },
              {
                "localized_name": "MASK",
                "name": "MASK",
                "type": "MASK",
                "links": [
                  335
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui-kjnodes",
              "ver": "1.2.0",
              "Node name for S&R": "GetImageRangeFromBatch"
            },
            "widgets_values": [
              0,
              1
            ]
          },
          {
            "id": 112,
            "type": "GrowMask",
            "pos": [
              1832.6544005369121,
              627.4390507940712
            ],
            "size": [
              270,
              82
            ],
            "flags": {},
            "order": 35,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "link": 335
              },
              {
                "localized_name": "expand",
                "name": "expand",
                "type": "INT",
                "widget": {
                  "name": "expand"
                },
                "link": 337
              }
            ],
            "outputs": [
              {
                "localized_name": "MASK",
                "name": "MASK",
                "type": "MASK",
                "links": [
                  336,
                  338
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "GrowMask"
            },
            "widgets_values": [
              8,
              true
            ]
          },
          {
            "id": 6,
            "type": "KSampler",
            "pos": [
              3523.9707642471685,
              853.891502202401
            ],
            "size": [
              270,
              262
            ],
            "flags": {},
            "order": 6,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "model",
                "name": "model",
                "type": "MODEL",
                "link": 340
              },
              {
                "localized_name": "positive",
                "name": "positive",
                "type": "CONDITIONING",
                "link": 68
              },
              {
                "localized_name": "negative",
                "name": "negative",
                "type": "CONDITIONING",
                "link": 69
              },
              {
                "localized_name": "latent_image",
                "name": "latent_image",
                "type": "LATENT",
                "link": 139
              }
            ],
            "outputs": [
              {
                "localized_name": "LATENT",
                "name": "LATENT",
                "type": "LATENT",
                "links": [
                  127
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "KSampler"
            },
            "widgets_values": [
              971859153974483,
              "randomize",
              32,
              4,
              "dpmpp_3m_sde",
              "karras",
              0.55
            ]
          },
          {
            "id": 7,
            "type": "CheckpointLoaderSimple",
            "pos": [
              2860.415299084029,
              1136.2632126563851
            ],
            "size": [
              270,
              98
            ],
            "flags": {},
            "order": 1,
            "mode": 0,
            "inputs": [],
            "outputs": [
              {
                "localized_name": "MODEL",
                "name": "MODEL",
                "type": "MODEL",
                "links": [
                  339
                ]
              },
              {
                "localized_name": "CLIP",
                "name": "CLIP",
                "type": "CLIP",
                "links": [
                  343
                ]
              },
              {
                "localized_name": "VAE",
                "name": "VAE",
                "type": "VAE",
                "links": null
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "CheckpointLoaderSimple"
            },
            "widgets_values": [
              "tsrmix_v50.safetensors"
            ]
          },
          {
            "id": 114,
            "type": "Lora Loader Stack (rgthree)",
            "pos": [
              3189.15151072557,
              1027.9829828492443
            ],
            "size": [
              282.5333312988281,
              246
            ],
            "flags": {},
            "order": 3,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "model",
                "name": "model",
                "type": "MODEL",
                "link": 339
              },
              {
                "localized_name": "clip",
                "name": "clip",
                "type": "CLIP",
                "link": 343
              }
            ],
            "outputs": [
              {
                "localized_name": "MODEL",
                "name": "MODEL",
                "type": "MODEL",
                "links": [
                  340
                ]
              },
              {
                "localized_name": "CLIP",
                "name": "CLIP",
                "type": "CLIP",
                "links": [
                  341,
                  342
                ]
              }
            ],
            "properties": {
              "cnr_id": "rgthree-comfy",
              "ver": "1.0.2512092137",
              "Node name for S&R": "Lora Loader Stack (rgthree)"
            },
            "widgets_values": [
              "None",
              0.7,
              "None",
              1,
              "None",
              1,
              "None",
              1
            ]
          },
          {
            "id": 20,
            "type": "AILab_QwenVL",
            "pos": [
              2432.2487487972357,
              204.19969826238048
            ],
            "size": [
              382.07647704408555,
              414.29436879390346
            ],
            "flags": {},
            "order": 11,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "image",
                "name": "image",
                "shape": 7,
                "type": "IMAGE",
                "link": 277
              },
              {
                "localized_name": "video",
                "name": "video",
                "shape": 7,
                "type": "IMAGE",
                "link": null
              }
            ],
            "outputs": [
              {
                "localized_name": "RESPONSE",
                "name": "RESPONSE",
                "type": "STRING",
                "links": [
                  39,
                  345
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui-qwenvl",
              "ver": "1.1.0",
              "Node name for S&R": "AILab_QwenVL"
            },
            "widgets_values": [
              "Qwen3-VL-4B-Instruct",
              "8-bit (Balanced)",
              "auto",
              " Simple Description",
              "Write a brief description of the person in the image. Keep it concise. Do not use full sentences, output only a comma delimited list of attributes and attire. Keep the comma delimited list limited to adjectives, nouns, and verbs related to visible attributes like clothing, eye color, skin color, hair color, accessories, facial expressions, etc.\nOnly describe the character in the image, not the setting or background. Do not mention things that are not visible. Rather than saying \"no visible eyes\" or \"no accessories\", omit the detail altogether, only report seen attributes.\nExample:\n\"Red hair, green eyes, smiling, earrings, freckles, black dress, white shoes, bell choker, exposed breasts, pink nipples\"",
              512,
              true,
              3513272145,
              "randomize"
            ],
            "color": "#28403f",
            "bgcolor": "#374539"
          },
          {
            "id": 9,
            "type": "CLIPTextEncode",
            "pos": [
              3350.588827496829,
              409.85080610587534
            ],
            "size": [
              417.5616353840064,
              201.66844311418998
            ],
            "flags": {},
            "order": 7,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "clip",
                "name": "clip",
                "type": "CLIP",
                "link": 342
              },
              {
                "localized_name": "text",
                "name": "text",
                "type": "STRING",
                "widget": {
                  "name": "text"
                },
                "link": 329
              }
            ],
            "outputs": [
              {
                "localized_name": "CONDITIONING",
                "name": "CONDITIONING",
                "type": "CONDITIONING",
                "links": [
                  66
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "CLIPTextEncode"
            },
            "widgets_values": [
              "1girl, green skin, white hair, horns, goblin, gobbo, black gloves"
            ],
            "color": "#232",
            "bgcolor": "#353"
          },
          {
            "id": 10,
            "type": "CLIPTextEncode",
            "pos": [
              2928.7649709235066,
              439.9344677391408
            ],
            "size": [
              407.26808276288466,
              181.17485421542813
            ],
            "flags": {},
            "order": 8,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "clip",
                "name": "clip",
                "type": "CLIP",
                "link": 341
              },
              {
                "localized_name": "text",
                "name": "text",
                "type": "STRING",
                "widget": {
                  "name": "text"
                },
                "link": 330
              }
            ],
            "outputs": [
              {
                "localized_name": "CONDITIONING",
                "name": "CONDITIONING",
                "type": "CONDITIONING",
                "links": [
                  67
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "CLIPTextEncode"
            },
            "widgets_values": [
              "jpeg artifacts, worst quality, low quality, lowres, signature, watermark, artist_name, twitter_username, patreon_logo, letterboxed, censored, shiny skin, realistic, 3d, sweat, tears, crying"
            ],
            "color": "#322",
            "bgcolor": "#533"
          },
          {
            "id": 109,
            "type": "StringConcatenate",
            "pos": [
              3057.4889611511376,
              200.16069497829326
            ],
            "size": [
              400,
              200
            ],
            "flags": {},
            "order": 34,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "string_a",
                "name": "string_a",
                "type": "STRING",
                "widget": {
                  "name": "string_a"
                },
                "link": 346
              },
              {
                "label": "Additional Positive Prompt",
                "localized_name": "string_b",
                "name": "string_b",
                "type": "STRING",
                "widget": {
                  "name": "string_b"
                },
                "link": 327
              }
            ],
            "outputs": [
              {
                "localized_name": "STRING",
                "name": "STRING",
                "type": "STRING",
                "links": [
                  329
                ]
              }
            ],
            "title": "Positive Prompt",
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "StringConcatenate"
            },
            "widgets_values": [
              "",
              "",
              ","
            ],
            "color": "#232",
            "bgcolor": "#353"
          },
          {
            "id": 116,
            "type": "PrimitiveString",
            "pos": [
              2835.716187737121,
              103.40548191767832
            ],
            "size": [
              210,
              58
            ],
            "flags": {},
            "order": 2,
            "mode": 0,
            "inputs": [],
            "outputs": [
              {
                "localized_name": "STRING",
                "name": "STRING",
                "type": "STRING",
                "links": [
                  344
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PrimitiveString"
            },
            "widgets_values": [
              ""
            ]
          },
          {
            "id": 21,
            "type": "PreviewAny",
            "pos": [
              2822.811123892673,
              -86.18859326580142
            ],
            "size": [
              455.4260060591878,
              152.5336774020432
            ],
            "flags": {},
            "order": 12,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "source",
                "name": "source",
                "type": "*",
                "link": 39
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PreviewAny"
            },
            "widgets_values": [
              null,
              null,
              null
            ]
          },
          {
            "id": 19,
            "type": "PreviewImage",
            "pos": [
              2421.5179366542698,
              -99.34277706968813
            ],
            "size": [
              381.4168025949707,
              258.2870322428656
            ],
            "flags": {},
            "order": 10,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "images",
                "name": "images",
                "type": "IMAGE",
                "link": 276
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PreviewImage"
            }
          },
          {
            "id": 115,
            "type": "LazySwitchKJ",
            "pos": [
              2834.405188317967,
              221.39542964117405
            ],
            "size": [
              210,
              83.2439976765998
            ],
            "flags": {},
            "order": 36,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "on_false",
                "name": "on_false",
                "type": "*",
                "link": 344
              },
              {
                "localized_name": "on_true",
                "name": "on_true",
                "type": "*",
                "link": 345
              },
              {
                "localized_name": "switch",
                "name": "switch",
                "type": "BOOLEAN",
                "widget": {
                  "name": "switch"
                },
                "link": 347
              }
            ],
            "outputs": [
              {
                "localized_name": "*",
                "name": "*",
                "type": "*",
                "links": [
                  346
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui-kjnodes",
              "ver": "1.2.0",
              "Node name for S&R": "LazySwitchKJ"
            },
            "widgets_values": [
              true
            ]
          },
          {
            "id": 1,
            "type": "SAM3Segmentation",
            "pos": [
              1009.1766858085575,
              849.1217333818615
            ],
            "size": [
              270,
              262
            ],
            "flags": {},
            "order": 4,
            "mode": 0,
            "inputs": [
              {
                "localized_name": "image",
                "name": "image",
                "type": "IMAGE",
                "link": 1
              }
            ],
            "outputs": [
              {
                "localized_name": "segmented_image",
                "name": "segmented_image",
                "type": "IMAGE",
                "links": [
                  2
                ]
              },
              {
                "localized_name": "masks",
                "name": "masks",
                "type": "MASK",
                "links": [
                  169,
                  203,
                  322
                ]
              },
              {
                "localized_name": "mask_combined",
                "name": "mask_combined",
                "type": "MASK",
                "links": []
              },
              {
                "localized_name": "segs",
                "name": "segs",
                "type": "SEGS",
                "links": null
              }
            ],
            "properties": {
              "cnr_id": "comfyui_sam3",
              "ver": "0.2.0",
              "Node name for S&R": "SAM3Segmentation"
            },
            "widgets_values": [
              "eyes",
              0.7,
              150,
              25,
              false,
              false,
              ""
            ]
          }
        ],
        "groups": [
          {
            "id": 3,
            "title": "1) Get SAM3 Segments",
            "bounding": [
              986.7479357092758,
              773.1496228998027,
              402.288530583436,
              988.8928760324412
            ],
            "color": "#3f789e",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 1,
            "title": "4) Crop and Upscale Segment",
            "bounding": [
              1412.8943023245006,
              776.7753639514098,
              1418.360410864272,
              675.2623839376581
            ],
            "color": "#88A",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 7,
            "title": "2) Loop Images (Open Loop)",
            "bounding": [
              984.6107628267731,
              499.2371067929187,
              1153.3501110261582,
              261.389879633593
            ],
            "color": "#a1309b",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 4,
            "title": "3) Get Prompt for Current Image",
            "bounding": [
              2155.4793559692475,
              -170.10459450129503,
              1622.051559072614,
              798.6970142887212
            ],
            "color": "#8A8",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 5,
            "title": "5) Load Model",
            "bounding": [
              2846.1223201402927,
              1054.2662632546153,
              323.8824939010076,
              317.4622899881054
            ],
            "color": "#3f789e",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 6,
            "title": "6) Inpaint Upscaled Segment",
            "bounding": [
              3182.579888835363,
              759.3431193111942,
              616.8882374244286,
              364.73032999164457
            ],
            "color": "#b58b2a",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 2,
            "title": "7) Downscale and Uncrop",
            "bounding": [
              3815.6957739658505,
              762.4703075559535,
              656.2174961131946,
              641.6682429453456
            ],
            "color": "#88A",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 8,
            "title": "8) Loop Images (Close Loop)",
            "bounding": [
              4494.11310458446,
              753.7780914684754,
              513.7138483927392,
              664.8516158462642
            ],
            "color": "#a1309b",
            "font_size": 24,
            "flags": {}
          }
        ],
        "links": [
          {
            "id": 2,
            "origin_id": 1,
            "origin_slot": 0,
            "target_id": 3,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 169,
            "origin_id": 1,
            "origin_slot": 1,
            "target_id": 22,
            "target_slot": 0,
            "type": "MASK"
          },
          {
            "id": 325,
            "origin_id": 104,
            "origin_slot": 1,
            "target_id": 39,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 116,
            "origin_id": 39,
            "origin_slot": 4,
            "target_id": 42,
            "target_slot": 0,
            "type": "MASK"
          },
          {
            "id": 115,
            "origin_id": 39,
            "origin_slot": 3,
            "target_id": 38,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 141,
            "origin_id": 39,
            "origin_slot": 3,
            "target_id": 50,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 146,
            "origin_id": 50,
            "origin_slot": 0,
            "target_id": 29,
            "target_slot": 0,
            "type": "INT"
          },
          {
            "id": 147,
            "origin_id": 50,
            "origin_slot": 1,
            "target_id": 29,
            "target_slot": 1,
            "type": "INT"
          },
          {
            "id": 306,
            "origin_id": 102,
            "origin_slot": 0,
            "target_id": 29,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 158,
            "origin_id": 50,
            "origin_slot": 0,
            "target_id": 60,
            "target_slot": 0,
            "type": "INT"
          },
          {
            "id": 159,
            "origin_id": 29,
            "origin_slot": 1,
            "target_id": 60,
            "target_slot": 1,
            "type": "FLOAT"
          },
          {
            "id": 161,
            "origin_id": 29,
            "origin_slot": 1,
            "target_id": 61,
            "target_slot": 0,
            "type": "FLOAT"
          },
          {
            "id": 162,
            "origin_id": 50,
            "origin_slot": 1,
            "target_id": 61,
            "target_slot": 1,
            "type": "INT"
          },
          {
            "id": 149,
            "origin_id": 39,
            "origin_slot": 3,
            "target_id": 54,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 148,
            "origin_id": 29,
            "origin_slot": 1,
            "target_id": 54,
            "target_slot": 1,
            "type": "FLOAT"
          },
          {
            "id": 156,
            "origin_id": 39,
            "origin_slot": 4,
            "target_id": 59,
            "target_slot": 0,
            "type": "MASK"
          },
          {
            "id": 164,
            "origin_id": 60,
            "origin_slot": 0,
            "target_id": 59,
            "target_slot": 1,
            "type": "INT"
          },
          {
            "id": 163,
            "origin_id": 61,
            "origin_slot": 0,
            "target_id": 59,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 203,
            "origin_id": 1,
            "origin_slot": 1,
            "target_id": 76,
            "target_slot": 0,
            "type": "MASK"
          },
          {
            "id": 311,
            "origin_id": 76,
            "origin_slot": 3,
            "target_id": 104,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 322,
            "origin_id": 1,
            "origin_slot": 1,
            "target_id": 107,
            "target_slot": 1,
            "type": "MASK"
          },
          {
            "id": 315,
            "origin_id": 104,
            "origin_slot": 4,
            "target_id": 107,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 276,
            "origin_id": 95,
            "origin_slot": 0,
            "target_id": 19,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 39,
            "origin_id": 20,
            "origin_slot": 0,
            "target_id": 21,
            "target_slot": 0,
            "type": "STRING"
          },
          {
            "id": 277,
            "origin_id": 95,
            "origin_slot": 0,
            "target_id": 20,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 320,
            "origin_id": 104,
            "origin_slot": 1,
            "target_id": 95,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 66,
            "origin_id": 9,
            "origin_slot": 0,
            "target_id": 24,
            "target_slot": 0,
            "type": "CONDITIONING"
          },
          {
            "id": 67,
            "origin_id": 10,
            "origin_slot": 0,
            "target_id": 24,
            "target_slot": 1,
            "type": "CONDITIONING"
          },
          {
            "id": 73,
            "origin_id": 5,
            "origin_slot": 0,
            "target_id": 24,
            "target_slot": 2,
            "type": "VAE"
          },
          {
            "id": 150,
            "origin_id": 54,
            "origin_slot": 0,
            "target_id": 24,
            "target_slot": 3,
            "type": "IMAGE"
          },
          {
            "id": 157,
            "origin_id": 59,
            "origin_slot": 0,
            "target_id": 24,
            "target_slot": 4,
            "type": "MASK"
          },
          {
            "id": 68,
            "origin_id": 24,
            "origin_slot": 0,
            "target_id": 6,
            "target_slot": 1,
            "type": "CONDITIONING"
          },
          {
            "id": 69,
            "origin_id": 24,
            "origin_slot": 1,
            "target_id": 6,
            "target_slot": 2,
            "type": "CONDITIONING"
          },
          {
            "id": 139,
            "origin_id": 24,
            "origin_slot": 3,
            "target_id": 6,
            "target_slot": 3,
            "type": "LATENT"
          },
          {
            "id": 127,
            "origin_id": 6,
            "origin_slot": 0,
            "target_id": 11,
            "target_slot": 0,
            "type": "LATENT"
          },
          {
            "id": 13,
            "origin_id": 5,
            "origin_slot": 0,
            "target_id": 11,
            "target_slot": 1,
            "type": "VAE"
          },
          {
            "id": 144,
            "origin_id": 11,
            "origin_slot": 0,
            "target_id": 53,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 142,
            "origin_id": 50,
            "origin_slot": 0,
            "target_id": 53,
            "target_slot": 1,
            "type": "INT"
          },
          {
            "id": 143,
            "origin_id": 50,
            "origin_slot": 1,
            "target_id": 53,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 122,
            "origin_id": 11,
            "origin_slot": 0,
            "target_id": 41,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 108,
            "origin_id": 39,
            "origin_slot": 0,
            "target_id": 40,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 111,
            "origin_id": 39,
            "origin_slot": 2,
            "target_id": 40,
            "target_slot": 2,
            "type": "MASK"
          },
          {
            "id": 112,
            "origin_id": 39,
            "origin_slot": 4,
            "target_id": 40,
            "target_slot": 3,
            "type": "MASK"
          },
          {
            "id": 113,
            "origin_id": 39,
            "origin_slot": 5,
            "target_id": 40,
            "target_slot": 4,
            "type": "BBOX"
          },
          {
            "id": 114,
            "origin_id": 39,
            "origin_slot": 6,
            "target_id": 40,
            "target_slot": 5,
            "type": "BBOX"
          },
          {
            "id": 310,
            "origin_id": 104,
            "origin_slot": 0,
            "target_id": 105,
            "target_slot": 0,
            "type": "FLOW_CONTROL"
          },
          {
            "id": 312,
            "origin_id": 40,
            "origin_slot": 0,
            "target_id": 105,
            "target_slot": 1,
            "type": "IMAGE"
          },
          {
            "id": 308,
            "origin_id": 104,
            "origin_slot": 3,
            "target_id": 105,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 309,
            "origin_id": 104,
            "origin_slot": 2,
            "target_id": 105,
            "target_slot": 3,
            "type": "MASK"
          },
          {
            "id": 298,
            "origin_id": 40,
            "origin_slot": 0,
            "target_id": 99,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 1,
            "origin_id": -10,
            "origin_slot": 0,
            "target_id": 1,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 314,
            "origin_id": -10,
            "origin_slot": 0,
            "target_id": 104,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 313,
            "origin_id": 105,
            "origin_slot": 0,
            "target_id": -20,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 326,
            "origin_id": -10,
            "origin_slot": 1,
            "target_id": 102,
            "target_slot": 0,
            "type": "INT"
          },
          {
            "id": 327,
            "origin_id": -10,
            "origin_slot": 2,
            "target_id": 109,
            "target_slot": 1,
            "type": "STRING"
          },
          {
            "id": 329,
            "origin_id": 109,
            "origin_slot": 0,
            "target_id": 9,
            "target_slot": 1,
            "type": "STRING"
          },
          {
            "id": 330,
            "origin_id": -10,
            "origin_slot": 3,
            "target_id": 10,
            "target_slot": 1,
            "type": "STRING"
          },
          {
            "id": 333,
            "origin_id": 11,
            "origin_slot": 0,
            "target_id": 40,
            "target_slot": 1,
            "type": "IMAGE"
          },
          {
            "id": 335,
            "origin_id": 107,
            "origin_slot": 1,
            "target_id": 112,
            "target_slot": 0,
            "type": "MASK"
          },
          {
            "id": 336,
            "origin_id": 112,
            "origin_slot": 0,
            "target_id": 95,
            "target_slot": 1,
            "type": "MASK"
          },
          {
            "id": 337,
            "origin_id": -10,
            "origin_slot": 4,
            "target_id": 112,
            "target_slot": 1,
            "type": "INT"
          },
          {
            "id": 338,
            "origin_id": 112,
            "origin_slot": 0,
            "target_id": 39,
            "target_slot": 1,
            "type": "MASK"
          },
          {
            "id": 339,
            "origin_id": 7,
            "origin_slot": 0,
            "target_id": 114,
            "target_slot": 0,
            "type": "MODEL"
          },
          {
            "id": 340,
            "origin_id": 114,
            "origin_slot": 0,
            "target_id": 6,
            "target_slot": 0,
            "type": "MODEL"
          },
          {
            "id": 341,
            "origin_id": 114,
            "origin_slot": 1,
            "target_id": 10,
            "target_slot": 0,
            "type": "CLIP"
          },
          {
            "id": 342,
            "origin_id": 114,
            "origin_slot": 1,
            "target_id": 9,
            "target_slot": 0,
            "type": "CLIP"
          },
          {
            "id": 343,
            "origin_id": 7,
            "origin_slot": 1,
            "target_id": 114,
            "target_slot": 1,
            "type": "CLIP"
          },
          {
            "id": 344,
            "origin_id": 116,
            "origin_slot": 0,
            "target_id": 115,
            "target_slot": 0,
            "type": "STRING"
          },
          {
            "id": 345,
            "origin_id": 20,
            "origin_slot": 0,
            "target_id": 115,
            "target_slot": 1,
            "type": "STRING"
          },
          {
            "id": 346,
            "origin_id": 115,
            "origin_slot": 0,
            "target_id": 109,
            "target_slot": 0,
            "type": "STRING"
          },
          {
            "id": 347,
            "origin_id": -10,
            "origin_slot": 5,
            "target_id": 115,
            "target_slot": 2,
            "type": "BOOLEAN"
          }
        ],
        "extra": {
          "workflowRendererVersion": "LG"
        }
      },
      {
        "id": "6cf92dfd-3245-4b41-a365-bb382c9678c0",
        "version": 1,
        "state": {
          "lastGroupId": 8,
          "lastNodeId": 116,
          "lastLinkId": 347,
          "lastRerouteId": 0
        },
        "revision": 0,
        "config": {},
        "name": "Refine by Segment",
        "inputNode": {
          "id": -10,
          "bounding": [
            806.7479357092758,
            831.269798557474,
            186.64999389648438,
            160
          ]
        },
        "outputNode": {
          "id": -20,
          "bounding": [
            5061.558941274414,
            825.0017868546877,
            120,
            60
          ]
        },
        "inputs": [
          {
            "id": "3ef84754-8546-41d6-9bb0-552b1e10fdd5",
            "name": "image",
            "type": "IMAGE",
            "linkIds": [
              1,
              314
            ],
            "localized_name": "image",
            "pos": [
              973.3979296057602,
              851.269798557474
            ]
          },
          {
            "id": "75063a78-ba10-4408-84b5-171cf651b250",
            "name": "value",
            "type": "INT",
            "linkIds": [
              326
            ],
            "label": "segment resolution",
            "pos": [
              973.3979296057602,
              871.269798557474
            ]
          },
          {
            "id": "1c186cb7-c1c9-482c-9931-35d921652a4b",
            "name": "string_b",
            "type": "STRING",
            "linkIds": [
              327
            ],
            "label": "additional positive prompt",
            "pos": [
              973.3979296057602,
              891.269798557474
            ]
          },
          {
            "id": "5b2914f2-e875-4a27-ba6d-bd3a38c8f4ea",
            "name": "text",
            "type": "STRING",
            "linkIds": [
              330
            ],
            "label": "negative prompt",
            "pos": [
              973.3979296057602,
              911.269798557474
            ]
          },
          {
            "id": "f7bb179f-6b28-490e-9a20-6ea22d5bb93f",
            "name": "expand",
            "type": "INT",
            "linkIds": [
              337
            ],
            "label": "grow mask",
            "pos": [
              973.3979296057602,
              931.269798557474
            ]
          },
          {
            "id": "e2f77901-757d-4d71-9910-d06d9206f8c6",
            "name": "switch",
            "type": "BOOLEAN",
            "linkIds": [
              347
            ],
            "label": "enable qwen vl",
            "pos": [
              973.3979296057602,
              951.269798557474
            ]
          }
        ],
        "outputs": [
          {
            "id": "c6709191-676d-4b98-b003-6c50837e5d55",
            "name": "final_image",
            "type": "IMAGE",
            "linkIds": [
              313
            ],
            "localized_name": "final_image",
            "label": "image",
            "pos": [
              5081.558941274414,
              845.0017868546877
            ]
          }
        ],
        "widgets": [],
        "nodes": [
          {
            "id": 3,
            "type": "PreviewImage",
            "pos": [
              997.3463044782231,
              1157.5671448147546
            ],
            "size": [
              367.94708621462905,
              269.2208997041041
            ],
            "flags": {},
            "order": 5,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "images",
                "name": "images",
                "type": "IMAGE",
                "link": 2
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PreviewImage"
            }
          },
          {
            "id": 22,
            "type": "MaskPreview",
            "pos": [
              1004.039409909705,
              1477.6642063668287
            ],
            "size": [
              361.83301408827265,
              260.8052249260261
            ],
            "flags": {},
            "order": 13,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "link": 169
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "MaskPreview"
            }
          },
          {
            "id": 42,
            "type": "MaskPreview",
            "pos": [
              1425.4641944387508,
              1188.2709087883934
            ],
            "size": [
              295.83024464075015,
              258
            ],
            "flags": {},
            "order": 20,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "link": 116
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "MaskPreview"
            }
          },
          {
            "id": 38,
            "type": "PreviewImage",
            "pos": [
              1740.4100611455576,
              1193.4345225910504
            ],
            "size": [
              327.95007004374975,
              246.0000000000001
            ],
            "flags": {},
            "order": 16,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "images",
                "name": "images",
                "type": "IMAGE",
                "link": 115
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PreviewImage"
            }
          },
          {
            "id": 76,
            "type": "GetMaskSizeAndCount",
            "pos": [
              1000.8446941455987,
              583.6148130450025
            ],
            "size": [
              191.26666870117188,
              86
            ],
            "flags": {},
            "order": 27,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "link": 203
              }
            ],
            "outputs": [
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "links": []
              },
              {
                "label": "2048 width",
                "localized_name": "width",
                "name": "width",
                "type": "INT",
                "links": []
              },
              {
                "label": "1512 height",
                "localized_name": "height",
                "name": "height",
                "type": "INT",
                "links": []
              },
              {
                "label": "1 count",
                "localized_name": "count",
                "name": "count",
                "type": "INT",
                "links": [
                  311
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui-kjnodes",
              "ver": "1.2.0",
              "Node name for S&R": "GetMaskSizeAndCount"
            }
          },
          {
            "id": 104,
            "type": "CyberEve_SingleImageLoopOpen",
            "pos": [
              1208.5598474594974,
              577.1900947310097
            ],
            "size": [
              279.09999694824216,
              138
            ],
            "flags": {},
            "order": 31,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "image",
                "name": "image",
                "type": "IMAGE",
                "link": 314
              },
              {
                "localized_name": "mask",
                "name": "mask",
                "shape": 7,
                "type": "MASK",
                "link": null
              },
              {
                "localized_name": "max_iterations",
                "name": "max_iterations",
                "type": "INT",
                "widget": {
                  "name": "max_iterations"
                },
                "link": 311
              }
            ],
            "outputs": [
              {
                "localized_name": "FLOW_CONTROL",
                "name": "FLOW_CONTROL",
                "type": "FLOW_CONTROL",
                "links": [
                  310
                ]
              },
              {
                "localized_name": "current_image",
                "name": "current_image",
                "type": "IMAGE",
                "links": [
                  320,
                  325
                ]
              },
              {
                "localized_name": "current_mask",
                "name": "current_mask",
                "type": "MASK",
                "links": [
                  309
                ]
              },
              {
                "localized_name": "max_iterations",
                "name": "max_iterations",
                "type": "INT",
                "links": [
                  308
                ]
              },
              {
                "localized_name": "iteration_count",
                "name": "iteration_count",
                "type": "INT",
                "links": [
                  315
                ]
              }
            ],
            "properties": {
              "cnr_id": "loop-image",
              "ver": "1.1.0",
              "Node name for S&R": "CyberEve_SingleImageLoopOpen"
            },
            "widgets_values": [
              5
            ]
          },
          {
            "id": 95,
            "type": "ImageCropByMask",
            "pos": [
              2189.6997636201972,
              497.913171284166
            ],
            "size": [
              203.9771500729156,
              58.75102239102739
            ],
            "flags": {},
            "order": 28,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "image",
                "name": "image",
                "type": "IMAGE",
                "link": 320
              },
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "link": 336
              }
            ],
            "outputs": [
              {
                "localized_name": "image",
                "name": "image",
                "type": "IMAGE",
                "links": [
                  276,
                  277
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui-kjnodes",
              "ver": "1.2.0",
              "Node name for S&R": "ImageCropByMask"
            }
          },
          {
            "id": 5,
            "type": "VAELoader",
            "pos": [
              2869.1376306815973,
              1277.7279025585558
            ],
            "size": [
              270,
              58
            ],
            "flags": {},
            "order": 0,
            "mode": 4,
            "inputs": [],
            "outputs": [
              {
                "localized_name": "VAE",
                "name": "VAE",
                "type": "VAE",
                "links": [
                  13,
                  73
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "VAELoader"
            },
            "widgets_values": [
              "sdxl_vae.safetensors"
            ]
          },
          {
            "id": 24,
            "type": "INPAINT_VAEEncodeInpaintConditioning",
            "pos": [
              3204.989081802467,
              862.0903634795793
            ],
            "size": [
              269.81667175292966,
              106
            ],
            "flags": {},
            "order": 14,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "positive",
                "name": "positive",
                "type": "CONDITIONING",
                "link": 66
              },
              {
                "localized_name": "negative",
                "name": "negative",
                "type": "CONDITIONING",
                "link": 67
              },
              {
                "localized_name": "vae",
                "name": "vae",
                "type": "VAE",
                "link": 73
              },
              {
                "localized_name": "pixels",
                "name": "pixels",
                "type": "IMAGE",
                "link": 150
              },
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "link": 157
              }
            ],
            "outputs": [
              {
                "localized_name": "positive",
                "name": "positive",
                "type": "CONDITIONING",
                "links": [
                  68
                ]
              },
              {
                "localized_name": "negative",
                "name": "negative",
                "type": "CONDITIONING",
                "links": [
                  69
                ]
              },
              {
                "localized_name": "latent_inpaint",
                "name": "latent_inpaint",
                "type": "LATENT",
                "links": []
              },
              {
                "localized_name": "latent_samples",
                "name": "latent_samples",
                "type": "LATENT",
                "links": [
                  139
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui-inpaint-nodes",
              "ver": "1.0.4",
              "Node name for S&R": "INPAINT_VAEEncodeInpaintConditioning"
            }
          },
          {
            "id": 105,
            "type": "CyberEve_SingleImageLoopClose",
            "pos": [
              4508.54964615577,
              833.819049291928
            ],
            "size": [
              414.55036922228226,
              159.02858278497422
            ],
            "flags": {},
            "order": 32,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "flow_control",
                "name": "flow_control",
                "type": "FLOW_CONTROL",
                "link": 310
              },
              {
                "localized_name": "current_image",
                "name": "current_image",
                "type": "IMAGE",
                "link": 312
              },
              {
                "localized_name": "max_iterations",
                "name": "max_iterations",
                "type": "INT",
                "link": 308
              },
              {
                "localized_name": "current_mask",
                "name": "current_mask",
                "shape": 7,
                "type": "MASK",
                "link": 309
              }
            ],
            "outputs": [
              {
                "localized_name": "final_image",
                "name": "final_image",
                "type": "IMAGE",
                "links": [
                  313
                ]
              },
              {
                "localized_name": "final_mask",
                "name": "final_mask",
                "type": "MASK",
                "links": null
              }
            ],
            "properties": {
              "cnr_id": "loop-image",
              "ver": "1.1.0",
              "Node name for S&R": "CyberEve_SingleImageLoopClose"
            }
          },
          {
            "id": 53,
            "type": "ImageScale",
            "pos": [
              4049.2486060270935,
              625.2359677646245
            ],
            "size": [
              270,
              130
            ],
            "flags": {},
            "order": 22,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "image",
                "name": "image",
                "type": "IMAGE",
                "link": 144
              },
              {
                "localized_name": "width",
                "name": "width",
                "type": "INT",
                "widget": {
                  "name": "width"
                },
                "link": 142
              },
              {
                "localized_name": "height",
                "name": "height",
                "type": "INT",
                "widget": {
                  "name": "height"
                },
                "link": 143
              }
            ],
            "outputs": [
              {
                "localized_name": "IMAGE",
                "name": "IMAGE",
                "type": "IMAGE",
                "links": []
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "ImageScale"
            },
            "widgets_values": [
              "lanczos",
              1024,
              1024,
              "disabled"
            ]
          },
          {
            "id": 99,
            "type": "PreviewImage",
            "pos": [
              4506.786838095131,
              1035.1818089468713
            ],
            "size": [
              468.3793066029657,
              370.1823772434195
            ],
            "flags": {},
            "order": 29,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "images",
                "name": "images",
                "type": "IMAGE",
                "link": 298
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PreviewImage"
            }
          },
          {
            "id": 29,
            "type": "MathExpression|pysssss",
            "pos": [
              2098.6591001675547,
              889.5500987243666
            ],
            "size": [
              406.17149483725734,
              128
            ],
            "flags": {},
            "order": 15,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "a",
                "name": "a",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": 146
              },
              {
                "localized_name": "b",
                "name": "b",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": 147
              },
              {
                "localized_name": "c",
                "name": "c",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": 306
              }
            ],
            "outputs": [
              {
                "localized_name": "INT",
                "name": "INT",
                "type": "INT",
                "links": null
              },
              {
                "localized_name": "FLOAT",
                "name": "FLOAT",
                "type": "FLOAT",
                "links": [
                  148,
                  159,
                  161
                ]
              }
            ],
            "title": "Calculate Scale Factor",
            "properties": {
              "cnr_id": "comfyui-custom-scripts",
              "ver": "1.2.5",
              "Node name for S&R": "MathExpression|pysssss"
            },
            "widgets_values": [
              "max(c/max(a,b),1)"
            ]
          },
          {
            "id": 11,
            "type": "VAEDecode",
            "pos": [
              3837.735251616675,
              857.2889946015689
            ],
            "size": [
              194.82939628141958,
              74.0522492602613
            ],
            "flags": {},
            "order": 9,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "samples",
                "name": "samples",
                "type": "LATENT",
                "link": 127
              },
              {
                "localized_name": "vae",
                "name": "vae",
                "type": "VAE",
                "link": 13
              }
            ],
            "outputs": [
              {
                "localized_name": "IMAGE",
                "name": "IMAGE",
                "type": "IMAGE",
                "links": [
                  122,
                  144,
                  333
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "VAEDecode"
            }
          },
          {
            "id": 102,
            "type": "PrimitiveInt",
            "pos": [
              1800.473328371718,
              868.2224292241445
            ],
            "size": [
              246.48537637062145,
              82
            ],
            "flags": {},
            "order": 30,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "value",
                "name": "value",
                "type": "INT",
                "widget": {
                  "name": "value"
                },
                "link": 326
              }
            ],
            "outputs": [
              {
                "localized_name": "INT",
                "name": "INT",
                "type": "INT",
                "links": [
                  306
                ]
              }
            ],
            "title": "Intermediate Upscale To",
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PrimitiveInt"
            },
            "widgets_values": [
              204,
              "fixed"
            ]
          },
          {
            "id": 54,
            "type": "ImageScaleBy",
            "pos": [
              2537.0342543301995,
              866.6009321819179
            ],
            "size": [
              270,
              82
            ],
            "flags": {},
            "order": 23,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "image",
                "name": "image",
                "type": "IMAGE",
                "link": 149
              },
              {
                "localized_name": "scale_by",
                "name": "scale_by",
                "type": "FLOAT",
                "widget": {
                  "name": "scale_by"
                },
                "link": 148
              }
            ],
            "outputs": [
              {
                "localized_name": "IMAGE",
                "name": "IMAGE",
                "type": "IMAGE",
                "links": [
                  150
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "ImageScaleBy"
            },
            "widgets_values": [
              "lanczos",
              1
            ]
          },
          {
            "id": 41,
            "type": "PreviewImage",
            "pos": [
              3829.3457930206123,
              1032.6149889451217
            ],
            "size": [
              324.9284450825385,
              355.52444631765525
            ],
            "flags": {},
            "order": 19,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "images",
                "name": "images",
                "type": "IMAGE",
                "link": 122
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PreviewImage"
            }
          },
          {
            "id": 40,
            "type": "BatchUncropAdvanced",
            "pos": [
              4161.771771080975,
              841.2989056169803
            ],
            "size": [
              285.36667251586914,
              230
            ],
            "flags": {},
            "order": 18,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "original_images",
                "name": "original_images",
                "type": "IMAGE",
                "link": 108
              },
              {
                "localized_name": "cropped_images",
                "name": "cropped_images",
                "type": "IMAGE",
                "link": 333
              },
              {
                "localized_name": "cropped_masks",
                "name": "cropped_masks",
                "type": "MASK",
                "link": 111
              },
              {
                "localized_name": "combined_crop_mask",
                "name": "combined_crop_mask",
                "type": "MASK",
                "link": 112
              },
              {
                "localized_name": "bboxes",
                "name": "bboxes",
                "type": "BBOX",
                "link": 113
              },
              {
                "localized_name": "combined_bounding_box",
                "name": "combined_bounding_box",
                "shape": 7,
                "type": "BBOX",
                "link": 114
              }
            ],
            "outputs": [
              {
                "localized_name": "IMAGE",
                "name": "IMAGE",
                "type": "IMAGE",
                "links": [
                  298,
                  312
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui-kjnodes",
              "ver": "1.2.0",
              "Node name for S&R": "BatchUncropAdvanced"
            },
            "widgets_values": [
              0.05,
              1,
              true,
              false
            ]
          },
          {
            "id": 59,
            "type": "ResizeMask",
            "pos": [
              2572.2849437050836,
              1081.161678422197
            ],
            "size": [
              270,
              194
            ],
            "flags": {},
            "order": 24,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "link": 156
              },
              {
                "localized_name": "width",
                "name": "width",
                "type": "INT",
                "widget": {
                  "name": "width"
                },
                "link": 164
              },
              {
                "localized_name": "height",
                "name": "height",
                "type": "INT",
                "widget": {
                  "name": "height"
                },
                "link": 163
              }
            ],
            "outputs": [
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "links": [
                  157
                ]
              },
              {
                "localized_name": "width",
                "name": "width",
                "type": "INT",
                "links": null
              },
              {
                "localized_name": "height",
                "name": "height",
                "type": "INT",
                "links": null
              }
            ],
            "properties": {
              "cnr_id": "comfyui-kjnodes",
              "ver": "1.2.0",
              "Node name for S&R": "ResizeMask"
            },
            "widgets_values": [
              512,
              512,
              false,
              "lanczos",
              "disabled"
            ]
          },
          {
            "id": 50,
            "type": "GetImageSize",
            "pos": [
              1813.6251272404902,
              998.6205974127038
            ],
            "size": [
              210,
              136
            ],
            "flags": {},
            "order": 21,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "image",
                "name": "image",
                "type": "IMAGE",
                "link": 141
              }
            ],
            "outputs": [
              {
                "localized_name": "width",
                "name": "width",
                "type": "INT",
                "links": [
                  142,
                  146,
                  158
                ]
              },
              {
                "localized_name": "height",
                "name": "height",
                "type": "INT",
                "links": [
                  143,
                  147,
                  162
                ]
              },
              {
                "localized_name": "batch_size",
                "name": "batch_size",
                "type": "INT",
                "links": null
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "GetImageSize"
            }
          },
          {
            "id": 60,
            "type": "MathExpression|pysssss",
            "pos": [
              2072.6107335825427,
              1067.527914313313
            ],
            "size": [
              210,
              128
            ],
            "flags": {},
            "order": 25,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "a",
                "name": "a",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": 158
              },
              {
                "localized_name": "b",
                "name": "b",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": 159
              },
              {
                "localized_name": "c",
                "name": "c",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": null
              }
            ],
            "outputs": [
              {
                "localized_name": "INT",
                "name": "INT",
                "type": "INT",
                "links": [
                  164
                ]
              },
              {
                "localized_name": "FLOAT",
                "name": "FLOAT",
                "type": "FLOAT",
                "links": null
              }
            ],
            "title": "Calculate Mask Width",
            "properties": {
              "cnr_id": "comfyui-custom-scripts",
              "ver": "1.2.5",
              "Node name for S&R": "MathExpression|pysssss"
            },
            "widgets_values": [
              "a*b"
            ]
          },
          {
            "id": 61,
            "type": "MathExpression|pysssss",
            "pos": [
              2303.8002577595803,
              1066.734955644435
            ],
            "size": [
              210,
              128
            ],
            "flags": {},
            "order": 26,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "a",
                "name": "a",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": 161
              },
              {
                "localized_name": "b",
                "name": "b",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": 162
              },
              {
                "localized_name": "c",
                "name": "c",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": null
              }
            ],
            "outputs": [
              {
                "localized_name": "INT",
                "name": "INT",
                "type": "INT",
                "links": [
                  163
                ]
              },
              {
                "localized_name": "FLOAT",
                "name": "FLOAT",
                "type": "FLOAT",
                "links": null
              }
            ],
            "title": "Calculate Mask Height",
            "properties": {
              "cnr_id": "comfyui-custom-scripts",
              "ver": "1.2.5",
              "Node name for S&R": "MathExpression|pysssss"
            },
            "widgets_values": [
              "a*b"
            ]
          },
          {
            "id": 39,
            "type": "BatchCropFromMaskAdvanced",
            "pos": [
              1425.2952421529274,
              858.6987782381365
            ],
            "size": [
              335.73333740234375,
              242
            ],
            "flags": {},
            "order": 17,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "original_images",
                "name": "original_images",
                "type": "IMAGE",
                "link": 325
              },
              {
                "localized_name": "masks",
                "name": "masks",
                "type": "MASK",
                "link": 338
              }
            ],
            "outputs": [
              {
                "localized_name": "original_images",
                "name": "original_images",
                "type": "IMAGE",
                "links": [
                  108
                ]
              },
              {
                "localized_name": "cropped_images",
                "name": "cropped_images",
                "type": "IMAGE",
                "links": []
              },
              {
                "localized_name": "cropped_masks",
                "name": "cropped_masks",
                "type": "MASK",
                "links": [
                  111
                ]
              },
              {
                "localized_name": "combined_crop_image",
                "name": "combined_crop_image",
                "type": "IMAGE",
                "links": [
                  115,
                  141,
                  149
                ]
              },
              {
                "localized_name": "combined_crop_masks",
                "name": "combined_crop_masks",
                "type": "MASK",
                "links": [
                  112,
                  116,
                  156
                ]
              },
              {
                "localized_name": "bboxes",
                "name": "bboxes",
                "type": "BBOX",
                "links": [
                  113
                ]
              },
              {
                "localized_name": "combined_bounding_box",
                "name": "combined_bounding_box",
                "type": "BBOX",
                "links": [
                  114
                ]
              },
              {
                "localized_name": "bbox_width",
                "name": "bbox_width",
                "type": "INT",
                "links": null
              },
              {
                "localized_name": "bbox_height",
                "name": "bbox_height",
                "type": "INT",
                "links": null
              }
            ],
            "properties": {
              "cnr_id": "comfyui-kjnodes",
              "ver": "1.2.0",
              "Node name for S&R": "BatchCropFromMaskAdvanced"
            },
            "widgets_values": [
              1,
              0.7
            ]
          },
          {
            "id": 107,
            "type": "GetImageRangeFromBatch",
            "pos": [
              1501.5484993150317,
              617.5358016059444
            ],
            "size": [
              316.5806700303996,
              107.10040895641089
            ],
            "flags": {},
            "order": 33,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "images",
                "name": "images",
                "shape": 7,
                "type": "IMAGE",
                "link": null
              },
              {
                "localized_name": "masks",
                "name": "masks",
                "shape": 7,
                "type": "MASK",
                "link": 322
              },
              {
                "localized_name": "start_index",
                "name": "start_index",
                "type": "INT",
                "widget": {
                  "name": "start_index"
                },
                "link": 315
              }
            ],
            "outputs": [
              {
                "localized_name": "IMAGE",
                "name": "IMAGE",
                "type": "IMAGE",
                "links": null
              },
              {
                "localized_name": "MASK",
                "name": "MASK",
                "type": "MASK",
                "links": [
                  335
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui-kjnodes",
              "ver": "1.2.0",
              "Node name for S&R": "GetImageRangeFromBatch"
            },
            "widgets_values": [
              0,
              1
            ]
          },
          {
            "id": 112,
            "type": "GrowMask",
            "pos": [
              1832.6544005369121,
              627.4390507940712
            ],
            "size": [
              270,
              82
            ],
            "flags": {},
            "order": 35,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "link": 335
              },
              {
                "localized_name": "expand",
                "name": "expand",
                "type": "INT",
                "widget": {
                  "name": "expand"
                },
                "link": 337
              }
            ],
            "outputs": [
              {
                "localized_name": "MASK",
                "name": "MASK",
                "type": "MASK",
                "links": [
                  336,
                  338
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "GrowMask"
            },
            "widgets_values": [
              8,
              true
            ]
          },
          {
            "id": 6,
            "type": "KSampler",
            "pos": [
              3523.9707642471685,
              853.891502202401
            ],
            "size": [
              270,
              262
            ],
            "flags": {},
            "order": 6,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "model",
                "name": "model",
                "type": "MODEL",
                "link": 340
              },
              {
                "localized_name": "positive",
                "name": "positive",
                "type": "CONDITIONING",
                "link": 68
              },
              {
                "localized_name": "negative",
                "name": "negative",
                "type": "CONDITIONING",
                "link": 69
              },
              {
                "localized_name": "latent_image",
                "name": "latent_image",
                "type": "LATENT",
                "link": 139
              }
            ],
            "outputs": [
              {
                "localized_name": "LATENT",
                "name": "LATENT",
                "type": "LATENT",
                "links": [
                  127
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "KSampler"
            },
            "widgets_values": [
              935827975394511,
              "randomize",
              32,
              4,
              "dpmpp_3m_sde",
              "karras",
              0.55
            ]
          },
          {
            "id": 7,
            "type": "CheckpointLoaderSimple",
            "pos": [
              2860.415299084029,
              1136.2632126563851
            ],
            "size": [
              270,
              98
            ],
            "flags": {},
            "order": 1,
            "mode": 4,
            "inputs": [],
            "outputs": [
              {
                "localized_name": "MODEL",
                "name": "MODEL",
                "type": "MODEL",
                "links": [
                  339
                ]
              },
              {
                "localized_name": "CLIP",
                "name": "CLIP",
                "type": "CLIP",
                "links": [
                  343
                ]
              },
              {
                "localized_name": "VAE",
                "name": "VAE",
                "type": "VAE",
                "links": null
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "CheckpointLoaderSimple"
            },
            "widgets_values": [
              "tsrmix_v50.safetensors"
            ]
          },
          {
            "id": 114,
            "type": "Lora Loader Stack (rgthree)",
            "pos": [
              3189.15151072557,
              1027.9829828492443
            ],
            "size": [
              282.5333312988281,
              246
            ],
            "flags": {},
            "order": 3,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "model",
                "name": "model",
                "type": "MODEL",
                "link": 339
              },
              {
                "localized_name": "clip",
                "name": "clip",
                "type": "CLIP",
                "link": 343
              }
            ],
            "outputs": [
              {
                "localized_name": "MODEL",
                "name": "MODEL",
                "type": "MODEL",
                "links": [
                  340
                ]
              },
              {
                "localized_name": "CLIP",
                "name": "CLIP",
                "type": "CLIP",
                "links": [
                  341,
                  342
                ]
              }
            ],
            "properties": {
              "cnr_id": "rgthree-comfy",
              "ver": "1.0.2512092137",
              "Node name for S&R": "Lora Loader Stack (rgthree)"
            },
            "widgets_values": [
              "None",
              0.7,
              "None",
              1,
              "None",
              1,
              "None",
              1
            ]
          },
          {
            "id": 20,
            "type": "AILab_QwenVL",
            "pos": [
              2432.2487487972357,
              204.19969826238048
            ],
            "size": [
              382.07647704408555,
              414.29436879390346
            ],
            "flags": {},
            "order": 11,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "image",
                "name": "image",
                "shape": 7,
                "type": "IMAGE",
                "link": 277
              },
              {
                "localized_name": "video",
                "name": "video",
                "shape": 7,
                "type": "IMAGE",
                "link": null
              }
            ],
            "outputs": [
              {
                "localized_name": "RESPONSE",
                "name": "RESPONSE",
                "type": "STRING",
                "links": [
                  39,
                  345
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui-qwenvl",
              "ver": "1.1.0",
              "Node name for S&R": "AILab_QwenVL"
            },
            "widgets_values": [
              "Qwen3-VL-4B-Instruct",
              "8-bit (Balanced)",
              "auto",
              " Simple Description",
              "Write a brief description of the person in the image. Keep it concise. Do not use full sentences, output only a comma delimited list of attributes and attire. Keep the comma delimited list limited to adjectives, nouns, and verbs related to visible attributes like clothing, eye color, skin color, hair color, accessories, facial expressions, etc.\nOnly describe the character in the image, not the setting or background. Do not mention things that are not visible. Rather than saying \"no visible eyes\" or \"no accessories\", omit the detail altogether, only report seen attributes.\nExample:\n\"Red hair, green eyes, smiling, earrings, freckles, black dress, white shoes, bell choker, exposed breasts, pink nipples\"",
              512,
              true,
              2833853247,
              "randomize"
            ],
            "color": "#28403f",
            "bgcolor": "#374539"
          },
          {
            "id": 9,
            "type": "CLIPTextEncode",
            "pos": [
              3350.588827496829,
              409.85080610587534
            ],
            "size": [
              417.5616353840064,
              201.66844311418998
            ],
            "flags": {},
            "order": 7,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "clip",
                "name": "clip",
                "type": "CLIP",
                "link": 342
              },
              {
                "localized_name": "text",
                "name": "text",
                "type": "STRING",
                "widget": {
                  "name": "text"
                },
                "link": 329
              }
            ],
            "outputs": [
              {
                "localized_name": "CONDITIONING",
                "name": "CONDITIONING",
                "type": "CONDITIONING",
                "links": [
                  66
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "CLIPTextEncode"
            },
            "widgets_values": [
              "1girl, green skin, white hair, horns, goblin, gobbo, black gloves"
            ],
            "color": "#232",
            "bgcolor": "#353"
          },
          {
            "id": 10,
            "type": "CLIPTextEncode",
            "pos": [
              2928.7649709235066,
              439.9344677391408
            ],
            "size": [
              407.26808276288466,
              181.17485421542813
            ],
            "flags": {},
            "order": 8,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "clip",
                "name": "clip",
                "type": "CLIP",
                "link": 341
              },
              {
                "localized_name": "text",
                "name": "text",
                "type": "STRING",
                "widget": {
                  "name": "text"
                },
                "link": 330
              }
            ],
            "outputs": [
              {
                "localized_name": "CONDITIONING",
                "name": "CONDITIONING",
                "type": "CONDITIONING",
                "links": [
                  67
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "CLIPTextEncode"
            },
            "widgets_values": [
              "jpeg artifacts, worst quality, low quality, lowres, signature, watermark, artist_name, twitter_username, patreon_logo, letterboxed, censored, shiny skin, realistic, 3d, sweat"
            ],
            "color": "#322",
            "bgcolor": "#533"
          },
          {
            "id": 109,
            "type": "StringConcatenate",
            "pos": [
              3057.4889611511376,
              200.16069497829326
            ],
            "size": [
              400,
              200
            ],
            "flags": {},
            "order": 34,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "string_a",
                "name": "string_a",
                "type": "STRING",
                "widget": {
                  "name": "string_a"
                },
                "link": 346
              },
              {
                "label": "Additional Positive Prompt",
                "localized_name": "string_b",
                "name": "string_b",
                "type": "STRING",
                "widget": {
                  "name": "string_b"
                },
                "link": 327
              }
            ],
            "outputs": [
              {
                "localized_name": "STRING",
                "name": "STRING",
                "type": "STRING",
                "links": [
                  329
                ]
              }
            ],
            "title": "Positive Prompt",
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "StringConcatenate"
            },
            "widgets_values": [
              "",
              "",
              ","
            ],
            "color": "#232",
            "bgcolor": "#353"
          },
          {
            "id": 116,
            "type": "PrimitiveString",
            "pos": [
              2835.716187737121,
              103.40548191767832
            ],
            "size": [
              210,
              58
            ],
            "flags": {},
            "order": 2,
            "mode": 4,
            "inputs": [],
            "outputs": [
              {
                "localized_name": "STRING",
                "name": "STRING",
                "type": "STRING",
                "links": [
                  344
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PrimitiveString"
            },
            "widgets_values": [
              ""
            ]
          },
          {
            "id": 21,
            "type": "PreviewAny",
            "pos": [
              2822.811123892673,
              -86.18859326580142
            ],
            "size": [
              455.4260060591878,
              152.5336774020432
            ],
            "flags": {},
            "order": 12,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "source",
                "name": "source",
                "type": "*",
                "link": 39
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PreviewAny"
            },
            "widgets_values": [
              null,
              null,
              null
            ]
          },
          {
            "id": 19,
            "type": "PreviewImage",
            "pos": [
              2421.5179366542698,
              -99.34277706968813
            ],
            "size": [
              381.4168025949707,
              258.2870322428656
            ],
            "flags": {},
            "order": 10,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "images",
                "name": "images",
                "type": "IMAGE",
                "link": 276
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PreviewImage"
            }
          },
          {
            "id": 115,
            "type": "LazySwitchKJ",
            "pos": [
              2834.405188317967,
              221.39542964117405
            ],
            "size": [
              210,
              83.2439976765998
            ],
            "flags": {},
            "order": 36,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "on_false",
                "name": "on_false",
                "type": "*",
                "link": 344
              },
              {
                "localized_name": "on_true",
                "name": "on_true",
                "type": "*",
                "link": 345
              },
              {
                "localized_name": "switch",
                "name": "switch",
                "type": "BOOLEAN",
                "widget": {
                  "name": "switch"
                },
                "link": 347
              }
            ],
            "outputs": [
              {
                "localized_name": "*",
                "name": "*",
                "type": "*",
                "links": [
                  346
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui-kjnodes",
              "ver": "1.2.0",
              "Node name for S&R": "LazySwitchKJ"
            },
            "widgets_values": [
              true
            ]
          },
          {
            "id": 1,
            "type": "SAM3Segmentation",
            "pos": [
              1009.1766858085575,
              849.1217333818615
            ],
            "size": [
              270,
              262
            ],
            "flags": {},
            "order": 4,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "image",
                "name": "image",
                "type": "IMAGE",
                "link": 1
              }
            ],
            "outputs": [
              {
                "localized_name": "segmented_image",
                "name": "segmented_image",
                "type": "IMAGE",
                "links": [
                  2
                ]
              },
              {
                "localized_name": "masks",
                "name": "masks",
                "type": "MASK",
                "links": [
                  169,
                  203,
                  322
                ]
              },
              {
                "localized_name": "mask_combined",
                "name": "mask_combined",
                "type": "MASK",
                "links": []
              },
              {
                "localized_name": "segs",
                "name": "segs",
                "type": "SEGS",
                "links": null
              }
            ],
            "properties": {
              "cnr_id": "comfyui_sam3",
              "ver": "0.2.0",
              "Node name for S&R": "SAM3Segmentation"
            },
            "widgets_values": [
              "person",
              0.7,
              150,
              150,
              false,
              false,
              ""
            ]
          }
        ],
        "groups": [
          {
            "id": 3,
            "title": "1) Get SAM3 Segments",
            "bounding": [
              986.7479357092758,
              773.1496228998027,
              402.288530583436,
              988.8928760324412
            ],
            "color": "#3f789e",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 1,
            "title": "4) Crop and Upscale Segment",
            "bounding": [
              1412.8943023245006,
              776.7753639514098,
              1418.360410864272,
              675.2623839376581
            ],
            "color": "#88A",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 7,
            "title": "2) Loop Images (Open Loop)",
            "bounding": [
              984.6107628267731,
              499.2371067929187,
              1153.3501110261582,
              261.389879633593
            ],
            "color": "#a1309b",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 4,
            "title": "3) Get Prompt for Current Image",
            "bounding": [
              2155.4793559692475,
              -170.10459450129503,
              1622.051559072614,
              798.6970142887212
            ],
            "color": "#8A8",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 5,
            "title": "5) Load Model",
            "bounding": [
              2846.1223201402927,
              1054.2662632546153,
              323.8824939010076,
              317.4622899881054
            ],
            "color": "#3f789e",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 6,
            "title": "6) Inpaint Upscaled Segment",
            "bounding": [
              3182.579888835363,
              759.3431193111942,
              616.8882374244286,
              364.73032999164457
            ],
            "color": "#b58b2a",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 2,
            "title": "7) Downscale and Uncrop",
            "bounding": [
              3815.6957739658505,
              762.4703075559535,
              656.2174961131946,
              641.6682429453456
            ],
            "color": "#88A",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 8,
            "title": "8) Loop Images (Close Loop)",
            "bounding": [
              4494.11310458446,
              753.7780914684754,
              513.7138483927392,
              664.8516158462642
            ],
            "color": "#a1309b",
            "font_size": 24,
            "flags": {}
          }
        ],
        "links": [
          {
            "id": 2,
            "origin_id": 1,
            "origin_slot": 0,
            "target_id": 3,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 169,
            "origin_id": 1,
            "origin_slot": 1,
            "target_id": 22,
            "target_slot": 0,
            "type": "MASK"
          },
          {
            "id": 325,
            "origin_id": 104,
            "origin_slot": 1,
            "target_id": 39,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 116,
            "origin_id": 39,
            "origin_slot": 4,
            "target_id": 42,
            "target_slot": 0,
            "type": "MASK"
          },
          {
            "id": 115,
            "origin_id": 39,
            "origin_slot": 3,
            "target_id": 38,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 141,
            "origin_id": 39,
            "origin_slot": 3,
            "target_id": 50,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 146,
            "origin_id": 50,
            "origin_slot": 0,
            "target_id": 29,
            "target_slot": 0,
            "type": "INT"
          },
          {
            "id": 147,
            "origin_id": 50,
            "origin_slot": 1,
            "target_id": 29,
            "target_slot": 1,
            "type": "INT"
          },
          {
            "id": 306,
            "origin_id": 102,
            "origin_slot": 0,
            "target_id": 29,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 158,
            "origin_id": 50,
            "origin_slot": 0,
            "target_id": 60,
            "target_slot": 0,
            "type": "INT"
          },
          {
            "id": 159,
            "origin_id": 29,
            "origin_slot": 1,
            "target_id": 60,
            "target_slot": 1,
            "type": "FLOAT"
          },
          {
            "id": 161,
            "origin_id": 29,
            "origin_slot": 1,
            "target_id": 61,
            "target_slot": 0,
            "type": "FLOAT"
          },
          {
            "id": 162,
            "origin_id": 50,
            "origin_slot": 1,
            "target_id": 61,
            "target_slot": 1,
            "type": "INT"
          },
          {
            "id": 149,
            "origin_id": 39,
            "origin_slot": 3,
            "target_id": 54,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 148,
            "origin_id": 29,
            "origin_slot": 1,
            "target_id": 54,
            "target_slot": 1,
            "type": "FLOAT"
          },
          {
            "id": 156,
            "origin_id": 39,
            "origin_slot": 4,
            "target_id": 59,
            "target_slot": 0,
            "type": "MASK"
          },
          {
            "id": 164,
            "origin_id": 60,
            "origin_slot": 0,
            "target_id": 59,
            "target_slot": 1,
            "type": "INT"
          },
          {
            "id": 163,
            "origin_id": 61,
            "origin_slot": 0,
            "target_id": 59,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 203,
            "origin_id": 1,
            "origin_slot": 1,
            "target_id": 76,
            "target_slot": 0,
            "type": "MASK"
          },
          {
            "id": 311,
            "origin_id": 76,
            "origin_slot": 3,
            "target_id": 104,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 322,
            "origin_id": 1,
            "origin_slot": 1,
            "target_id": 107,
            "target_slot": 1,
            "type": "MASK"
          },
          {
            "id": 315,
            "origin_id": 104,
            "origin_slot": 4,
            "target_id": 107,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 276,
            "origin_id": 95,
            "origin_slot": 0,
            "target_id": 19,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 39,
            "origin_id": 20,
            "origin_slot": 0,
            "target_id": 21,
            "target_slot": 0,
            "type": "STRING"
          },
          {
            "id": 277,
            "origin_id": 95,
            "origin_slot": 0,
            "target_id": 20,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 320,
            "origin_id": 104,
            "origin_slot": 1,
            "target_id": 95,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 66,
            "origin_id": 9,
            "origin_slot": 0,
            "target_id": 24,
            "target_slot": 0,
            "type": "CONDITIONING"
          },
          {
            "id": 67,
            "origin_id": 10,
            "origin_slot": 0,
            "target_id": 24,
            "target_slot": 1,
            "type": "CONDITIONING"
          },
          {
            "id": 73,
            "origin_id": 5,
            "origin_slot": 0,
            "target_id": 24,
            "target_slot": 2,
            "type": "VAE"
          },
          {
            "id": 150,
            "origin_id": 54,
            "origin_slot": 0,
            "target_id": 24,
            "target_slot": 3,
            "type": "IMAGE"
          },
          {
            "id": 157,
            "origin_id": 59,
            "origin_slot": 0,
            "target_id": 24,
            "target_slot": 4,
            "type": "MASK"
          },
          {
            "id": 68,
            "origin_id": 24,
            "origin_slot": 0,
            "target_id": 6,
            "target_slot": 1,
            "type": "CONDITIONING"
          },
          {
            "id": 69,
            "origin_id": 24,
            "origin_slot": 1,
            "target_id": 6,
            "target_slot": 2,
            "type": "CONDITIONING"
          },
          {
            "id": 139,
            "origin_id": 24,
            "origin_slot": 3,
            "target_id": 6,
            "target_slot": 3,
            "type": "LATENT"
          },
          {
            "id": 127,
            "origin_id": 6,
            "origin_slot": 0,
            "target_id": 11,
            "target_slot": 0,
            "type": "LATENT"
          },
          {
            "id": 13,
            "origin_id": 5,
            "origin_slot": 0,
            "target_id": 11,
            "target_slot": 1,
            "type": "VAE"
          },
          {
            "id": 144,
            "origin_id": 11,
            "origin_slot": 0,
            "target_id": 53,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 142,
            "origin_id": 50,
            "origin_slot": 0,
            "target_id": 53,
            "target_slot": 1,
            "type": "INT"
          },
          {
            "id": 143,
            "origin_id": 50,
            "origin_slot": 1,
            "target_id": 53,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 122,
            "origin_id": 11,
            "origin_slot": 0,
            "target_id": 41,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 108,
            "origin_id": 39,
            "origin_slot": 0,
            "target_id": 40,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 111,
            "origin_id": 39,
            "origin_slot": 2,
            "target_id": 40,
            "target_slot": 2,
            "type": "MASK"
          },
          {
            "id": 112,
            "origin_id": 39,
            "origin_slot": 4,
            "target_id": 40,
            "target_slot": 3,
            "type": "MASK"
          },
          {
            "id": 113,
            "origin_id": 39,
            "origin_slot": 5,
            "target_id": 40,
            "target_slot": 4,
            "type": "BBOX"
          },
          {
            "id": 114,
            "origin_id": 39,
            "origin_slot": 6,
            "target_id": 40,
            "target_slot": 5,
            "type": "BBOX"
          },
          {
            "id": 310,
            "origin_id": 104,
            "origin_slot": 0,
            "target_id": 105,
            "target_slot": 0,
            "type": "FLOW_CONTROL"
          },
          {
            "id": 312,
            "origin_id": 40,
            "origin_slot": 0,
            "target_id": 105,
            "target_slot": 1,
            "type": "IMAGE"
          },
          {
            "id": 308,
            "origin_id": 104,
            "origin_slot": 3,
            "target_id": 105,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 309,
            "origin_id": 104,
            "origin_slot": 2,
            "target_id": 105,
            "target_slot": 3,
            "type": "MASK"
          },
          {
            "id": 298,
            "origin_id": 40,
            "origin_slot": 0,
            "target_id": 99,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 1,
            "origin_id": -10,
            "origin_slot": 0,
            "target_id": 1,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 314,
            "origin_id": -10,
            "origin_slot": 0,
            "target_id": 104,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 313,
            "origin_id": 105,
            "origin_slot": 0,
            "target_id": -20,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 326,
            "origin_id": -10,
            "origin_slot": 1,
            "target_id": 102,
            "target_slot": 0,
            "type": "INT"
          },
          {
            "id": 327,
            "origin_id": -10,
            "origin_slot": 2,
            "target_id": 109,
            "target_slot": 1,
            "type": "STRING"
          },
          {
            "id": 329,
            "origin_id": 109,
            "origin_slot": 0,
            "target_id": 9,
            "target_slot": 1,
            "type": "STRING"
          },
          {
            "id": 330,
            "origin_id": -10,
            "origin_slot": 3,
            "target_id": 10,
            "target_slot": 1,
            "type": "STRING"
          },
          {
            "id": 333,
            "origin_id": 11,
            "origin_slot": 0,
            "target_id": 40,
            "target_slot": 1,
            "type": "IMAGE"
          },
          {
            "id": 335,
            "origin_id": 107,
            "origin_slot": 1,
            "target_id": 112,
            "target_slot": 0,
            "type": "MASK"
          },
          {
            "id": 336,
            "origin_id": 112,
            "origin_slot": 0,
            "target_id": 95,
            "target_slot": 1,
            "type": "MASK"
          },
          {
            "id": 337,
            "origin_id": -10,
            "origin_slot": 4,
            "target_id": 112,
            "target_slot": 1,
            "type": "INT"
          },
          {
            "id": 338,
            "origin_id": 112,
            "origin_slot": 0,
            "target_id": 39,
            "target_slot": 1,
            "type": "MASK"
          },
          {
            "id": 339,
            "origin_id": 7,
            "origin_slot": 0,
            "target_id": 114,
            "target_slot": 0,
            "type": "MODEL"
          },
          {
            "id": 340,
            "origin_id": 114,
            "origin_slot": 0,
            "target_id": 6,
            "target_slot": 0,
            "type": "MODEL"
          },
          {
            "id": 341,
            "origin_id": 114,
            "origin_slot": 1,
            "target_id": 10,
            "target_slot": 0,
            "type": "CLIP"
          },
          {
            "id": 342,
            "origin_id": 114,
            "origin_slot": 1,
            "target_id": 9,
            "target_slot": 0,
            "type": "CLIP"
          },
          {
            "id": 343,
            "origin_id": 7,
            "origin_slot": 1,
            "target_id": 114,
            "target_slot": 1,
            "type": "CLIP"
          },
          {
            "id": 344,
            "origin_id": 116,
            "origin_slot": 0,
            "target_id": 115,
            "target_slot": 0,
            "type": "STRING"
          },
          {
            "id": 345,
            "origin_id": 20,
            "origin_slot": 0,
            "target_id": 115,
            "target_slot": 1,
            "type": "STRING"
          },
          {
            "id": 346,
            "origin_id": 115,
            "origin_slot": 0,
            "target_id": 109,
            "target_slot": 0,
            "type": "STRING"
          },
          {
            "id": 347,
            "origin_id": -10,
            "origin_slot": 5,
            "target_id": 115,
            "target_slot": 2,
            "type": "BOOLEAN"
          }
        ],
        "extra": {
          "workflowRendererVersion": "LG"
        }
      },
      {
        "id": "d1358af3-8108-439a-a0f6-02700ea5c123",
        "version": 1,
        "state": {
          "lastGroupId": 8,
          "lastNodeId": 116,
          "lastLinkId": 347,
          "lastRerouteId": 0
        },
        "revision": 0,
        "config": {},
        "name": "Refine by Segment",
        "inputNode": {
          "id": -10,
          "bounding": [
            806.7479357092758,
            831.269798557474,
            186.64999389648438,
            160
          ]
        },
        "outputNode": {
          "id": -20,
          "bounding": [
            5061.558941274414,
            825.0017868546877,
            120,
            60
          ]
        },
        "inputs": [
          {
            "id": "3ef84754-8546-41d6-9bb0-552b1e10fdd5",
            "name": "image",
            "type": "IMAGE",
            "linkIds": [
              1,
              314
            ],
            "localized_name": "image",
            "pos": [
              973.3979296057602,
              851.269798557474
            ]
          },
          {
            "id": "75063a78-ba10-4408-84b5-171cf651b250",
            "name": "value",
            "type": "INT",
            "linkIds": [
              326
            ],
            "label": "segment resolution",
            "pos": [
              973.3979296057602,
              871.269798557474
            ]
          },
          {
            "id": "1c186cb7-c1c9-482c-9931-35d921652a4b",
            "name": "string_b",
            "type": "STRING",
            "linkIds": [
              327
            ],
            "label": "additional positive prompt",
            "pos": [
              973.3979296057602,
              891.269798557474
            ]
          },
          {
            "id": "5b2914f2-e875-4a27-ba6d-bd3a38c8f4ea",
            "name": "text",
            "type": "STRING",
            "linkIds": [
              330
            ],
            "label": "negative prompt",
            "pos": [
              973.3979296057602,
              911.269798557474
            ]
          },
          {
            "id": "f7bb179f-6b28-490e-9a20-6ea22d5bb93f",
            "name": "expand",
            "type": "INT",
            "linkIds": [
              337
            ],
            "label": "grow mask",
            "pos": [
              973.3979296057602,
              931.269798557474
            ]
          },
          {
            "id": "e2f77901-757d-4d71-9910-d06d9206f8c6",
            "name": "switch",
            "type": "BOOLEAN",
            "linkIds": [
              347
            ],
            "label": "enable qwen vl",
            "pos": [
              973.3979296057602,
              951.269798557474
            ]
          }
        ],
        "outputs": [
          {
            "id": "c6709191-676d-4b98-b003-6c50837e5d55",
            "name": "final_image",
            "type": "IMAGE",
            "linkIds": [
              313
            ],
            "localized_name": "final_image",
            "label": "image",
            "pos": [
              5081.558941274414,
              845.0017868546877
            ]
          }
        ],
        "widgets": [],
        "nodes": [
          {
            "id": 3,
            "type": "PreviewImage",
            "pos": [
              997.3463044782231,
              1157.5671448147546
            ],
            "size": [
              367.94708621462905,
              269.2208997041041
            ],
            "flags": {},
            "order": 5,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "images",
                "name": "images",
                "type": "IMAGE",
                "link": 2
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PreviewImage"
            }
          },
          {
            "id": 22,
            "type": "MaskPreview",
            "pos": [
              1004.039409909705,
              1477.6642063668287
            ],
            "size": [
              361.83301408827265,
              260.8052249260261
            ],
            "flags": {},
            "order": 13,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "link": 169
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "MaskPreview"
            }
          },
          {
            "id": 42,
            "type": "MaskPreview",
            "pos": [
              1425.4641944387508,
              1188.2709087883934
            ],
            "size": [
              295.83024464075015,
              258
            ],
            "flags": {},
            "order": 20,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "link": 116
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "MaskPreview"
            }
          },
          {
            "id": 38,
            "type": "PreviewImage",
            "pos": [
              1740.4100611455576,
              1193.4345225910504
            ],
            "size": [
              327.95007004374975,
              246.0000000000001
            ],
            "flags": {},
            "order": 16,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "images",
                "name": "images",
                "type": "IMAGE",
                "link": 115
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PreviewImage"
            }
          },
          {
            "id": 76,
            "type": "GetMaskSizeAndCount",
            "pos": [
              1000.8446941455987,
              583.6148130450025
            ],
            "size": [
              191.26666870117188,
              86
            ],
            "flags": {},
            "order": 27,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "link": 203
              }
            ],
            "outputs": [
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "links": []
              },
              {
                "label": "2048 width",
                "localized_name": "width",
                "name": "width",
                "type": "INT",
                "links": []
              },
              {
                "label": "1512 height",
                "localized_name": "height",
                "name": "height",
                "type": "INT",
                "links": []
              },
              {
                "label": "1 count",
                "localized_name": "count",
                "name": "count",
                "type": "INT",
                "links": [
                  311
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui-kjnodes",
              "ver": "1.2.0",
              "Node name for S&R": "GetMaskSizeAndCount"
            }
          },
          {
            "id": 104,
            "type": "CyberEve_SingleImageLoopOpen",
            "pos": [
              1208.5598474594974,
              577.1900947310097
            ],
            "size": [
              279.09999694824216,
              138
            ],
            "flags": {},
            "order": 31,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "image",
                "name": "image",
                "type": "IMAGE",
                "link": 314
              },
              {
                "localized_name": "mask",
                "name": "mask",
                "shape": 7,
                "type": "MASK",
                "link": null
              },
              {
                "localized_name": "max_iterations",
                "name": "max_iterations",
                "type": "INT",
                "widget": {
                  "name": "max_iterations"
                },
                "link": 311
              }
            ],
            "outputs": [
              {
                "localized_name": "FLOW_CONTROL",
                "name": "FLOW_CONTROL",
                "type": "FLOW_CONTROL",
                "links": [
                  310
                ]
              },
              {
                "localized_name": "current_image",
                "name": "current_image",
                "type": "IMAGE",
                "links": [
                  320,
                  325
                ]
              },
              {
                "localized_name": "current_mask",
                "name": "current_mask",
                "type": "MASK",
                "links": [
                  309
                ]
              },
              {
                "localized_name": "max_iterations",
                "name": "max_iterations",
                "type": "INT",
                "links": [
                  308
                ]
              },
              {
                "localized_name": "iteration_count",
                "name": "iteration_count",
                "type": "INT",
                "links": [
                  315
                ]
              }
            ],
            "properties": {
              "cnr_id": "loop-image",
              "ver": "1.1.0",
              "Node name for S&R": "CyberEve_SingleImageLoopOpen"
            },
            "widgets_values": [
              5
            ]
          },
          {
            "id": 95,
            "type": "ImageCropByMask",
            "pos": [
              2189.6997636201972,
              497.913171284166
            ],
            "size": [
              203.9771500729156,
              58.75102239102739
            ],
            "flags": {},
            "order": 28,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "image",
                "name": "image",
                "type": "IMAGE",
                "link": 320
              },
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "link": 336
              }
            ],
            "outputs": [
              {
                "localized_name": "image",
                "name": "image",
                "type": "IMAGE",
                "links": [
                  276,
                  277
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui-kjnodes",
              "ver": "1.2.0",
              "Node name for S&R": "ImageCropByMask"
            }
          },
          {
            "id": 5,
            "type": "VAELoader",
            "pos": [
              2869.1376306815973,
              1277.7279025585558
            ],
            "size": [
              270,
              58
            ],
            "flags": {},
            "order": 0,
            "mode": 4,
            "inputs": [],
            "outputs": [
              {
                "localized_name": "VAE",
                "name": "VAE",
                "type": "VAE",
                "links": [
                  13,
                  73
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "VAELoader"
            },
            "widgets_values": [
              "sdxl_vae.safetensors"
            ]
          },
          {
            "id": 24,
            "type": "INPAINT_VAEEncodeInpaintConditioning",
            "pos": [
              3204.989081802467,
              862.0903634795793
            ],
            "size": [
              269.81667175292966,
              106
            ],
            "flags": {},
            "order": 14,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "positive",
                "name": "positive",
                "type": "CONDITIONING",
                "link": 66
              },
              {
                "localized_name": "negative",
                "name": "negative",
                "type": "CONDITIONING",
                "link": 67
              },
              {
                "localized_name": "vae",
                "name": "vae",
                "type": "VAE",
                "link": 73
              },
              {
                "localized_name": "pixels",
                "name": "pixels",
                "type": "IMAGE",
                "link": 150
              },
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "link": 157
              }
            ],
            "outputs": [
              {
                "localized_name": "positive",
                "name": "positive",
                "type": "CONDITIONING",
                "links": [
                  68
                ]
              },
              {
                "localized_name": "negative",
                "name": "negative",
                "type": "CONDITIONING",
                "links": [
                  69
                ]
              },
              {
                "localized_name": "latent_inpaint",
                "name": "latent_inpaint",
                "type": "LATENT",
                "links": []
              },
              {
                "localized_name": "latent_samples",
                "name": "latent_samples",
                "type": "LATENT",
                "links": [
                  139
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui-inpaint-nodes",
              "ver": "1.0.4",
              "Node name for S&R": "INPAINT_VAEEncodeInpaintConditioning"
            }
          },
          {
            "id": 105,
            "type": "CyberEve_SingleImageLoopClose",
            "pos": [
              4508.54964615577,
              833.819049291928
            ],
            "size": [
              414.55036922228226,
              159.02858278497422
            ],
            "flags": {},
            "order": 32,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "flow_control",
                "name": "flow_control",
                "type": "FLOW_CONTROL",
                "link": 310
              },
              {
                "localized_name": "current_image",
                "name": "current_image",
                "type": "IMAGE",
                "link": 312
              },
              {
                "localized_name": "max_iterations",
                "name": "max_iterations",
                "type": "INT",
                "link": 308
              },
              {
                "localized_name": "current_mask",
                "name": "current_mask",
                "shape": 7,
                "type": "MASK",
                "link": 309
              }
            ],
            "outputs": [
              {
                "localized_name": "final_image",
                "name": "final_image",
                "type": "IMAGE",
                "links": [
                  313
                ]
              },
              {
                "localized_name": "final_mask",
                "name": "final_mask",
                "type": "MASK",
                "links": null
              }
            ],
            "properties": {
              "cnr_id": "loop-image",
              "ver": "1.1.0",
              "Node name for S&R": "CyberEve_SingleImageLoopClose"
            }
          },
          {
            "id": 53,
            "type": "ImageScale",
            "pos": [
              4049.2486060270935,
              625.2359677646245
            ],
            "size": [
              270,
              130
            ],
            "flags": {},
            "order": 22,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "image",
                "name": "image",
                "type": "IMAGE",
                "link": 144
              },
              {
                "localized_name": "width",
                "name": "width",
                "type": "INT",
                "widget": {
                  "name": "width"
                },
                "link": 142
              },
              {
                "localized_name": "height",
                "name": "height",
                "type": "INT",
                "widget": {
                  "name": "height"
                },
                "link": 143
              }
            ],
            "outputs": [
              {
                "localized_name": "IMAGE",
                "name": "IMAGE",
                "type": "IMAGE",
                "links": []
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "ImageScale"
            },
            "widgets_values": [
              "lanczos",
              1024,
              1024,
              "disabled"
            ]
          },
          {
            "id": 99,
            "type": "PreviewImage",
            "pos": [
              4506.786838095131,
              1035.1818089468713
            ],
            "size": [
              468.3793066029657,
              370.1823772434195
            ],
            "flags": {},
            "order": 29,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "images",
                "name": "images",
                "type": "IMAGE",
                "link": 298
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PreviewImage"
            }
          },
          {
            "id": 29,
            "type": "MathExpression|pysssss",
            "pos": [
              2098.6591001675547,
              889.5500987243666
            ],
            "size": [
              406.17149483725734,
              128
            ],
            "flags": {},
            "order": 15,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "a",
                "name": "a",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": 146
              },
              {
                "localized_name": "b",
                "name": "b",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": 147
              },
              {
                "localized_name": "c",
                "name": "c",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": 306
              }
            ],
            "outputs": [
              {
                "localized_name": "INT",
                "name": "INT",
                "type": "INT",
                "links": null
              },
              {
                "localized_name": "FLOAT",
                "name": "FLOAT",
                "type": "FLOAT",
                "links": [
                  148,
                  159,
                  161
                ]
              }
            ],
            "title": "Calculate Scale Factor",
            "properties": {
              "cnr_id": "comfyui-custom-scripts",
              "ver": "1.2.5",
              "Node name for S&R": "MathExpression|pysssss"
            },
            "widgets_values": [
              "max(c/max(a,b),1)"
            ]
          },
          {
            "id": 11,
            "type": "VAEDecode",
            "pos": [
              3837.735251616675,
              857.2889946015689
            ],
            "size": [
              194.82939628141958,
              74.0522492602613
            ],
            "flags": {},
            "order": 9,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "samples",
                "name": "samples",
                "type": "LATENT",
                "link": 127
              },
              {
                "localized_name": "vae",
                "name": "vae",
                "type": "VAE",
                "link": 13
              }
            ],
            "outputs": [
              {
                "localized_name": "IMAGE",
                "name": "IMAGE",
                "type": "IMAGE",
                "links": [
                  122,
                  144,
                  333
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "VAEDecode"
            }
          },
          {
            "id": 102,
            "type": "PrimitiveInt",
            "pos": [
              1800.473328371718,
              868.2224292241445
            ],
            "size": [
              246.48537637062145,
              82
            ],
            "flags": {},
            "order": 30,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "value",
                "name": "value",
                "type": "INT",
                "widget": {
                  "name": "value"
                },
                "link": 326
              }
            ],
            "outputs": [
              {
                "localized_name": "INT",
                "name": "INT",
                "type": "INT",
                "links": [
                  306
                ]
              }
            ],
            "title": "Intermediate Upscale To",
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PrimitiveInt"
            },
            "widgets_values": [
              1024,
              "fixed"
            ]
          },
          {
            "id": 54,
            "type": "ImageScaleBy",
            "pos": [
              2537.0342543301995,
              866.6009321819179
            ],
            "size": [
              270,
              82
            ],
            "flags": {},
            "order": 23,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "image",
                "name": "image",
                "type": "IMAGE",
                "link": 149
              },
              {
                "localized_name": "scale_by",
                "name": "scale_by",
                "type": "FLOAT",
                "widget": {
                  "name": "scale_by"
                },
                "link": 148
              }
            ],
            "outputs": [
              {
                "localized_name": "IMAGE",
                "name": "IMAGE",
                "type": "IMAGE",
                "links": [
                  150
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "ImageScaleBy"
            },
            "widgets_values": [
              "lanczos",
              1
            ]
          },
          {
            "id": 41,
            "type": "PreviewImage",
            "pos": [
              3829.3457930206123,
              1032.6149889451217
            ],
            "size": [
              324.9284450825385,
              355.52444631765525
            ],
            "flags": {},
            "order": 19,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "images",
                "name": "images",
                "type": "IMAGE",
                "link": 122
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PreviewImage"
            }
          },
          {
            "id": 40,
            "type": "BatchUncropAdvanced",
            "pos": [
              4161.771771080975,
              841.2989056169803
            ],
            "size": [
              285.36667251586914,
              230
            ],
            "flags": {},
            "order": 18,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "original_images",
                "name": "original_images",
                "type": "IMAGE",
                "link": 108
              },
              {
                "localized_name": "cropped_images",
                "name": "cropped_images",
                "type": "IMAGE",
                "link": 333
              },
              {
                "localized_name": "cropped_masks",
                "name": "cropped_masks",
                "type": "MASK",
                "link": 111
              },
              {
                "localized_name": "combined_crop_mask",
                "name": "combined_crop_mask",
                "type": "MASK",
                "link": 112
              },
              {
                "localized_name": "bboxes",
                "name": "bboxes",
                "type": "BBOX",
                "link": 113
              },
              {
                "localized_name": "combined_bounding_box",
                "name": "combined_bounding_box",
                "shape": 7,
                "type": "BBOX",
                "link": 114
              }
            ],
            "outputs": [
              {
                "localized_name": "IMAGE",
                "name": "IMAGE",
                "type": "IMAGE",
                "links": [
                  298,
                  312
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui-kjnodes",
              "ver": "1.2.0",
              "Node name for S&R": "BatchUncropAdvanced"
            },
            "widgets_values": [
              0.05,
              1,
              true,
              false
            ]
          },
          {
            "id": 59,
            "type": "ResizeMask",
            "pos": [
              2572.2849437050836,
              1081.161678422197
            ],
            "size": [
              270,
              194
            ],
            "flags": {},
            "order": 24,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "link": 156
              },
              {
                "localized_name": "width",
                "name": "width",
                "type": "INT",
                "widget": {
                  "name": "width"
                },
                "link": 164
              },
              {
                "localized_name": "height",
                "name": "height",
                "type": "INT",
                "widget": {
                  "name": "height"
                },
                "link": 163
              }
            ],
            "outputs": [
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "links": [
                  157
                ]
              },
              {
                "localized_name": "width",
                "name": "width",
                "type": "INT",
                "links": null
              },
              {
                "localized_name": "height",
                "name": "height",
                "type": "INT",
                "links": null
              }
            ],
            "properties": {
              "cnr_id": "comfyui-kjnodes",
              "ver": "1.2.0",
              "Node name for S&R": "ResizeMask"
            },
            "widgets_values": [
              512,
              512,
              false,
              "lanczos",
              "disabled"
            ]
          },
          {
            "id": 50,
            "type": "GetImageSize",
            "pos": [
              1813.6251272404902,
              998.6205974127038
            ],
            "size": [
              210,
              136
            ],
            "flags": {},
            "order": 21,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "image",
                "name": "image",
                "type": "IMAGE",
                "link": 141
              }
            ],
            "outputs": [
              {
                "localized_name": "width",
                "name": "width",
                "type": "INT",
                "links": [
                  142,
                  146,
                  158
                ]
              },
              {
                "localized_name": "height",
                "name": "height",
                "type": "INT",
                "links": [
                  143,
                  147,
                  162
                ]
              },
              {
                "localized_name": "batch_size",
                "name": "batch_size",
                "type": "INT",
                "links": null
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "GetImageSize"
            }
          },
          {
            "id": 60,
            "type": "MathExpression|pysssss",
            "pos": [
              2072.6107335825427,
              1067.527914313313
            ],
            "size": [
              210,
              128
            ],
            "flags": {},
            "order": 25,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "a",
                "name": "a",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": 158
              },
              {
                "localized_name": "b",
                "name": "b",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": 159
              },
              {
                "localized_name": "c",
                "name": "c",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": null
              }
            ],
            "outputs": [
              {
                "localized_name": "INT",
                "name": "INT",
                "type": "INT",
                "links": [
                  164
                ]
              },
              {
                "localized_name": "FLOAT",
                "name": "FLOAT",
                "type": "FLOAT",
                "links": null
              }
            ],
            "title": "Calculate Mask Width",
            "properties": {
              "cnr_id": "comfyui-custom-scripts",
              "ver": "1.2.5",
              "Node name for S&R": "MathExpression|pysssss"
            },
            "widgets_values": [
              "a*b"
            ]
          },
          {
            "id": 61,
            "type": "MathExpression|pysssss",
            "pos": [
              2303.8002577595803,
              1066.734955644435
            ],
            "size": [
              210,
              128
            ],
            "flags": {},
            "order": 26,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "a",
                "name": "a",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": 161
              },
              {
                "localized_name": "b",
                "name": "b",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": 162
              },
              {
                "localized_name": "c",
                "name": "c",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": null
              }
            ],
            "outputs": [
              {
                "localized_name": "INT",
                "name": "INT",
                "type": "INT",
                "links": [
                  163
                ]
              },
              {
                "localized_name": "FLOAT",
                "name": "FLOAT",
                "type": "FLOAT",
                "links": null
              }
            ],
            "title": "Calculate Mask Height",
            "properties": {
              "cnr_id": "comfyui-custom-scripts",
              "ver": "1.2.5",
              "Node name for S&R": "MathExpression|pysssss"
            },
            "widgets_values": [
              "a*b"
            ]
          },
          {
            "id": 39,
            "type": "BatchCropFromMaskAdvanced",
            "pos": [
              1425.2952421529274,
              858.6987782381365
            ],
            "size": [
              335.73333740234375,
              242
            ],
            "flags": {},
            "order": 17,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "original_images",
                "name": "original_images",
                "type": "IMAGE",
                "link": 325
              },
              {
                "localized_name": "masks",
                "name": "masks",
                "type": "MASK",
                "link": 338
              }
            ],
            "outputs": [
              {
                "localized_name": "original_images",
                "name": "original_images",
                "type": "IMAGE",
                "links": [
                  108
                ]
              },
              {
                "localized_name": "cropped_images",
                "name": "cropped_images",
                "type": "IMAGE",
                "links": []
              },
              {
                "localized_name": "cropped_masks",
                "name": "cropped_masks",
                "type": "MASK",
                "links": [
                  111
                ]
              },
              {
                "localized_name": "combined_crop_image",
                "name": "combined_crop_image",
                "type": "IMAGE",
                "links": [
                  115,
                  141,
                  149
                ]
              },
              {
                "localized_name": "combined_crop_masks",
                "name": "combined_crop_masks",
                "type": "MASK",
                "links": [
                  112,
                  116,
                  156
                ]
              },
              {
                "localized_name": "bboxes",
                "name": "bboxes",
                "type": "BBOX",
                "links": [
                  113
                ]
              },
              {
                "localized_name": "combined_bounding_box",
                "name": "combined_bounding_box",
                "type": "BBOX",
                "links": [
                  114
                ]
              },
              {
                "localized_name": "bbox_width",
                "name": "bbox_width",
                "type": "INT",
                "links": null
              },
              {
                "localized_name": "bbox_height",
                "name": "bbox_height",
                "type": "INT",
                "links": null
              }
            ],
            "properties": {
              "cnr_id": "comfyui-kjnodes",
              "ver": "1.2.0",
              "Node name for S&R": "BatchCropFromMaskAdvanced"
            },
            "widgets_values": [
              1,
              0.7
            ]
          },
          {
            "id": 107,
            "type": "GetImageRangeFromBatch",
            "pos": [
              1501.5484993150317,
              617.5358016059444
            ],
            "size": [
              316.5806700303996,
              107.10040895641089
            ],
            "flags": {},
            "order": 33,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "images",
                "name": "images",
                "shape": 7,
                "type": "IMAGE",
                "link": null
              },
              {
                "localized_name": "masks",
                "name": "masks",
                "shape": 7,
                "type": "MASK",
                "link": 322
              },
              {
                "localized_name": "start_index",
                "name": "start_index",
                "type": "INT",
                "widget": {
                  "name": "start_index"
                },
                "link": 315
              }
            ],
            "outputs": [
              {
                "localized_name": "IMAGE",
                "name": "IMAGE",
                "type": "IMAGE",
                "links": null
              },
              {
                "localized_name": "MASK",
                "name": "MASK",
                "type": "MASK",
                "links": [
                  335
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui-kjnodes",
              "ver": "1.2.0",
              "Node name for S&R": "GetImageRangeFromBatch"
            },
            "widgets_values": [
              0,
              1
            ]
          },
          {
            "id": 112,
            "type": "GrowMask",
            "pos": [
              1832.6544005369121,
              627.4390507940712
            ],
            "size": [
              270,
              82
            ],
            "flags": {},
            "order": 35,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "link": 335
              },
              {
                "localized_name": "expand",
                "name": "expand",
                "type": "INT",
                "widget": {
                  "name": "expand"
                },
                "link": 337
              }
            ],
            "outputs": [
              {
                "localized_name": "MASK",
                "name": "MASK",
                "type": "MASK",
                "links": [
                  336,
                  338
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "GrowMask"
            },
            "widgets_values": [
              8,
              true
            ]
          },
          {
            "id": 6,
            "type": "KSampler",
            "pos": [
              3523.9707642471685,
              853.891502202401
            ],
            "size": [
              270,
              262
            ],
            "flags": {},
            "order": 6,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "model",
                "name": "model",
                "type": "MODEL",
                "link": 340
              },
              {
                "localized_name": "positive",
                "name": "positive",
                "type": "CONDITIONING",
                "link": 68
              },
              {
                "localized_name": "negative",
                "name": "negative",
                "type": "CONDITIONING",
                "link": 69
              },
              {
                "localized_name": "latent_image",
                "name": "latent_image",
                "type": "LATENT",
                "link": 139
              }
            ],
            "outputs": [
              {
                "localized_name": "LATENT",
                "name": "LATENT",
                "type": "LATENT",
                "links": [
                  127
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "KSampler"
            },
            "widgets_values": [
              935827975394511,
              "randomize",
              32,
              4,
              "dpmpp_3m_sde",
              "karras",
              0.55
            ]
          },
          {
            "id": 7,
            "type": "CheckpointLoaderSimple",
            "pos": [
              2860.415299084029,
              1136.2632126563851
            ],
            "size": [
              270,
              98
            ],
            "flags": {},
            "order": 1,
            "mode": 4,
            "inputs": [],
            "outputs": [
              {
                "localized_name": "MODEL",
                "name": "MODEL",
                "type": "MODEL",
                "links": [
                  339
                ]
              },
              {
                "localized_name": "CLIP",
                "name": "CLIP",
                "type": "CLIP",
                "links": [
                  343
                ]
              },
              {
                "localized_name": "VAE",
                "name": "VAE",
                "type": "VAE",
                "links": null
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "CheckpointLoaderSimple"
            },
            "widgets_values": [
              "tsrmix_v50.safetensors"
            ]
          },
          {
            "id": 114,
            "type": "Lora Loader Stack (rgthree)",
            "pos": [
              3189.15151072557,
              1027.9829828492443
            ],
            "size": [
              282.5333312988281,
              246
            ],
            "flags": {},
            "order": 3,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "model",
                "name": "model",
                "type": "MODEL",
                "link": 339
              },
              {
                "localized_name": "clip",
                "name": "clip",
                "type": "CLIP",
                "link": 343
              }
            ],
            "outputs": [
              {
                "localized_name": "MODEL",
                "name": "MODEL",
                "type": "MODEL",
                "links": [
                  340
                ]
              },
              {
                "localized_name": "CLIP",
                "name": "CLIP",
                "type": "CLIP",
                "links": [
                  341,
                  342
                ]
              }
            ],
            "properties": {
              "cnr_id": "rgthree-comfy",
              "ver": "1.0.2512092137",
              "Node name for S&R": "Lora Loader Stack (rgthree)"
            },
            "widgets_values": [
              "None",
              0.7,
              "None",
              1,
              "None",
              1,
              "None",
              1
            ]
          },
          {
            "id": 20,
            "type": "AILab_QwenVL",
            "pos": [
              2432.2487487972357,
              204.19969826238048
            ],
            "size": [
              382.07647704408555,
              414.29436879390346
            ],
            "flags": {},
            "order": 11,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "image",
                "name": "image",
                "shape": 7,
                "type": "IMAGE",
                "link": 277
              },
              {
                "localized_name": "video",
                "name": "video",
                "shape": 7,
                "type": "IMAGE",
                "link": null
              }
            ],
            "outputs": [
              {
                "localized_name": "RESPONSE",
                "name": "RESPONSE",
                "type": "STRING",
                "links": [
                  39,
                  345
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui-qwenvl",
              "ver": "1.1.0",
              "Node name for S&R": "AILab_QwenVL"
            },
            "widgets_values": [
              "Qwen3-VL-4B-Instruct",
              "8-bit (Balanced)",
              "auto",
              " Simple Description",
              "Write a brief description of the person in the image. Keep it concise. Do not use full sentences, output only a comma delimited list of attributes and attire. Keep the comma delimited list limited to adjectives, nouns, and verbs related to visible attributes like clothing, eye color, skin color, hair color, accessories, facial expressions, etc.\nOnly describe the character in the image, not the setting or background. Do not mention things that are not visible. Rather than saying \"no visible eyes\" or \"no accessories\", omit the detail altogether, only report seen attributes.\nExample:\n\"Red hair, green eyes, smiling, earrings, freckles, black dress, white shoes, bell choker, exposed breasts, pink nipples\"",
              512,
              true,
              2833853247,
              "randomize"
            ],
            "color": "#28403f",
            "bgcolor": "#374539"
          },
          {
            "id": 9,
            "type": "CLIPTextEncode",
            "pos": [
              3350.588827496829,
              409.85080610587534
            ],
            "size": [
              417.5616353840064,
              201.66844311418998
            ],
            "flags": {},
            "order": 7,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "clip",
                "name": "clip",
                "type": "CLIP",
                "link": 342
              },
              {
                "localized_name": "text",
                "name": "text",
                "type": "STRING",
                "widget": {
                  "name": "text"
                },
                "link": 329
              }
            ],
            "outputs": [
              {
                "localized_name": "CONDITIONING",
                "name": "CONDITIONING",
                "type": "CONDITIONING",
                "links": [
                  66
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "CLIPTextEncode"
            },
            "widgets_values": [
              "1girl, green skin, white hair, horns, goblin, gobbo, black gloves"
            ],
            "color": "#232",
            "bgcolor": "#353"
          },
          {
            "id": 10,
            "type": "CLIPTextEncode",
            "pos": [
              2928.7649709235066,
              439.9344677391408
            ],
            "size": [
              407.26808276288466,
              181.17485421542813
            ],
            "flags": {},
            "order": 8,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "clip",
                "name": "clip",
                "type": "CLIP",
                "link": 341
              },
              {
                "localized_name": "text",
                "name": "text",
                "type": "STRING",
                "widget": {
                  "name": "text"
                },
                "link": 330
              }
            ],
            "outputs": [
              {
                "localized_name": "CONDITIONING",
                "name": "CONDITIONING",
                "type": "CONDITIONING",
                "links": [
                  67
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "CLIPTextEncode"
            },
            "widgets_values": [
              "jpeg artifacts, worst quality, low quality, lowres, signature, watermark, artist_name, twitter_username, patreon_logo, letterboxed, censored, shiny skin, realistic, 3d, sweat"
            ],
            "color": "#322",
            "bgcolor": "#533"
          },
          {
            "id": 109,
            "type": "StringConcatenate",
            "pos": [
              3057.4889611511376,
              200.16069497829326
            ],
            "size": [
              400,
              200
            ],
            "flags": {},
            "order": 34,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "string_a",
                "name": "string_a",
                "type": "STRING",
                "widget": {
                  "name": "string_a"
                },
                "link": 346
              },
              {
                "label": "Additional Positive Prompt",
                "localized_name": "string_b",
                "name": "string_b",
                "type": "STRING",
                "widget": {
                  "name": "string_b"
                },
                "link": 327
              }
            ],
            "outputs": [
              {
                "localized_name": "STRING",
                "name": "STRING",
                "type": "STRING",
                "links": [
                  329
                ]
              }
            ],
            "title": "Positive Prompt",
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "StringConcatenate"
            },
            "widgets_values": [
              "",
              "",
              ","
            ],
            "color": "#232",
            "bgcolor": "#353"
          },
          {
            "id": 116,
            "type": "PrimitiveString",
            "pos": [
              2835.716187737121,
              103.40548191767832
            ],
            "size": [
              210,
              58
            ],
            "flags": {},
            "order": 2,
            "mode": 4,
            "inputs": [],
            "outputs": [
              {
                "localized_name": "STRING",
                "name": "STRING",
                "type": "STRING",
                "links": [
                  344
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PrimitiveString"
            },
            "widgets_values": [
              ""
            ]
          },
          {
            "id": 21,
            "type": "PreviewAny",
            "pos": [
              2822.811123892673,
              -86.18859326580142
            ],
            "size": [
              455.4260060591878,
              152.5336774020432
            ],
            "flags": {},
            "order": 12,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "source",
                "name": "source",
                "type": "*",
                "link": 39
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PreviewAny"
            },
            "widgets_values": [
              null,
              null,
              null
            ]
          },
          {
            "id": 19,
            "type": "PreviewImage",
            "pos": [
              2421.5179366542698,
              -99.34277706968813
            ],
            "size": [
              381.4168025949707,
              258.2870322428656
            ],
            "flags": {},
            "order": 10,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "images",
                "name": "images",
                "type": "IMAGE",
                "link": 276
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PreviewImage"
            }
          },
          {
            "id": 115,
            "type": "LazySwitchKJ",
            "pos": [
              2834.405188317967,
              221.39542964117405
            ],
            "size": [
              210,
              83.2439976765998
            ],
            "flags": {},
            "order": 36,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "on_false",
                "name": "on_false",
                "type": "*",
                "link": 344
              },
              {
                "localized_name": "on_true",
                "name": "on_true",
                "type": "*",
                "link": 345
              },
              {
                "localized_name": "switch",
                "name": "switch",
                "type": "BOOLEAN",
                "widget": {
                  "name": "switch"
                },
                "link": 347
              }
            ],
            "outputs": [
              {
                "localized_name": "*",
                "name": "*",
                "type": "*",
                "links": [
                  346
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui-kjnodes",
              "ver": "1.2.0",
              "Node name for S&R": "LazySwitchKJ"
            },
            "widgets_values": [
              true
            ]
          },
          {
            "id": 1,
            "type": "SAM3Segmentation",
            "pos": [
              1009.1766858085575,
              849.1217333818615
            ],
            "size": [
              270,
              262
            ],
            "flags": {},
            "order": 4,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "image",
                "name": "image",
                "type": "IMAGE",
                "link": 1
              }
            ],
            "outputs": [
              {
                "localized_name": "segmented_image",
                "name": "segmented_image",
                "type": "IMAGE",
                "links": [
                  2
                ]
              },
              {
                "localized_name": "masks",
                "name": "masks",
                "type": "MASK",
                "links": [
                  169,
                  203,
                  322
                ]
              },
              {
                "localized_name": "mask_combined",
                "name": "mask_combined",
                "type": "MASK",
                "links": []
              },
              {
                "localized_name": "segs",
                "name": "segs",
                "type": "SEGS",
                "links": null
              }
            ],
            "properties": {
              "cnr_id": "comfyui_sam3",
              "ver": "0.2.0",
              "Node name for S&R": "SAM3Segmentation"
            },
            "widgets_values": [
              "necklace",
              0.7,
              150,
              150,
              false,
              false,
              ""
            ]
          }
        ],
        "groups": [
          {
            "id": 3,
            "title": "1) Get SAM3 Segments",
            "bounding": [
              986.7479357092758,
              773.1496228998027,
              402.288530583436,
              988.8928760324412
            ],
            "color": "#3f789e",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 1,
            "title": "4) Crop and Upscale Segment",
            "bounding": [
              1412.8943023245006,
              776.7753639514098,
              1418.360410864272,
              675.2623839376581
            ],
            "color": "#88A",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 7,
            "title": "2) Loop Images (Open Loop)",
            "bounding": [
              984.6107628267731,
              499.2371067929187,
              1153.3501110261582,
              261.389879633593
            ],
            "color": "#a1309b",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 4,
            "title": "3) Get Prompt for Current Image",
            "bounding": [
              2155.4793559692475,
              -170.10459450129503,
              1622.051559072614,
              798.6970142887212
            ],
            "color": "#8A8",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 5,
            "title": "5) Load Model",
            "bounding": [
              2846.1223201402927,
              1054.2662632546153,
              323.8824939010076,
              317.4622899881054
            ],
            "color": "#3f789e",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 6,
            "title": "6) Inpaint Upscaled Segment",
            "bounding": [
              3182.579888835363,
              759.3431193111942,
              616.8882374244286,
              364.73032999164457
            ],
            "color": "#b58b2a",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 2,
            "title": "7) Downscale and Uncrop",
            "bounding": [
              3815.6957739658505,
              762.4703075559535,
              656.2174961131946,
              641.6682429453456
            ],
            "color": "#88A",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 8,
            "title": "8) Loop Images (Close Loop)",
            "bounding": [
              4494.11310458446,
              753.7780914684754,
              513.7138483927392,
              664.8516158462642
            ],
            "color": "#a1309b",
            "font_size": 24,
            "flags": {}
          }
        ],
        "links": [
          {
            "id": 2,
            "origin_id": 1,
            "origin_slot": 0,
            "target_id": 3,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 169,
            "origin_id": 1,
            "origin_slot": 1,
            "target_id": 22,
            "target_slot": 0,
            "type": "MASK"
          },
          {
            "id": 325,
            "origin_id": 104,
            "origin_slot": 1,
            "target_id": 39,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 116,
            "origin_id": 39,
            "origin_slot": 4,
            "target_id": 42,
            "target_slot": 0,
            "type": "MASK"
          },
          {
            "id": 115,
            "origin_id": 39,
            "origin_slot": 3,
            "target_id": 38,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 141,
            "origin_id": 39,
            "origin_slot": 3,
            "target_id": 50,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 146,
            "origin_id": 50,
            "origin_slot": 0,
            "target_id": 29,
            "target_slot": 0,
            "type": "INT"
          },
          {
            "id": 147,
            "origin_id": 50,
            "origin_slot": 1,
            "target_id": 29,
            "target_slot": 1,
            "type": "INT"
          },
          {
            "id": 306,
            "origin_id": 102,
            "origin_slot": 0,
            "target_id": 29,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 158,
            "origin_id": 50,
            "origin_slot": 0,
            "target_id": 60,
            "target_slot": 0,
            "type": "INT"
          },
          {
            "id": 159,
            "origin_id": 29,
            "origin_slot": 1,
            "target_id": 60,
            "target_slot": 1,
            "type": "FLOAT"
          },
          {
            "id": 161,
            "origin_id": 29,
            "origin_slot": 1,
            "target_id": 61,
            "target_slot": 0,
            "type": "FLOAT"
          },
          {
            "id": 162,
            "origin_id": 50,
            "origin_slot": 1,
            "target_id": 61,
            "target_slot": 1,
            "type": "INT"
          },
          {
            "id": 149,
            "origin_id": 39,
            "origin_slot": 3,
            "target_id": 54,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 148,
            "origin_id": 29,
            "origin_slot": 1,
            "target_id": 54,
            "target_slot": 1,
            "type": "FLOAT"
          },
          {
            "id": 156,
            "origin_id": 39,
            "origin_slot": 4,
            "target_id": 59,
            "target_slot": 0,
            "type": "MASK"
          },
          {
            "id": 164,
            "origin_id": 60,
            "origin_slot": 0,
            "target_id": 59,
            "target_slot": 1,
            "type": "INT"
          },
          {
            "id": 163,
            "origin_id": 61,
            "origin_slot": 0,
            "target_id": 59,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 203,
            "origin_id": 1,
            "origin_slot": 1,
            "target_id": 76,
            "target_slot": 0,
            "type": "MASK"
          },
          {
            "id": 311,
            "origin_id": 76,
            "origin_slot": 3,
            "target_id": 104,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 322,
            "origin_id": 1,
            "origin_slot": 1,
            "target_id": 107,
            "target_slot": 1,
            "type": "MASK"
          },
          {
            "id": 315,
            "origin_id": 104,
            "origin_slot": 4,
            "target_id": 107,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 276,
            "origin_id": 95,
            "origin_slot": 0,
            "target_id": 19,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 39,
            "origin_id": 20,
            "origin_slot": 0,
            "target_id": 21,
            "target_slot": 0,
            "type": "STRING"
          },
          {
            "id": 277,
            "origin_id": 95,
            "origin_slot": 0,
            "target_id": 20,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 320,
            "origin_id": 104,
            "origin_slot": 1,
            "target_id": 95,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 66,
            "origin_id": 9,
            "origin_slot": 0,
            "target_id": 24,
            "target_slot": 0,
            "type": "CONDITIONING"
          },
          {
            "id": 67,
            "origin_id": 10,
            "origin_slot": 0,
            "target_id": 24,
            "target_slot": 1,
            "type": "CONDITIONING"
          },
          {
            "id": 73,
            "origin_id": 5,
            "origin_slot": 0,
            "target_id": 24,
            "target_slot": 2,
            "type": "VAE"
          },
          {
            "id": 150,
            "origin_id": 54,
            "origin_slot": 0,
            "target_id": 24,
            "target_slot": 3,
            "type": "IMAGE"
          },
          {
            "id": 157,
            "origin_id": 59,
            "origin_slot": 0,
            "target_id": 24,
            "target_slot": 4,
            "type": "MASK"
          },
          {
            "id": 68,
            "origin_id": 24,
            "origin_slot": 0,
            "target_id": 6,
            "target_slot": 1,
            "type": "CONDITIONING"
          },
          {
            "id": 69,
            "origin_id": 24,
            "origin_slot": 1,
            "target_id": 6,
            "target_slot": 2,
            "type": "CONDITIONING"
          },
          {
            "id": 139,
            "origin_id": 24,
            "origin_slot": 3,
            "target_id": 6,
            "target_slot": 3,
            "type": "LATENT"
          },
          {
            "id": 127,
            "origin_id": 6,
            "origin_slot": 0,
            "target_id": 11,
            "target_slot": 0,
            "type": "LATENT"
          },
          {
            "id": 13,
            "origin_id": 5,
            "origin_slot": 0,
            "target_id": 11,
            "target_slot": 1,
            "type": "VAE"
          },
          {
            "id": 144,
            "origin_id": 11,
            "origin_slot": 0,
            "target_id": 53,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 142,
            "origin_id": 50,
            "origin_slot": 0,
            "target_id": 53,
            "target_slot": 1,
            "type": "INT"
          },
          {
            "id": 143,
            "origin_id": 50,
            "origin_slot": 1,
            "target_id": 53,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 122,
            "origin_id": 11,
            "origin_slot": 0,
            "target_id": 41,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 108,
            "origin_id": 39,
            "origin_slot": 0,
            "target_id": 40,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 111,
            "origin_id": 39,
            "origin_slot": 2,
            "target_id": 40,
            "target_slot": 2,
            "type": "MASK"
          },
          {
            "id": 112,
            "origin_id": 39,
            "origin_slot": 4,
            "target_id": 40,
            "target_slot": 3,
            "type": "MASK"
          },
          {
            "id": 113,
            "origin_id": 39,
            "origin_slot": 5,
            "target_id": 40,
            "target_slot": 4,
            "type": "BBOX"
          },
          {
            "id": 114,
            "origin_id": 39,
            "origin_slot": 6,
            "target_id": 40,
            "target_slot": 5,
            "type": "BBOX"
          },
          {
            "id": 310,
            "origin_id": 104,
            "origin_slot": 0,
            "target_id": 105,
            "target_slot": 0,
            "type": "FLOW_CONTROL"
          },
          {
            "id": 312,
            "origin_id": 40,
            "origin_slot": 0,
            "target_id": 105,
            "target_slot": 1,
            "type": "IMAGE"
          },
          {
            "id": 308,
            "origin_id": 104,
            "origin_slot": 3,
            "target_id": 105,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 309,
            "origin_id": 104,
            "origin_slot": 2,
            "target_id": 105,
            "target_slot": 3,
            "type": "MASK"
          },
          {
            "id": 298,
            "origin_id": 40,
            "origin_slot": 0,
            "target_id": 99,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 1,
            "origin_id": -10,
            "origin_slot": 0,
            "target_id": 1,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 314,
            "origin_id": -10,
            "origin_slot": 0,
            "target_id": 104,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 313,
            "origin_id": 105,
            "origin_slot": 0,
            "target_id": -20,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 326,
            "origin_id": -10,
            "origin_slot": 1,
            "target_id": 102,
            "target_slot": 0,
            "type": "INT"
          },
          {
            "id": 327,
            "origin_id": -10,
            "origin_slot": 2,
            "target_id": 109,
            "target_slot": 1,
            "type": "STRING"
          },
          {
            "id": 329,
            "origin_id": 109,
            "origin_slot": 0,
            "target_id": 9,
            "target_slot": 1,
            "type": "STRING"
          },
          {
            "id": 330,
            "origin_id": -10,
            "origin_slot": 3,
            "target_id": 10,
            "target_slot": 1,
            "type": "STRING"
          },
          {
            "id": 333,
            "origin_id": 11,
            "origin_slot": 0,
            "target_id": 40,
            "target_slot": 1,
            "type": "IMAGE"
          },
          {
            "id": 335,
            "origin_id": 107,
            "origin_slot": 1,
            "target_id": 112,
            "target_slot": 0,
            "type": "MASK"
          },
          {
            "id": 336,
            "origin_id": 112,
            "origin_slot": 0,
            "target_id": 95,
            "target_slot": 1,
            "type": "MASK"
          },
          {
            "id": 337,
            "origin_id": -10,
            "origin_slot": 4,
            "target_id": 112,
            "target_slot": 1,
            "type": "INT"
          },
          {
            "id": 338,
            "origin_id": 112,
            "origin_slot": 0,
            "target_id": 39,
            "target_slot": 1,
            "type": "MASK"
          },
          {
            "id": 339,
            "origin_id": 7,
            "origin_slot": 0,
            "target_id": 114,
            "target_slot": 0,
            "type": "MODEL"
          },
          {
            "id": 340,
            "origin_id": 114,
            "origin_slot": 0,
            "target_id": 6,
            "target_slot": 0,
            "type": "MODEL"
          },
          {
            "id": 341,
            "origin_id": 114,
            "origin_slot": 1,
            "target_id": 10,
            "target_slot": 0,
            "type": "CLIP"
          },
          {
            "id": 342,
            "origin_id": 114,
            "origin_slot": 1,
            "target_id": 9,
            "target_slot": 0,
            "type": "CLIP"
          },
          {
            "id": 343,
            "origin_id": 7,
            "origin_slot": 1,
            "target_id": 114,
            "target_slot": 1,
            "type": "CLIP"
          },
          {
            "id": 344,
            "origin_id": 116,
            "origin_slot": 0,
            "target_id": 115,
            "target_slot": 0,
            "type": "STRING"
          },
          {
            "id": 345,
            "origin_id": 20,
            "origin_slot": 0,
            "target_id": 115,
            "target_slot": 1,
            "type": "STRING"
          },
          {
            "id": 346,
            "origin_id": 115,
            "origin_slot": 0,
            "target_id": 109,
            "target_slot": 0,
            "type": "STRING"
          },
          {
            "id": 347,
            "origin_id": -10,
            "origin_slot": 5,
            "target_id": 115,
            "target_slot": 2,
            "type": "BOOLEAN"
          }
        ],
        "extra": {
          "workflowRendererVersion": "LG"
        }
      },
      {
        "id": "c5c0a3c2-5ea1-462e-b5b3-54ed4c201652",
        "version": 1,
        "state": {
          "lastGroupId": 8,
          "lastNodeId": 116,
          "lastLinkId": 347,
          "lastRerouteId": 0
        },
        "revision": 0,
        "config": {},
        "name": "Refine by Segment",
        "inputNode": {
          "id": -10,
          "bounding": [
            806.7479357092758,
            831.269798557474,
            186.64999389648438,
            160
          ]
        },
        "outputNode": {
          "id": -20,
          "bounding": [
            5061.558941274414,
            825.0017868546877,
            120,
            60
          ]
        },
        "inputs": [
          {
            "id": "3ef84754-8546-41d6-9bb0-552b1e10fdd5",
            "name": "image",
            "type": "IMAGE",
            "linkIds": [
              1,
              314
            ],
            "localized_name": "image",
            "pos": [
              973.3979296057602,
              851.269798557474
            ]
          },
          {
            "id": "75063a78-ba10-4408-84b5-171cf651b250",
            "name": "value",
            "type": "INT",
            "linkIds": [
              326
            ],
            "label": "segment resolution",
            "pos": [
              973.3979296057602,
              871.269798557474
            ]
          },
          {
            "id": "1c186cb7-c1c9-482c-9931-35d921652a4b",
            "name": "string_b",
            "type": "STRING",
            "linkIds": [
              327
            ],
            "label": "additional positive prompt",
            "pos": [
              973.3979296057602,
              891.269798557474
            ]
          },
          {
            "id": "5b2914f2-e875-4a27-ba6d-bd3a38c8f4ea",
            "name": "text",
            "type": "STRING",
            "linkIds": [
              330
            ],
            "label": "negative prompt",
            "pos": [
              973.3979296057602,
              911.269798557474
            ]
          },
          {
            "id": "f7bb179f-6b28-490e-9a20-6ea22d5bb93f",
            "name": "expand",
            "type": "INT",
            "linkIds": [
              337
            ],
            "label": "grow mask",
            "pos": [
              973.3979296057602,
              931.269798557474
            ]
          },
          {
            "id": "e2f77901-757d-4d71-9910-d06d9206f8c6",
            "name": "switch",
            "type": "BOOLEAN",
            "linkIds": [
              347
            ],
            "label": "enable qwen vl",
            "pos": [
              973.3979296057602,
              951.269798557474
            ]
          }
        ],
        "outputs": [
          {
            "id": "c6709191-676d-4b98-b003-6c50837e5d55",
            "name": "final_image",
            "type": "IMAGE",
            "linkIds": [
              313
            ],
            "localized_name": "final_image",
            "label": "image",
            "pos": [
              5081.558941274414,
              845.0017868546877
            ]
          }
        ],
        "widgets": [],
        "nodes": [
          {
            "id": 3,
            "type": "PreviewImage",
            "pos": [
              997.3463044782231,
              1157.5671448147546
            ],
            "size": [
              367.94708621462905,
              269.2208997041041
            ],
            "flags": {},
            "order": 5,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "images",
                "name": "images",
                "type": "IMAGE",
                "link": 2
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PreviewImage"
            }
          },
          {
            "id": 22,
            "type": "MaskPreview",
            "pos": [
              1004.039409909705,
              1477.6642063668287
            ],
            "size": [
              361.83301408827265,
              260.8052249260261
            ],
            "flags": {},
            "order": 13,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "link": 169
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "MaskPreview"
            }
          },
          {
            "id": 42,
            "type": "MaskPreview",
            "pos": [
              1425.4641944387508,
              1188.2709087883934
            ],
            "size": [
              295.83024464075015,
              258
            ],
            "flags": {},
            "order": 20,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "link": 116
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "MaskPreview"
            }
          },
          {
            "id": 38,
            "type": "PreviewImage",
            "pos": [
              1740.4100611455576,
              1193.4345225910504
            ],
            "size": [
              327.95007004374975,
              246.0000000000001
            ],
            "flags": {},
            "order": 16,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "images",
                "name": "images",
                "type": "IMAGE",
                "link": 115
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PreviewImage"
            }
          },
          {
            "id": 76,
            "type": "GetMaskSizeAndCount",
            "pos": [
              1000.8446941455987,
              583.6148130450025
            ],
            "size": [
              191.26666870117188,
              86
            ],
            "flags": {},
            "order": 27,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "link": 203
              }
            ],
            "outputs": [
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "links": []
              },
              {
                "label": "2048 width",
                "localized_name": "width",
                "name": "width",
                "type": "INT",
                "links": []
              },
              {
                "label": "1512 height",
                "localized_name": "height",
                "name": "height",
                "type": "INT",
                "links": []
              },
              {
                "label": "1 count",
                "localized_name": "count",
                "name": "count",
                "type": "INT",
                "links": [
                  311
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui-kjnodes",
              "ver": "1.2.0",
              "Node name for S&R": "GetMaskSizeAndCount"
            }
          },
          {
            "id": 104,
            "type": "CyberEve_SingleImageLoopOpen",
            "pos": [
              1208.5598474594974,
              577.1900947310097
            ],
            "size": [
              279.09999694824216,
              138
            ],
            "flags": {},
            "order": 31,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "image",
                "name": "image",
                "type": "IMAGE",
                "link": 314
              },
              {
                "localized_name": "mask",
                "name": "mask",
                "shape": 7,
                "type": "MASK",
                "link": null
              },
              {
                "localized_name": "max_iterations",
                "name": "max_iterations",
                "type": "INT",
                "widget": {
                  "name": "max_iterations"
                },
                "link": 311
              }
            ],
            "outputs": [
              {
                "localized_name": "FLOW_CONTROL",
                "name": "FLOW_CONTROL",
                "type": "FLOW_CONTROL",
                "links": [
                  310
                ]
              },
              {
                "localized_name": "current_image",
                "name": "current_image",
                "type": "IMAGE",
                "links": [
                  320,
                  325
                ]
              },
              {
                "localized_name": "current_mask",
                "name": "current_mask",
                "type": "MASK",
                "links": [
                  309
                ]
              },
              {
                "localized_name": "max_iterations",
                "name": "max_iterations",
                "type": "INT",
                "links": [
                  308
                ]
              },
              {
                "localized_name": "iteration_count",
                "name": "iteration_count",
                "type": "INT",
                "links": [
                  315
                ]
              }
            ],
            "properties": {
              "cnr_id": "loop-image",
              "ver": "1.1.0",
              "Node name for S&R": "CyberEve_SingleImageLoopOpen"
            },
            "widgets_values": [
              5
            ]
          },
          {
            "id": 95,
            "type": "ImageCropByMask",
            "pos": [
              2189.6997636201972,
              497.913171284166
            ],
            "size": [
              203.9771500729156,
              58.75102239102739
            ],
            "flags": {},
            "order": 28,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "image",
                "name": "image",
                "type": "IMAGE",
                "link": 320
              },
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "link": 336
              }
            ],
            "outputs": [
              {
                "localized_name": "image",
                "name": "image",
                "type": "IMAGE",
                "links": [
                  276,
                  277
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui-kjnodes",
              "ver": "1.2.0",
              "Node name for S&R": "ImageCropByMask"
            }
          },
          {
            "id": 5,
            "type": "VAELoader",
            "pos": [
              2869.1376306815973,
              1277.7279025585558
            ],
            "size": [
              270,
              58
            ],
            "flags": {},
            "order": 0,
            "mode": 4,
            "inputs": [],
            "outputs": [
              {
                "localized_name": "VAE",
                "name": "VAE",
                "type": "VAE",
                "links": [
                  13,
                  73
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "VAELoader"
            },
            "widgets_values": [
              "sdxl_vae.safetensors"
            ]
          },
          {
            "id": 24,
            "type": "INPAINT_VAEEncodeInpaintConditioning",
            "pos": [
              3204.989081802467,
              862.0903634795793
            ],
            "size": [
              269.81667175292966,
              106
            ],
            "flags": {},
            "order": 14,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "positive",
                "name": "positive",
                "type": "CONDITIONING",
                "link": 66
              },
              {
                "localized_name": "negative",
                "name": "negative",
                "type": "CONDITIONING",
                "link": 67
              },
              {
                "localized_name": "vae",
                "name": "vae",
                "type": "VAE",
                "link": 73
              },
              {
                "localized_name": "pixels",
                "name": "pixels",
                "type": "IMAGE",
                "link": 150
              },
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "link": 157
              }
            ],
            "outputs": [
              {
                "localized_name": "positive",
                "name": "positive",
                "type": "CONDITIONING",
                "links": [
                  68
                ]
              },
              {
                "localized_name": "negative",
                "name": "negative",
                "type": "CONDITIONING",
                "links": [
                  69
                ]
              },
              {
                "localized_name": "latent_inpaint",
                "name": "latent_inpaint",
                "type": "LATENT",
                "links": []
              },
              {
                "localized_name": "latent_samples",
                "name": "latent_samples",
                "type": "LATENT",
                "links": [
                  139
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui-inpaint-nodes",
              "ver": "1.0.4",
              "Node name for S&R": "INPAINT_VAEEncodeInpaintConditioning"
            }
          },
          {
            "id": 105,
            "type": "CyberEve_SingleImageLoopClose",
            "pos": [
              4508.54964615577,
              833.819049291928
            ],
            "size": [
              414.55036922228226,
              159.02858278497422
            ],
            "flags": {},
            "order": 32,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "flow_control",
                "name": "flow_control",
                "type": "FLOW_CONTROL",
                "link": 310
              },
              {
                "localized_name": "current_image",
                "name": "current_image",
                "type": "IMAGE",
                "link": 312
              },
              {
                "localized_name": "max_iterations",
                "name": "max_iterations",
                "type": "INT",
                "link": 308
              },
              {
                "localized_name": "current_mask",
                "name": "current_mask",
                "shape": 7,
                "type": "MASK",
                "link": 309
              }
            ],
            "outputs": [
              {
                "localized_name": "final_image",
                "name": "final_image",
                "type": "IMAGE",
                "links": [
                  313
                ]
              },
              {
                "localized_name": "final_mask",
                "name": "final_mask",
                "type": "MASK",
                "links": null
              }
            ],
            "properties": {
              "cnr_id": "loop-image",
              "ver": "1.1.0",
              "Node name for S&R": "CyberEve_SingleImageLoopClose"
            }
          },
          {
            "id": 53,
            "type": "ImageScale",
            "pos": [
              4049.2486060270935,
              625.2359677646245
            ],
            "size": [
              270,
              130
            ],
            "flags": {},
            "order": 22,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "image",
                "name": "image",
                "type": "IMAGE",
                "link": 144
              },
              {
                "localized_name": "width",
                "name": "width",
                "type": "INT",
                "widget": {
                  "name": "width"
                },
                "link": 142
              },
              {
                "localized_name": "height",
                "name": "height",
                "type": "INT",
                "widget": {
                  "name": "height"
                },
                "link": 143
              }
            ],
            "outputs": [
              {
                "localized_name": "IMAGE",
                "name": "IMAGE",
                "type": "IMAGE",
                "links": []
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "ImageScale"
            },
            "widgets_values": [
              "lanczos",
              1024,
              1024,
              "disabled"
            ]
          },
          {
            "id": 99,
            "type": "PreviewImage",
            "pos": [
              4506.786838095131,
              1035.1818089468713
            ],
            "size": [
              468.3793066029657,
              370.1823772434195
            ],
            "flags": {},
            "order": 29,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "images",
                "name": "images",
                "type": "IMAGE",
                "link": 298
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PreviewImage"
            }
          },
          {
            "id": 29,
            "type": "MathExpression|pysssss",
            "pos": [
              2098.6591001675547,
              889.5500987243666
            ],
            "size": [
              406.17149483725734,
              128
            ],
            "flags": {},
            "order": 15,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "a",
                "name": "a",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": 146
              },
              {
                "localized_name": "b",
                "name": "b",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": 147
              },
              {
                "localized_name": "c",
                "name": "c",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": 306
              }
            ],
            "outputs": [
              {
                "localized_name": "INT",
                "name": "INT",
                "type": "INT",
                "links": null
              },
              {
                "localized_name": "FLOAT",
                "name": "FLOAT",
                "type": "FLOAT",
                "links": [
                  148,
                  159,
                  161
                ]
              }
            ],
            "title": "Calculate Scale Factor",
            "properties": {
              "cnr_id": "comfyui-custom-scripts",
              "ver": "1.2.5",
              "Node name for S&R": "MathExpression|pysssss"
            },
            "widgets_values": [
              "max(c/max(a,b),1)"
            ]
          },
          {
            "id": 11,
            "type": "VAEDecode",
            "pos": [
              3837.735251616675,
              857.2889946015689
            ],
            "size": [
              194.82939628141958,
              74.0522492602613
            ],
            "flags": {},
            "order": 9,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "samples",
                "name": "samples",
                "type": "LATENT",
                "link": 127
              },
              {
                "localized_name": "vae",
                "name": "vae",
                "type": "VAE",
                "link": 13
              }
            ],
            "outputs": [
              {
                "localized_name": "IMAGE",
                "name": "IMAGE",
                "type": "IMAGE",
                "links": [
                  122,
                  144,
                  333
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "VAEDecode"
            }
          },
          {
            "id": 102,
            "type": "PrimitiveInt",
            "pos": [
              1800.473328371718,
              868.2224292241445
            ],
            "size": [
              246.48537637062145,
              82
            ],
            "flags": {},
            "order": 30,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "value",
                "name": "value",
                "type": "INT",
                "widget": {
                  "name": "value"
                },
                "link": 326
              }
            ],
            "outputs": [
              {
                "localized_name": "INT",
                "name": "INT",
                "type": "INT",
                "links": [
                  306
                ]
              }
            ],
            "title": "Intermediate Upscale To",
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PrimitiveInt"
            },
            "widgets_values": [
              1280,
              "fixed"
            ]
          },
          {
            "id": 54,
            "type": "ImageScaleBy",
            "pos": [
              2537.0342543301995,
              866.6009321819179
            ],
            "size": [
              270,
              82
            ],
            "flags": {},
            "order": 23,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "image",
                "name": "image",
                "type": "IMAGE",
                "link": 149
              },
              {
                "localized_name": "scale_by",
                "name": "scale_by",
                "type": "FLOAT",
                "widget": {
                  "name": "scale_by"
                },
                "link": 148
              }
            ],
            "outputs": [
              {
                "localized_name": "IMAGE",
                "name": "IMAGE",
                "type": "IMAGE",
                "links": [
                  150
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "ImageScaleBy"
            },
            "widgets_values": [
              "lanczos",
              1
            ]
          },
          {
            "id": 41,
            "type": "PreviewImage",
            "pos": [
              3829.3457930206123,
              1032.6149889451217
            ],
            "size": [
              324.9284450825385,
              355.52444631765525
            ],
            "flags": {},
            "order": 19,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "images",
                "name": "images",
                "type": "IMAGE",
                "link": 122
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PreviewImage"
            }
          },
          {
            "id": 40,
            "type": "BatchUncropAdvanced",
            "pos": [
              4161.771771080975,
              841.2989056169803
            ],
            "size": [
              285.36667251586914,
              230
            ],
            "flags": {},
            "order": 18,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "original_images",
                "name": "original_images",
                "type": "IMAGE",
                "link": 108
              },
              {
                "localized_name": "cropped_images",
                "name": "cropped_images",
                "type": "IMAGE",
                "link": 333
              },
              {
                "localized_name": "cropped_masks",
                "name": "cropped_masks",
                "type": "MASK",
                "link": 111
              },
              {
                "localized_name": "combined_crop_mask",
                "name": "combined_crop_mask",
                "type": "MASK",
                "link": 112
              },
              {
                "localized_name": "bboxes",
                "name": "bboxes",
                "type": "BBOX",
                "link": 113
              },
              {
                "localized_name": "combined_bounding_box",
                "name": "combined_bounding_box",
                "shape": 7,
                "type": "BBOX",
                "link": 114
              }
            ],
            "outputs": [
              {
                "localized_name": "IMAGE",
                "name": "IMAGE",
                "type": "IMAGE",
                "links": [
                  298,
                  312
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui-kjnodes",
              "ver": "1.2.0",
              "Node name for S&R": "BatchUncropAdvanced"
            },
            "widgets_values": [
              0.05,
              1,
              true,
              false
            ]
          },
          {
            "id": 59,
            "type": "ResizeMask",
            "pos": [
              2572.2849437050836,
              1081.161678422197
            ],
            "size": [
              270,
              194
            ],
            "flags": {},
            "order": 24,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "link": 156
              },
              {
                "localized_name": "width",
                "name": "width",
                "type": "INT",
                "widget": {
                  "name": "width"
                },
                "link": 164
              },
              {
                "localized_name": "height",
                "name": "height",
                "type": "INT",
                "widget": {
                  "name": "height"
                },
                "link": 163
              }
            ],
            "outputs": [
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "links": [
                  157
                ]
              },
              {
                "localized_name": "width",
                "name": "width",
                "type": "INT",
                "links": null
              },
              {
                "localized_name": "height",
                "name": "height",
                "type": "INT",
                "links": null
              }
            ],
            "properties": {
              "cnr_id": "comfyui-kjnodes",
              "ver": "1.2.0",
              "Node name for S&R": "ResizeMask"
            },
            "widgets_values": [
              512,
              512,
              false,
              "lanczos",
              "disabled"
            ]
          },
          {
            "id": 50,
            "type": "GetImageSize",
            "pos": [
              1813.6251272404902,
              998.6205974127038
            ],
            "size": [
              210,
              136
            ],
            "flags": {},
            "order": 21,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "image",
                "name": "image",
                "type": "IMAGE",
                "link": 141
              }
            ],
            "outputs": [
              {
                "localized_name": "width",
                "name": "width",
                "type": "INT",
                "links": [
                  142,
                  146,
                  158
                ]
              },
              {
                "localized_name": "height",
                "name": "height",
                "type": "INT",
                "links": [
                  143,
                  147,
                  162
                ]
              },
              {
                "localized_name": "batch_size",
                "name": "batch_size",
                "type": "INT",
                "links": null
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "GetImageSize"
            }
          },
          {
            "id": 60,
            "type": "MathExpression|pysssss",
            "pos": [
              2072.6107335825427,
              1067.527914313313
            ],
            "size": [
              210,
              128
            ],
            "flags": {},
            "order": 25,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "a",
                "name": "a",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": 158
              },
              {
                "localized_name": "b",
                "name": "b",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": 159
              },
              {
                "localized_name": "c",
                "name": "c",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": null
              }
            ],
            "outputs": [
              {
                "localized_name": "INT",
                "name": "INT",
                "type": "INT",
                "links": [
                  164
                ]
              },
              {
                "localized_name": "FLOAT",
                "name": "FLOAT",
                "type": "FLOAT",
                "links": null
              }
            ],
            "title": "Calculate Mask Width",
            "properties": {
              "cnr_id": "comfyui-custom-scripts",
              "ver": "1.2.5",
              "Node name for S&R": "MathExpression|pysssss"
            },
            "widgets_values": [
              "a*b"
            ]
          },
          {
            "id": 61,
            "type": "MathExpression|pysssss",
            "pos": [
              2303.8002577595803,
              1066.734955644435
            ],
            "size": [
              210,
              128
            ],
            "flags": {},
            "order": 26,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "a",
                "name": "a",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": 161
              },
              {
                "localized_name": "b",
                "name": "b",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": 162
              },
              {
                "localized_name": "c",
                "name": "c",
                "shape": 7,
                "type": "INT,FLOAT,IMAGE,LATENT",
                "link": null
              }
            ],
            "outputs": [
              {
                "localized_name": "INT",
                "name": "INT",
                "type": "INT",
                "links": [
                  163
                ]
              },
              {
                "localized_name": "FLOAT",
                "name": "FLOAT",
                "type": "FLOAT",
                "links": null
              }
            ],
            "title": "Calculate Mask Height",
            "properties": {
              "cnr_id": "comfyui-custom-scripts",
              "ver": "1.2.5",
              "Node name for S&R": "MathExpression|pysssss"
            },
            "widgets_values": [
              "a*b"
            ]
          },
          {
            "id": 39,
            "type": "BatchCropFromMaskAdvanced",
            "pos": [
              1425.2952421529274,
              858.6987782381365
            ],
            "size": [
              335.73333740234375,
              242
            ],
            "flags": {},
            "order": 17,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "original_images",
                "name": "original_images",
                "type": "IMAGE",
                "link": 325
              },
              {
                "localized_name": "masks",
                "name": "masks",
                "type": "MASK",
                "link": 338
              }
            ],
            "outputs": [
              {
                "localized_name": "original_images",
                "name": "original_images",
                "type": "IMAGE",
                "links": [
                  108
                ]
              },
              {
                "localized_name": "cropped_images",
                "name": "cropped_images",
                "type": "IMAGE",
                "links": []
              },
              {
                "localized_name": "cropped_masks",
                "name": "cropped_masks",
                "type": "MASK",
                "links": [
                  111
                ]
              },
              {
                "localized_name": "combined_crop_image",
                "name": "combined_crop_image",
                "type": "IMAGE",
                "links": [
                  115,
                  141,
                  149
                ]
              },
              {
                "localized_name": "combined_crop_masks",
                "name": "combined_crop_masks",
                "type": "MASK",
                "links": [
                  112,
                  116,
                  156
                ]
              },
              {
                "localized_name": "bboxes",
                "name": "bboxes",
                "type": "BBOX",
                "links": [
                  113
                ]
              },
              {
                "localized_name": "combined_bounding_box",
                "name": "combined_bounding_box",
                "type": "BBOX",
                "links": [
                  114
                ]
              },
              {
                "localized_name": "bbox_width",
                "name": "bbox_width",
                "type": "INT",
                "links": null
              },
              {
                "localized_name": "bbox_height",
                "name": "bbox_height",
                "type": "INT",
                "links": null
              }
            ],
            "properties": {
              "cnr_id": "comfyui-kjnodes",
              "ver": "1.2.0",
              "Node name for S&R": "BatchCropFromMaskAdvanced"
            },
            "widgets_values": [
              1,
              0.7
            ]
          },
          {
            "id": 107,
            "type": "GetImageRangeFromBatch",
            "pos": [
              1501.5484993150317,
              617.5358016059444
            ],
            "size": [
              316.5806700303996,
              107.10040895641089
            ],
            "flags": {},
            "order": 33,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "images",
                "name": "images",
                "shape": 7,
                "type": "IMAGE",
                "link": null
              },
              {
                "localized_name": "masks",
                "name": "masks",
                "shape": 7,
                "type": "MASK",
                "link": 322
              },
              {
                "localized_name": "start_index",
                "name": "start_index",
                "type": "INT",
                "widget": {
                  "name": "start_index"
                },
                "link": 315
              }
            ],
            "outputs": [
              {
                "localized_name": "IMAGE",
                "name": "IMAGE",
                "type": "IMAGE",
                "links": null
              },
              {
                "localized_name": "MASK",
                "name": "MASK",
                "type": "MASK",
                "links": [
                  335
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui-kjnodes",
              "ver": "1.2.0",
              "Node name for S&R": "GetImageRangeFromBatch"
            },
            "widgets_values": [
              0,
              1
            ]
          },
          {
            "id": 112,
            "type": "GrowMask",
            "pos": [
              1832.6544005369121,
              627.4390507940712
            ],
            "size": [
              270,
              82
            ],
            "flags": {},
            "order": 35,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "mask",
                "name": "mask",
                "type": "MASK",
                "link": 335
              },
              {
                "localized_name": "expand",
                "name": "expand",
                "type": "INT",
                "widget": {
                  "name": "expand"
                },
                "link": 337
              }
            ],
            "outputs": [
              {
                "localized_name": "MASK",
                "name": "MASK",
                "type": "MASK",
                "links": [
                  336,
                  338
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "GrowMask"
            },
            "widgets_values": [
              8,
              true
            ]
          },
          {
            "id": 6,
            "type": "KSampler",
            "pos": [
              3523.9707642471685,
              853.891502202401
            ],
            "size": [
              270,
              262
            ],
            "flags": {},
            "order": 6,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "model",
                "name": "model",
                "type": "MODEL",
                "link": 340
              },
              {
                "localized_name": "positive",
                "name": "positive",
                "type": "CONDITIONING",
                "link": 68
              },
              {
                "localized_name": "negative",
                "name": "negative",
                "type": "CONDITIONING",
                "link": 69
              },
              {
                "localized_name": "latent_image",
                "name": "latent_image",
                "type": "LATENT",
                "link": 139
              }
            ],
            "outputs": [
              {
                "localized_name": "LATENT",
                "name": "LATENT",
                "type": "LATENT",
                "links": [
                  127
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "KSampler"
            },
            "widgets_values": [
              935827975394511,
              "randomize",
              32,
              4,
              "dpmpp_3m_sde",
              "karras",
              0.55
            ]
          },
          {
            "id": 7,
            "type": "CheckpointLoaderSimple",
            "pos": [
              2860.415299084029,
              1136.2632126563851
            ],
            "size": [
              270,
              98
            ],
            "flags": {},
            "order": 1,
            "mode": 4,
            "inputs": [],
            "outputs": [
              {
                "localized_name": "MODEL",
                "name": "MODEL",
                "type": "MODEL",
                "links": [
                  339
                ]
              },
              {
                "localized_name": "CLIP",
                "name": "CLIP",
                "type": "CLIP",
                "links": [
                  343
                ]
              },
              {
                "localized_name": "VAE",
                "name": "VAE",
                "type": "VAE",
                "links": null
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "CheckpointLoaderSimple"
            },
            "widgets_values": [
              "tsrmix_v50.safetensors"
            ]
          },
          {
            "id": 114,
            "type": "Lora Loader Stack (rgthree)",
            "pos": [
              3189.15151072557,
              1027.9829828492443
            ],
            "size": [
              282.5333312988281,
              246
            ],
            "flags": {},
            "order": 3,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "model",
                "name": "model",
                "type": "MODEL",
                "link": 339
              },
              {
                "localized_name": "clip",
                "name": "clip",
                "type": "CLIP",
                "link": 343
              }
            ],
            "outputs": [
              {
                "localized_name": "MODEL",
                "name": "MODEL",
                "type": "MODEL",
                "links": [
                  340
                ]
              },
              {
                "localized_name": "CLIP",
                "name": "CLIP",
                "type": "CLIP",
                "links": [
                  341,
                  342
                ]
              }
            ],
            "properties": {
              "cnr_id": "rgthree-comfy",
              "ver": "1.0.2512092137",
              "Node name for S&R": "Lora Loader Stack (rgthree)"
            },
            "widgets_values": [
              "None",
              0.7,
              "None",
              1,
              "None",
              1,
              "None",
              1
            ]
          },
          {
            "id": 20,
            "type": "AILab_QwenVL",
            "pos": [
              2432.2487487972357,
              204.19969826238048
            ],
            "size": [
              382.07647704408555,
              414.29436879390346
            ],
            "flags": {},
            "order": 11,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "image",
                "name": "image",
                "shape": 7,
                "type": "IMAGE",
                "link": 277
              },
              {
                "localized_name": "video",
                "name": "video",
                "shape": 7,
                "type": "IMAGE",
                "link": null
              }
            ],
            "outputs": [
              {
                "localized_name": "RESPONSE",
                "name": "RESPONSE",
                "type": "STRING",
                "links": [
                  39,
                  345
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui-qwenvl",
              "ver": "1.1.0",
              "Node name for S&R": "AILab_QwenVL"
            },
            "widgets_values": [
              "Qwen3-VL-4B-Instruct",
              "8-bit (Balanced)",
              "auto",
              " Simple Description",
              "Write a brief description of the person in the image. Keep it concise. Do not use full sentences, output only a comma delimited list of attributes and attire. Keep the comma delimited list limited to adjectives, nouns, and verbs related to visible attributes like clothing, eye color, skin color, hair color, accessories, facial expressions, etc.\nOnly describe the character in the image, not the setting or background. Do not mention things that are not visible. Rather than saying \"no visible eyes\" or \"no accessories\", omit the detail altogether, only report seen attributes.\nExample:\n\"Red hair, green eyes, smiling, earrings, freckles, black dress, white shoes, bell choker, exposed breasts, pink nipples\"",
              512,
              true,
              2833853247,
              "randomize"
            ],
            "color": "#28403f",
            "bgcolor": "#374539"
          },
          {
            "id": 9,
            "type": "CLIPTextEncode",
            "pos": [
              3350.588827496829,
              409.85080610587534
            ],
            "size": [
              417.5616353840064,
              201.66844311418998
            ],
            "flags": {},
            "order": 7,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "clip",
                "name": "clip",
                "type": "CLIP",
                "link": 342
              },
              {
                "localized_name": "text",
                "name": "text",
                "type": "STRING",
                "widget": {
                  "name": "text"
                },
                "link": 329
              }
            ],
            "outputs": [
              {
                "localized_name": "CONDITIONING",
                "name": "CONDITIONING",
                "type": "CONDITIONING",
                "links": [
                  66
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "CLIPTextEncode"
            },
            "widgets_values": [
              "1girl, green skin, white hair, horns, goblin, gobbo, black gloves"
            ],
            "color": "#232",
            "bgcolor": "#353"
          },
          {
            "id": 10,
            "type": "CLIPTextEncode",
            "pos": [
              2928.7649709235066,
              439.9344677391408
            ],
            "size": [
              407.26808276288466,
              181.17485421542813
            ],
            "flags": {},
            "order": 8,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "clip",
                "name": "clip",
                "type": "CLIP",
                "link": 341
              },
              {
                "localized_name": "text",
                "name": "text",
                "type": "STRING",
                "widget": {
                  "name": "text"
                },
                "link": 330
              }
            ],
            "outputs": [
              {
                "localized_name": "CONDITIONING",
                "name": "CONDITIONING",
                "type": "CONDITIONING",
                "links": [
                  67
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "CLIPTextEncode"
            },
            "widgets_values": [
              "jpeg artifacts, worst quality, low quality, lowres, signature, watermark, artist_name, twitter_username, patreon_logo, letterboxed, censored, shiny skin, realistic, 3d, sweat"
            ],
            "color": "#322",
            "bgcolor": "#533"
          },
          {
            "id": 109,
            "type": "StringConcatenate",
            "pos": [
              3057.4889611511376,
              200.16069497829326
            ],
            "size": [
              400,
              200
            ],
            "flags": {},
            "order": 34,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "string_a",
                "name": "string_a",
                "type": "STRING",
                "widget": {
                  "name": "string_a"
                },
                "link": 346
              },
              {
                "label": "Additional Positive Prompt",
                "localized_name": "string_b",
                "name": "string_b",
                "type": "STRING",
                "widget": {
                  "name": "string_b"
                },
                "link": 327
              }
            ],
            "outputs": [
              {
                "localized_name": "STRING",
                "name": "STRING",
                "type": "STRING",
                "links": [
                  329
                ]
              }
            ],
            "title": "Positive Prompt",
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "StringConcatenate"
            },
            "widgets_values": [
              "",
              "",
              ","
            ],
            "color": "#232",
            "bgcolor": "#353"
          },
          {
            "id": 116,
            "type": "PrimitiveString",
            "pos": [
              2835.716187737121,
              103.40548191767832
            ],
            "size": [
              210,
              58
            ],
            "flags": {},
            "order": 2,
            "mode": 4,
            "inputs": [],
            "outputs": [
              {
                "localized_name": "STRING",
                "name": "STRING",
                "type": "STRING",
                "links": [
                  344
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PrimitiveString"
            },
            "widgets_values": [
              ""
            ]
          },
          {
            "id": 21,
            "type": "PreviewAny",
            "pos": [
              2822.811123892673,
              -86.18859326580142
            ],
            "size": [
              455.4260060591878,
              152.5336774020432
            ],
            "flags": {},
            "order": 12,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "source",
                "name": "source",
                "type": "*",
                "link": 39
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PreviewAny"
            },
            "widgets_values": [
              null,
              null,
              null
            ]
          },
          {
            "id": 19,
            "type": "PreviewImage",
            "pos": [
              2421.5179366542698,
              -99.34277706968813
            ],
            "size": [
              381.4168025949707,
              258.2870322428656
            ],
            "flags": {},
            "order": 10,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "images",
                "name": "images",
                "type": "IMAGE",
                "link": 276
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "0.6.0",
              "Node name for S&R": "PreviewImage"
            }
          },
          {
            "id": 115,
            "type": "LazySwitchKJ",
            "pos": [
              2834.405188317967,
              221.39542964117405
            ],
            "size": [
              210,
              83.2439976765998
            ],
            "flags": {},
            "order": 36,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "on_false",
                "name": "on_false",
                "type": "*",
                "link": 344
              },
              {
                "localized_name": "on_true",
                "name": "on_true",
                "type": "*",
                "link": 345
              },
              {
                "localized_name": "switch",
                "name": "switch",
                "type": "BOOLEAN",
                "widget": {
                  "name": "switch"
                },
                "link": 347
              }
            ],
            "outputs": [
              {
                "localized_name": "*",
                "name": "*",
                "type": "*",
                "links": [
                  346
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui-kjnodes",
              "ver": "1.2.0",
              "Node name for S&R": "LazySwitchKJ"
            },
            "widgets_values": [
              true
            ]
          },
          {
            "id": 1,
            "type": "SAM3Segmentation",
            "pos": [
              1009.1766858085575,
              849.1217333818615
            ],
            "size": [
              270,
              262
            ],
            "flags": {},
            "order": 4,
            "mode": 4,
            "inputs": [
              {
                "localized_name": "image",
                "name": "image",
                "type": "IMAGE",
                "link": 1
              }
            ],
            "outputs": [
              {
                "localized_name": "segmented_image",
                "name": "segmented_image",
                "type": "IMAGE",
                "links": [
                  2
                ]
              },
              {
                "localized_name": "masks",
                "name": "masks",
                "type": "MASK",
                "links": [
                  169,
                  203,
                  322
                ]
              },
              {
                "localized_name": "mask_combined",
                "name": "mask_combined",
                "type": "MASK",
                "links": []
              },
              {
                "localized_name": "segs",
                "name": "segs",
                "type": "SEGS",
                "links": null
              }
            ],
            "properties": {
              "cnr_id": "comfyui_sam3",
              "ver": "0.2.0",
              "Node name for S&R": "SAM3Segmentation"
            },
            "widgets_values": [
              "chest",
              0.7,
              150,
              150,
              false,
              false,
              ""
            ]
          }
        ],
        "groups": [
          {
            "id": 3,
            "title": "1) Get SAM3 Segments",
            "bounding": [
              986.7479357092758,
              773.1496228998027,
              402.288530583436,
              988.8928760324412
            ],
            "color": "#3f789e",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 1,
            "title": "4) Crop and Upscale Segment",
            "bounding": [
              1412.8943023245006,
              776.7753639514098,
              1418.360410864272,
              675.2623839376581
            ],
            "color": "#88A",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 7,
            "title": "2) Loop Images (Open Loop)",
            "bounding": [
              984.6107628267731,
              499.2371067929187,
              1153.3501110261582,
              261.389879633593
            ],
            "color": "#a1309b",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 4,
            "title": "3) Get Prompt for Current Image",
            "bounding": [
              2155.4793559692475,
              -170.10459450129503,
              1622.051559072614,
              798.6970142887212
            ],
            "color": "#8A8",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 5,
            "title": "5) Load Model",
            "bounding": [
              2846.1223201402927,
              1054.2662632546153,
              323.8824939010076,
              317.4622899881054
            ],
            "color": "#3f789e",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 6,
            "title": "6) Inpaint Upscaled Segment",
            "bounding": [
              3182.579888835363,
              759.3431193111942,
              616.8882374244286,
              364.73032999164457
            ],
            "color": "#b58b2a",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 2,
            "title": "7) Downscale and Uncrop",
            "bounding": [
              3815.6957739658505,
              762.4703075559535,
              656.2174961131946,
              641.6682429453456
            ],
            "color": "#88A",
            "font_size": 24,
            "flags": {}
          },
          {
            "id": 8,
            "title": "8) Loop Images (Close Loop)",
            "bounding": [
              4494.11310458446,
              753.7780914684754,
              513.7138483927392,
              664.8516158462642
            ],
            "color": "#a1309b",
            "font_size": 24,
            "flags": {}
          }
        ],
        "links": [
          {
            "id": 2,
            "origin_id": 1,
            "origin_slot": 0,
            "target_id": 3,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 169,
            "origin_id": 1,
            "origin_slot": 1,
            "target_id": 22,
            "target_slot": 0,
            "type": "MASK"
          },
          {
            "id": 325,
            "origin_id": 104,
            "origin_slot": 1,
            "target_id": 39,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 116,
            "origin_id": 39,
            "origin_slot": 4,
            "target_id": 42,
            "target_slot": 0,
            "type": "MASK"
          },
          {
            "id": 115,
            "origin_id": 39,
            "origin_slot": 3,
            "target_id": 38,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 141,
            "origin_id": 39,
            "origin_slot": 3,
            "target_id": 50,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 146,
            "origin_id": 50,
            "origin_slot": 0,
            "target_id": 29,
            "target_slot": 0,
            "type": "INT"
          },
          {
            "id": 147,
            "origin_id": 50,
            "origin_slot": 1,
            "target_id": 29,
            "target_slot": 1,
            "type": "INT"
          },
          {
            "id": 306,
            "origin_id": 102,
            "origin_slot": 0,
            "target_id": 29,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 158,
            "origin_id": 50,
            "origin_slot": 0,
            "target_id": 60,
            "target_slot": 0,
            "type": "INT"
          },
          {
            "id": 159,
            "origin_id": 29,
            "origin_slot": 1,
            "target_id": 60,
            "target_slot": 1,
            "type": "FLOAT"
          },
          {
            "id": 161,
            "origin_id": 29,
            "origin_slot": 1,
            "target_id": 61,
            "target_slot": 0,
            "type": "FLOAT"
          },
          {
            "id": 162,
            "origin_id": 50,
            "origin_slot": 1,
            "target_id": 61,
            "target_slot": 1,
            "type": "INT"
          },
          {
            "id": 149,
            "origin_id": 39,
            "origin_slot": 3,
            "target_id": 54,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 148,
            "origin_id": 29,
            "origin_slot": 1,
            "target_id": 54,
            "target_slot": 1,
            "type": "FLOAT"
          },
          {
            "id": 156,
            "origin_id": 39,
            "origin_slot": 4,
            "target_id": 59,
            "target_slot": 0,
            "type": "MASK"
          },
          {
            "id": 164,
            "origin_id": 60,
            "origin_slot": 0,
            "target_id": 59,
            "target_slot": 1,
            "type": "INT"
          },
          {
            "id": 163,
            "origin_id": 61,
            "origin_slot": 0,
            "target_id": 59,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 203,
            "origin_id": 1,
            "origin_slot": 1,
            "target_id": 76,
            "target_slot": 0,
            "type": "MASK"
          },
          {
            "id": 311,
            "origin_id": 76,
            "origin_slot": 3,
            "target_id": 104,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 322,
            "origin_id": 1,
            "origin_slot": 1,
            "target_id": 107,
            "target_slot": 1,
            "type": "MASK"
          },
          {
            "id": 315,
            "origin_id": 104,
            "origin_slot": 4,
            "target_id": 107,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 276,
            "origin_id": 95,
            "origin_slot": 0,
            "target_id": 19,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 39,
            "origin_id": 20,
            "origin_slot": 0,
            "target_id": 21,
            "target_slot": 0,
            "type": "STRING"
          },
          {
            "id": 277,
            "origin_id": 95,
            "origin_slot": 0,
            "target_id": 20,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 320,
            "origin_id": 104,
            "origin_slot": 1,
            "target_id": 95,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 66,
            "origin_id": 9,
            "origin_slot": 0,
            "target_id": 24,
            "target_slot": 0,
            "type": "CONDITIONING"
          },
          {
            "id": 67,
            "origin_id": 10,
            "origin_slot": 0,
            "target_id": 24,
            "target_slot": 1,
            "type": "CONDITIONING"
          },
          {
            "id": 73,
            "origin_id": 5,
            "origin_slot": 0,
            "target_id": 24,
            "target_slot": 2,
            "type": "VAE"
          },
          {
            "id": 150,
            "origin_id": 54,
            "origin_slot": 0,
            "target_id": 24,
            "target_slot": 3,
            "type": "IMAGE"
          },
          {
            "id": 157,
            "origin_id": 59,
            "origin_slot": 0,
            "target_id": 24,
            "target_slot": 4,
            "type": "MASK"
          },
          {
            "id": 68,
            "origin_id": 24,
            "origin_slot": 0,
            "target_id": 6,
            "target_slot": 1,
            "type": "CONDITIONING"
          },
          {
            "id": 69,
            "origin_id": 24,
            "origin_slot": 1,
            "target_id": 6,
            "target_slot": 2,
            "type": "CONDITIONING"
          },
          {
            "id": 139,
            "origin_id": 24,
            "origin_slot": 3,
            "target_id": 6,
            "target_slot": 3,
            "type": "LATENT"
          },
          {
            "id": 127,
            "origin_id": 6,
            "origin_slot": 0,
            "target_id": 11,
            "target_slot": 0,
            "type": "LATENT"
          },
          {
            "id": 13,
            "origin_id": 5,
            "origin_slot": 0,
            "target_id": 11,
            "target_slot": 1,
            "type": "VAE"
          },
          {
            "id": 144,
            "origin_id": 11,
            "origin_slot": 0,
            "target_id": 53,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 142,
            "origin_id": 50,
            "origin_slot": 0,
            "target_id": 53,
            "target_slot": 1,
            "type": "INT"
          },
          {
            "id": 143,
            "origin_id": 50,
            "origin_slot": 1,
            "target_id": 53,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 122,
            "origin_id": 11,
            "origin_slot": 0,
            "target_id": 41,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 108,
            "origin_id": 39,
            "origin_slot": 0,
            "target_id": 40,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 111,
            "origin_id": 39,
            "origin_slot": 2,
            "target_id": 40,
            "target_slot": 2,
            "type": "MASK"
          },
          {
            "id": 112,
            "origin_id": 39,
            "origin_slot": 4,
            "target_id": 40,
            "target_slot": 3,
            "type": "MASK"
          },
          {
            "id": 113,
            "origin_id": 39,
            "origin_slot": 5,
            "target_id": 40,
            "target_slot": 4,
            "type": "BBOX"
          },
          {
            "id": 114,
            "origin_id": 39,
            "origin_slot": 6,
            "target_id": 40,
            "target_slot": 5,
            "type": "BBOX"
          },
          {
            "id": 310,
            "origin_id": 104,
            "origin_slot": 0,
            "target_id": 105,
            "target_slot": 0,
            "type": "FLOW_CONTROL"
          },
          {
            "id": 312,
            "origin_id": 40,
            "origin_slot": 0,
            "target_id": 105,
            "target_slot": 1,
            "type": "IMAGE"
          },
          {
            "id": 308,
            "origin_id": 104,
            "origin_slot": 3,
            "target_id": 105,
            "target_slot": 2,
            "type": "INT"
          },
          {
            "id": 309,
            "origin_id": 104,
            "origin_slot": 2,
            "target_id": 105,
            "target_slot": 3,
            "type": "MASK"
          },
          {
            "id": 298,
            "origin_id": 40,
            "origin_slot": 0,
            "target_id": 99,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 1,
            "origin_id": -10,
            "origin_slot": 0,
            "target_id": 1,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 314,
            "origin_id": -10,
            "origin_slot": 0,
            "target_id": 104,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 313,
            "origin_id": 105,
            "origin_slot": 0,
            "target_id": -20,
            "target_slot": 0,
            "type": "IMAGE"
          },
          {
            "id": 326,
            "origin_id": -10,
            "origin_slot": 1,
            "target_id": 102,
            "target_slot": 0,
            "type": "INT"
          },
          {
            "id": 327,
            "origin_id": -10,
            "origin_slot": 2,
            "target_id": 109,
            "target_slot": 1,
            "type": "STRING"
          },
          {
            "id": 329,
            "origin_id": 109,
            "origin_slot": 0,
            "target_id": 9,
            "target_slot": 1,
            "type": "STRING"
          },
          {
            "id": 330,
            "origin_id": -10,
            "origin_slot": 3,
            "target_id": 10,
            "target_slot": 1,
            "type": "STRING"
          },
          {
            "id": 333,
            "origin_id": 11,
            "origin_slot": 0,
            "target_id": 40,
            "target_slot": 1,
            "type": "IMAGE"
          },
          {
            "id": 335,
            "origin_id": 107,
            "origin_slot": 1,
            "target_id": 112,
            "target_slot": 0,
            "type": "MASK"
          },
          {
            "id": 336,
            "origin_id": 112,
            "origin_slot": 0,
            "target_id": 95,
            "target_slot": 1,
            "type": "MASK"
          },
          {
            "id": 337,
            "origin_id": -10,
            "origin_slot": 4,
            "target_id": 112,
            "target_slot": 1,
            "type": "INT"
          },
          {
            "id": 338,
            "origin_id": 112,
            "origin_slot": 0,
            "target_id": 39,
            "target_slot": 1,
            "type": "MASK"
          },
          {
            "id": 339,
            "origin_id": 7,
            "origin_slot": 0,
            "target_id": 114,
            "target_slot": 0,
            "type": "MODEL"
          },
          {
            "id": 340,
            "origin_id": 114,
            "origin_slot": 0,
            "target_id": 6,
            "target_slot": 0,
            "type": "MODEL"
          },
          {
            "id": 341,
            "origin_id": 114,
            "origin_slot": 1,
            "target_id": 10,
            "target_slot": 0,
            "type": "CLIP"
          },
          {
            "id": 342,
            "origin_id": 114,
            "origin_slot": 1,
            "target_id": 9,
            "target_slot": 0,
            "type": "CLIP"
          },
          {
            "id": 343,
            "origin_id": 7,
            "origin_slot": 1,
            "target_id": 114,
            "target_slot": 1,
            "type": "CLIP"
          },
          {
            "id": 344,
            "origin_id": 116,
            "origin_slot": 0,
            "target_id": 115,
            "target_slot": 0,
            "type": "STRING"
          },
          {
            "id": 345,
            "origin_id": 20,
            "origin_slot": 0,
            "target_id": 115,
            "target_slot": 1,
            "type": "STRING"
          },
          {
            "id": 346,
            "origin_id": 115,
            "origin_slot": 0,
            "target_id": 109,
            "target_slot": 0,
            "type": "STRING"
          },
          {
            "id": 347,
            "origin_id": -10,
            "origin_slot": 5,
            "target_id": 115,
            "target_slot": 2,
            "type": "BOOLEAN"
          }
        ],
        "extra": {
          "workflowRendererVersion": "LG"
        }
      }
    ]
  },
  "config": {},
  "extra": {
    "ds": {
      "scale": 0.43056764313425944,
      "offset": [
        994.8423205962112,
        21.991326847781878
      ]
    },
    "frontendVersion": "1.35.9",
    "workflowRendererVersion": "LG",
    "VHS_latentpreview": false,
    "VHS_latentpreviewrate": 0,
    "VHS_MetadataImage": true,
    "VHS_KeepIntermediate": true
  },
  "version": 0.4
}